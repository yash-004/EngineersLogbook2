<ion-header translucent>
  <ion-toolbar>
    <div>
      <h1 style="margin-left: 10px;"><strong>MT RISK ASSESSMENT CHECKLIST (MT-RAC)</strong></h1>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content>

  <div>
    <h5 style="text-align:right; margin-right: 10px;"><strong><u>SAF 1200</u></strong></h5>
    <h5 style="text-align:center;"><strong><u>MT RISK ASSESSMENT CHECKLIST (MT-RAC)</u></strong></h5>
    <h6 style="margin-left: 10px;"><strong><u>ABOUT THE MT RAC FORM</u></strong><br></h6>
    <h6 style="margin-left: 10px;">It enables the drivers / riders to assess the risk level involved in their driving / riding detail. It allows the drivers / riders to make an informed decision as to whether to carry on with the detail.</h6>
  </div>
  <ion-item lines="none" no-padding>
    <ion-grid style="margin-left: 5px;">
      <ion-row class="cell-class">
        <ion-col size="2">
          <div>
            <h6 style="text-align:center"><strong>FACTORS</strong></h6>
          </div>
        </ion-col>
        <ion-col class="cell-class" style="margin-left : -1px">
          <div>
            <h6 style="text-align:center"><strong>MEANING</strong></h6>
          </div>
        </ion-col>
      </ion-row>
      <ion-row align-items-center class="cell-class">
        <ion-col size="2">
          <div>
            <h6 style="text-align:center">MAN</h6>
          </div>
        </ion-col>
        <ion-col class="cell-class" style="margin-left : -1px">
          <div>
            <h6 style="text-align:left">This refers to the driver / rider and in particular his driving / riding experience and accident record.<br>How well he has rested before the detail is also important.</h6>
          </div>
        </ion-col>
      </ion-row>
      <ion-row align-items-center class="cell-class">
        <ion-col size="2">
          <div>
            <h6 style="text-align:center">MACHINE</h6>
          </div>
        </ion-col>
        <ion-col class="cell-class" style="margin-left : -1px">
          <div>
            <h6 style="text-align:left">This refers to the condition of the vehicle / motorcycle, which they are handling on the road.<br>A faulty vehicle / motorcycle will heighten the risk level.</h6>
          </div>
        </ion-col>
      </ion-row>
      <ion-row align-items-center class="cell-class">
        <ion-col size="2">
          <div>
            <h6 style="text-align:center">MISSION</h6>
          </div>
        </ion-col>
        <ion-col class="cell-class" style="margin-left : -1px">
          <div>
            <h6 style="text-align:left">This type of transport detail will have an effect on the risk level.<br>An administrative detail will have less risk than a training detail, which requires them to drive / ride in difficult cross-country terrain.</h6>
          </div>
        </ion-col>
      </ion-row>
      <ion-row align-items-center class="cell-class">
        <ion-col size="2">
          <div>
            <h6 style="text-align:center">MEDIUM</h6>
          </div>
        </ion-col>
        <ion-col class="cell-class" style="margin-left : -1px">
          <div>
            <h6 style="text-align:left">This refers mainly to the road conditions under which the driver / rider operates.<br>Their prevailing conditions will have a direct effect on the driver / rider.</h6>
          </div>
        </ion-col>
      </ion-row>
      <ion-row align-items-center class="cell-class">
        <ion-col size="2">
          <div>
            <h6 style="text-align:center">MANAGEMENT</h6>
          </div>
        </ion-col>
        <ion-col class="cell-class" style="margin-left : -1px">
          <div>
            <h6 style="text-align:left">Close supervision of the driver / rider will contribute to risk minimisation.<br>Assignment of Vehicle Commander of a high rank will have a psychological effect on the driver to do better.</h6>
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-item>

  <ion-item lines="none" no-padding>
    <ion-grid style="margin-left: 5px;">
      <ion-row>
        <ion-col class="cell-class">
          <div>
            <h6 style="text-align:center"><strong>RISK LEVEL</strong></h6>
          </div>
        </ion-col>
      </ion-row>
      <ion-row align-items-center class="cell-class">
        <ion-col>
          <div>
            <h6 style="text-align:center"><strong>LOW RISK</strong></h6>
          </div>
        </ion-col>
        <ion-col class="cell-class" style="margin-left : -1px;">
          <div>
            <h6 style="text-align:center"><strong>MEDIUM RISK</strong></h6>
          </div>
        </ion-col>
        <ion-col>
          <div>
            <h6 style="text-align:center"><strong>HIGH RISK</strong></h6>
          </div>
        </ion-col>
      </ion-row>
      <ion-row align-items-center class="cell-class">
        <ion-col>
          <div>
            <h6 style="text-align:center">Normal operational risk.</h6>
          </div>
        </ion-col>
        <ion-col class="cell-class" style="margin-left : -1px;">
          <div>
            <h6 style="text-align:center">Above normal operational risk level.<br>Increase supervision, briefing and exercise caution, Mission may be suspended till conditions are better.</h6>
          </div>
        </ion-col>
        <ion-col>
          <div>
            <h6 style="text-align:center">Do not proceed with mission unless approved by higher authorities.<br><strong>All high risk factors must be mitigated.</strong></h6>
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-item>

  <ion-item lines="none" no-padding>
    <ion-grid style="margin-left: 5px;">
      <ion-row>
        <ion-col class="cell-class">
          <div>
            <h6 style="text-align:center"><strong><u>Vehicle Commander Standing Order</u></strong></h6>
          </div>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col class="cell-class">
          <div>
            <h6 style="text-align:left">1. To be responsible for the discipline and safety of all passengers/crew in the assigned transport detail.</h6>
          </div>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col class="cell-class">
          <div>
            <h6 style="text-align:left">2. To assist to look out for obstruction, hazard or danger. If the driver is reversing, there is no requirement for the vehiucle commander to guide the driver. However, VC should render assistance to the driver when requested.</h6>
          </div>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col class="cell-class">
          <div>
            <h6 style="text-align:left">3. Go through intended route with the driver.</h6>
          </div>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col class="cell-class">
          <div>
            <h6 style="text-align:left">4. If unsure of route or lost, to instruct the driver to stop the vehicle at a safe place to re-orientate or seek further instructions.</h6>
          </div>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col class="cell-class">
          <div>
            <h6 style="text-align:left">5. If involved in an accident, to inform unit about the accident and assit the driver to manage the accident.</h6>
          </div>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col class="cell-class">
          <div>
            <h6 style="text-align:left">6. To check and endorse the MT-RAC.</h6>
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-item>
  
  <div>
    <h6 style="margin-left: 10px;"><strong><u>Briefing and ensuring notes for TO/ DV/ LOA Drivers</u></strong><br></h6>

    <h6 style="margin-left: 10px;"><ol type="a">
      <li>Check and <strong>ensure seating capacity</strong>, if exceeds (Please do not proceed on with the detail)</li>
      <li>Brief troops to engage <strong>seat belt</strong> throughout the journey</li>
      <li>Assist the troops in engaging the <strong>safety straps</strong>. Safety straps are to be engaged throughout the journey.</li>
      <li>Brief "<strong>no smoking / sleeping</strong> on vehicle" throughout the journey</li>
      <li><strong>No moving</strong> while the vehicle is on the move</li>
      <li><strong>No sitting on the tailboard</strong> at all times</li>
    </ol></h6>

    <h6 style="margin-left: 10px;"><strong>* For any matters please seek vehicle commander's assistance</strong><br></h6>
  </div>

  <div>
    <h5 style="text-align:right; margin-right: 10px;"><strong><u>SAF 1200</u></strong></h5>
    <h5 style="text-align:center;"><strong><u>MT RISK ASSESSMENT CHECKLIST (MT-RAC)</u></strong></h5>
    <ion-grid style="margin-left: 5px;"><ion-row class="cell-class">
      <h6 style="margin-left: 10px;">The MT-RAC form is an assessment of the 5-M Risk Factors and identified high risk factors are to be mitigated. All SAF Drivers are to fill up the MT-RAC form, and completed forms are to be kept by the MT Node for 3 working days or in the event of an accident, until the investigation is completed. A MT-RAC form is to be completed for every transport detail, or when there is a change in the conditions or nature of detail. For exercises/training, a MT-RAC is prepared at the start of each exercise, and updated  if there is a change in conditions.</h6>
    </ion-row></ion-grid></div>

  <form class="form" [formGroup]="mtracForm" (submit)="addmtrac(mtracForm.value)">
  <ion-card><ion-card-content>
    <ion-item lines="none">
      <ion-label  position="floating">Driving Area</ion-label>
      <ion-select [ngStyle]="{'color': 'black'}" formControlName="incamp" interface="popover">
        <ion-select-option [ngStyle]="{'color': 'black'}" text-wrap value=true>In Camp</ion-select-option>
        <ion-select-option [ngStyle]="{'color': 'black'}" text-wrap value=false *ngIf="gettime()">Out of Camp</ion-select-option>
      </ion-select>
    </ion-item>

    <ion-item>
      <ion-label  position="floating" >From</ion-label>
      <ion-input [ngStyle]="{'color': 'black'}" type="text" onkeyup="this.value = this.value.toUpperCase()" formControlName="startLocation" placeholder="Start Location"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label  position="floating">To</ion-label>
      <ion-input [ngStyle]="{'color': 'black'}" type="text" onkeyup="this.value = this.value.toUpperCase()" formControlName="endLocation" placeholder="End Location"></ion-input>
    </ion-item>

    <ion-item>
      <ion-col><ion-item>
        <ion-label  position="floating" >Vehicle Number</ion-label>
        <ion-input [ngStyle]="{'color': 'black'}" onkeyup="this.value = this.value.toUpperCase()" formControlName="vehicleNumber" placeholder="XXXXMID"></ion-input>
      </ion-item>
      <div class="validation-errors">
        <ng-container *ngFor="let validation of validationMessages.vehicleNumber">
          <div class="error-message" *ngIf="mtracForm.get('vehicleNumber').hasError(validation.type) && (mtracForm.get('vehicleNumber').dirty || mtracForm.get('vehicleNumber').touched)">
            {{ validation.message }}
          </div>
        </ng-container>
      </div>
      <ion-item>
        <ion-label position="floating">Vehicle Type</ion-label>
        <ion-select formControlName="vehicleType" interface="popover">
          <ion-select-option text-wrap *ngFor="let vty of getapprovedvtypes()" value={{vty.text}} disabled={{!vty.ready}}>{{vty.text}}</ion-select-option>
        </ion-select></ion-item>
        <div class="validation-errors">
          <ng-container *ngFor="let validation of validationMessages.vehicleType">
            <div class="error-message"
              *ngIf="mtracForm.get('vehicleType').hasError(validation.type) && (mtracForm.get('vehicleType').dirty || mtracForm.get('vehicleType').touched)">
              {{ validation.message }}
            </div>
          </ng-container>
        </div>
      </ion-col>
    </ion-item>

    <ion-item>
      <ion-label position="floating">Vehicle Commander</ion-label>
      <ion-select formControlName="commander" interface="popover">
        <ion-select-option *ngFor="let c of database.current.all_commanders_of_driver" value={{c.email}}>{{c.name}}
        </ion-select-option>
      </ion-select>
    </ion-item>
  </ion-card-content></ion-card>

  <ion-card>
    <ion-card-title text-center>MAN FACTORS</ion-card-title>
    <ion-card-content>

      <ion-col><ion-item>
        <ion-label *ngIf="mtracForm.get('licenseType').value=='H'||mtracForm.get('licenseType').value=='N'" color="danger"><strong>Driving Experience</strong></ion-label>
        <ion-label *ngIf="mtracForm.get('licenseType').value=='M'" color="warning"><strong>Driving Experience</strong></ion-label>
        <ion-label *ngIf="mtracForm.get('licenseType').value==''||mtracForm.get('licenseType').value=='L'"><strong>Driving Experience</strong></ion-label>
        <ion-select *ngIf="this.mtrac == null||this.database.current.user.email == this.mtrac.driver ; else notnull"[ngModel]="selectedLicense" [ngStyle]="{'color': 'black'}"  formControlName="licenseType" interface="popover" text-left>
          <ion-select-option text-wrap *ngFor="let licenseType of licenseTypes" [value]=licenseType.value>{{licenseType.text}}</ion-select-option>
        </ion-select>
        <ng-template #notnull><ion-select *ngIf="this.database.current.user.email != this.mtrac.driver"  formControlName="licenseType" interface="popover" text-left>
          <ion-select-option text-wrap value="L">CAT A, B</ion-select-option>
          <ion-select-option text-wrap value="M">CAT C</ion-select-option>
          <ion-select-option text-wrap value="H">CAT D</ion-select-option>
          <ion-select-option text-wrap value="N">Have never been trained and familiarized in the vehicle that you will be driving</ion-select-option>
        </ion-select></ng-template>
        </ion-item>
        <div class="validation-errors">
          <ng-container *ngFor="let validation of validationMessages.licenseType">
            <div class="error-message"
                 *ngIf="mtracForm.get('licenseType').hasError(validation.type) && (mtracForm.get('licenseType').dirty || mtracForm.get('licenseType').touched)">
              {{ validation.message }}
            </div>
          </ng-container>
        </div>
      </ion-col>
      <ion-col><ion-item>
        <ion-label *ngIf="mtracForm.get('vehicleType2').value=='H'||mtracForm.get('vehicleType2').value=='N'" color="danger"><strong>Vehicle Type</strong></ion-label>
        <ion-label *ngIf="mtracForm.get('vehicleType2').value=='M'" color="warning"><strong>Vehicle Type</strong></ion-label>
        <ion-label *ngIf="mtracForm.get('vehicleType2').value==''||mtracForm.get('vehicleType2').value=='L'"><strong>Vehicle Type</strong></ion-label>
        <ion-select [ngStyle]="{'color': 'black'}"  formControlName="vehicleType2" interface="popover" text-wrap>
          <ion-select-option text-wrap value="L">Same as last detail / Different (GP Car/Pickup)</ion-select-option>
          <ion-select-option text-wrap value="M">Different (Class 3)</ion-select-option>
          <ion-select-option text-wrap value="H">Different (Class 4 and above)</ion-select-option>
        </ion-select>
        </ion-item>
        <div class="validation-errors">
          <ng-container *ngFor="let validation of validationMessages.vehicleType">
            <div class="error-message"
                 *ngIf="mtracForm.get('vehicleType').hasError(validation.type) && (mtracForm.get('vehicleType').dirty || mtracForm.get('vehicleType').touched)">
              {{ validation.message }}
            </div>
          </ng-container>
        </div>
      </ion-col>
      <ion-col><ion-item>
        <ion-label *ngIf="mtracForm.get('rest').value=='H'||mtracForm.get('rest').value=='N'" color="danger"><strong>Fatigue/Length of Rest</strong></ion-label>
        <ion-label *ngIf="mtracForm.get('rest').value=='M'" color="warning"><strong>Fatigue/Length of Rest</strong></ion-label>
        <ion-label *ngIf="mtracForm.get('rest').value==''||mtracForm.get('rest').value=='L'"><strong>Fatigue/Length of Rest</strong></ion-label>
        <ion-select [ngStyle]="{'color': 'black'}" formControlName="rest" interface="popover" text-wrap>
          <ion-select-option text-wrap value="L">More than 7 hours</ion-select-option>
          <ion-select-option text-wrap value="M">Less than 7 hours (Camp/Home)</ion-select-option>
          <ion-select-option text-wrap value="H">Less than 7 hours (Field)</ion-select-option>
          <ion-select-option text-wrap value="N">Less than 4 hours (Field)</ion-select-option>
        </ion-select></ion-item>
        <div class="validation-errors">
          <ng-container *ngFor="let validation of validationMessages.rest">
            <div class="error-message"
                 *ngIf="mtracForm.get('rest').hasError(validation.type) && (mtracForm.get('rest').dirty || mtracForm.get('rest').touched)">
              {{ validation.message }}
            </div>
          </ng-container>
        </div>
      </ion-col>
      <ion-col><ion-item>
        <ion-label *ngIf="mtracForm.get('health').value=='H'||mtracForm.get('health').value=='N'" color="danger"><strong>My Health</strong></ion-label>
        <ion-label *ngIf="mtracForm.get('health').value=='M'" color="warning"><strong>My Health</strong></ion-label>
        <ion-label *ngIf="mtracForm.get('health').value==''||mtracForm.get('health').value=='L'"><strong>My Health</strong></ion-label>
        <ion-select [ngStyle]="{'color': 'black'}" formControlName="health" interface="popover" text-wrap>
          <ion-select-option text-wrap value="L">Good</ion-select-option>
          <ion-select-option text-wrap value="M">Fair (Just recovered from illness)</ion-select-option>
          <ion-select-option text-wrap value="N">Poor (Ill or still under medication that causes drowsiness)</ion-select-option>
        </ion-select></ion-item>
        <div class="validation-errors">
          <ng-container *ngFor="let validation of validationMessages.health">
            <div class="error-message"
                 *ngIf="mtracForm.get('health').hasError(validation.type) && (mtracForm.get('health').dirty || mtracForm.get('health').touched)">
              {{ validation.message }}
            </div>
          </ng-container>
        </div>
      </ion-col>
    </ion-card-content></ion-card>

  <ion-card>
    <ion-card-title text-center>MEDIUM FACTORS</ion-card-title>
    <ion-card-content>
      <ion-col><ion-item>
        <ion-label *ngIf="mtracForm.get('weather').value=='H'||mtracForm.get('weather').value=='N'" color="danger"><strong>Weather</strong></ion-label>
        <ion-label *ngIf="mtracForm.get('weather').value=='M'" color="warning"><strong>Weather</strong></ion-label>
        <ion-label *ngIf="mtracForm.get('weather').value==''||mtracForm.get('weather').value=='L'"><strong>Weather</strong></ion-label>
        <ion-select [ngStyle]="{'color': 'black'}" formControlName="weather" interface="popover" text-wrap>
          <ion-select-option text-wrap value="L">Dry</ion-select-option>
          <ion-select-option text-wrap value="M">Wet</ion-select-option>
          <ion-select-option text-wrap value="H">Heavy showers</ion-select-option>
        </ion-select></ion-item>
        <div class="validation-errors">
          <ng-container *ngFor="let validation of validationMessages.weather">
            <div class="error-message"
                 *ngIf="mtracForm.get('weather').hasError(validation.type) && (mtracForm.get('weather').dirty || mtracForm.get('weather').touched)">
              {{ validation.message }}
            </div>
          </ng-container>
        </div>
      </ion-col>
      <ion-col><ion-item>
        <ion-label *ngIf="mtracForm.get('route').value=='H'||mtracForm.get('route').value=='N'" color="danger"><strong>Route Familiarity</strong></ion-label>
        <ion-label *ngIf="mtracForm.get('route').value=='M'" color="warning"><strong>Route Familiarity</strong></ion-label>
        <ion-label *ngIf="mtracForm.get('route').value==''||mtracForm.get('route').value=='L'"><strong>Route Familiarity</strong></ion-label>
        <ion-select [ngStyle]="{'color': 'black'}" formControlName="route" interface="popover" text-wrap>
          <ion-select-option text-wrap value="L">Familiar</ion-select-option>
          <ion-select-option text-wrap value="H">Not familiar even after route brief done</ion-select-option>
          <ion-select-option text-wrap value="H">Not familiar as route brief is not done</ion-select-option>
        </ion-select></ion-item>
        <div class="validation-errors">
          <ng-container *ngFor="let validation of validationMessages.route">
            <div class="error-message"
                 *ngIf="mtracForm.get('route').hasError(validation.type) && (mtracForm.get('route').dirty || mtracForm.get('route').touched)">
              {{ validation.message }}
            </div>
          </ng-container>
        </div>
      </ion-col>
    </ion-card-content></ion-card>

  <ion-card>
    <ion-card-title text-center>MISSION FACTORS</ion-card-title>
    <ion-card-content>
      <ion-col><ion-item>
        <ion-label *ngIf="mtracForm.get('detailType').value=='H'||mtracForm.get('detailType').value=='N'" color="danger"><strong>Detail Type</strong></ion-label>
        <ion-label *ngIf="mtracForm.get('detailType').value=='M'" color="warning"><strong>Detail Type</strong></ion-label>
        <ion-label *ngIf="mtracForm.get('detailType').value==''||mtracForm.get('detailType').value=='L'"><strong>Detail Type</strong></ion-label>
        <ion-select [ngStyle]="{'color': 'black'}" formControlName="detailType" interface="popover" text-wrap>
          <ion-select-option text-wrap value="L">Admin</ion-select-option>
          <ion-select-option text-wrap value="M">Training/Operations(Including towing)</ion-select-option>
          <ion-select-option text-wrap value="H">All administrative towing</ion-select-option>
        </ion-select></ion-item>
        <div class="validation-errors">
          <ng-container *ngFor="let validation of validationMessages.detailType">
            <div class="error-message"
                 *ngIf="mtracForm.get('detailType').hasError(validation.type) && (mtracForm.get('detailType').dirty || mtracForm.get('detailType').touched)">
              {{ validation.message }}
            </div>
          </ng-container>
        </div>
      </ion-col>
    </ion-card-content></ion-card>

  <ion-card>
    <ion-card-title text-center>MANAGEMENT FACTORS</ion-card-title>
    <ion-card-content>
      <ion-col><ion-item>
        <ion-label *ngIf="mtracForm.get('vc').value=='H'||mtracForm.get('vc').value=='N'" color="danger"><strong>Without Vehicle Commander</strong></ion-label>
        <ion-label *ngIf="mtracForm.get('vc').value=='M'" color="warning"><strong>Without Vehicle Commander</strong></ion-label>
        <ion-label *ngIf="mtracForm.get('vc').value==''||mtracForm.get('vc').value=='L'"><strong>Without Vehicle Commander</strong></ion-label>
        <ion-select [ngStyle]="{'color': 'black'}" formControlName="vc" interface="popover" text-wrap>
          <ion-select-option text-wrap value="L">CAT A, B</ion-select-option>
          <ion-select-option text-wrap value="M">CAT C</ion-select-option>
          <ion-select-option text-wrap value="N">CAT D</ion-select-option>
        </ion-select></ion-item>
        <div class="validation-errors">
          <ng-container *ngFor="let validation of validationMessages.vc">
            <div class="error-message"
                 *ngIf="mtracForm.get('vc').hasError(validation.type) && (mtracForm.get('vc').dirty || mtracForm.get('vc').touched)">
              {{ validation.message }}
            </div>
          </ng-container>
        </div>
      </ion-col>
    </ion-card-content></ion-card>

  <ion-card>
    <ion-card-title text-center>MACHINE FACTORS</ion-card-title>
    <ion-card-content>
      <ion-col><ion-item>
        <ion-label *ngIf="mtracForm.get('vehicleServiceability').value=='H'||mtracForm.get('vehicleServiceability').value=='N'" color="danger"><strong>Vehicle Serviceability</strong></ion-label>
        <ion-label *ngIf="mtracForm.get('vehicleServiceability').value==''||mtracForm.get('vehicleServiceability').value=='L'"><strong>Vehicle Serviceability</strong></ion-label>
        <ion-select [ngStyle]="{'color': 'black'}" formControlName="vehicleServiceability" interface="popover" text-wrap>
          <ion-select-option text-wrap value="L">No fault</ion-select-option>
          <ion-select-option text-wrap value="H">Minor fault</ion-select-option>
          <ion-select-option text-wrap value="N">Major fault</ion-select-option>
        </ion-select></ion-item>
        <div class="validation-errors">
          <ng-container *ngFor="let validation of validationMessages.vehicleServiceability">
            <div class="error-message"
                 *ngIf="mtracForm.get('vehicleServiceability').hasError(validation.type) && (mtracForm.get('vehicleServiceability').dirty || mtracForm.get('vehicleServiceability').touched)">
              {{ validation.message }}
            </div>
          </ng-container>
        </div>
      </ion-col>
    </ion-card-content></ion-card>

    <ion-card>
      <ion-card-title text-center>OVERALL RISK LEVEL</ion-card-title>
      <ion-card-content>
        <ion-item *ngIf="!getoverallrisk()" color="danger" text-center>
          <ion-label >
            NO MOVE
          </ion-label>
        </ion-item>
        <ion-item *ngIf="getoverallrisk()=='HIGH'" color="danger" text-center>
          <ion-label >
            {{getoverallrisk()}}
          </ion-label>
        </ion-item>
        <ion-item *ngIf="getoverallrisk()=='MEDIUM'" color="warning" text-center>
          <ion-label >
            {{getoverallrisk()}}
          </ion-label>
        </ion-item>
        <ion-item  *ngIf="getoverallrisk()=='LOW'" color="success" text-center>
          <ion-label>
            {{getoverallrisk()}}
          </ion-label>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <div>
      <h6 style="text-align:center;"><strong>SAF DRIVERS<sup>1</sup>, VEHICLE COMMANDERS AND FRONT PASSENGERS ARE RESPONSIBLE FOR THE TROOPS AND CARGO TRANSPORTED. THEY ARE TO PERFORM THE FOLLOWING ACTIONS AND BRIEFING. (PLEASE TICK ACCORDINGLY ON THE CHECKLIST)</strong></h6>
    </div>

    <ion-item lines="none" no-padding>
      <ion-grid style="margin-left: 5px;">
        <ion-row class="cell-class">
          <ion-col size="8">
            <div>
              <h6 style="text-align:left"><strong>Description</strong></h6>
            </div>
          </ion-col>
          <ion-col class="cell-class" style="margin-left : -1px; text-align:center;">
            <div>
              <h6 style="text-align:center"><strong>Driver</strong></h6>
            </div>
          </ion-col>
          <ion-col>
            <div>
              <h6 style="text-align:center"><strong>Veh Cmd</strong></h6>
            </div>
          </ion-col>
        </ion-row>
        <ion-row class="cell-class">
          <ion-col size="8">
            <div>
              <h6 style="text-align:left">Ensure that the driver is <strong>licensed to operate</strong> the vehicle nad has displayed driving permit on dashboard</h6>
            </div>
          </ion-col>
          <ion-col class="invalid-class" style="margin-left : -1px;">
            <div class="invalid-div">
              <h5 style="text-align:center"><strong>-</strong></h5>
            </div>
          </ion-col>
          <ion-col align-items-center>
            <div class="checkbox-div" align="center">
              <ion-checkbox formControlName="cmdlicense" name="cmdlicense"></ion-checkbox>
            </div>
          </ion-col>
        </ion-row>
        <ion-row class="cell-class">
          <ion-col size="8">
            <div>
              <h6 style="text-align:left">Ensure that the driver <strong>does not exceed the vehicle or road speed limit</strong></h6>
            </div>
          </ion-col>
          <ion-col class="invalid-class" style="margin-left : -1px;">
            <div class="invalid-div">
              <h5 style="text-align:center"><strong>-</strong></h5>
            </div>
          </ion-col>
          <ion-col align-items-center>
            <div class="checkbox-div" align="center">
              <ion-checkbox formControlName="cmdspeedlimit" name="cmdspeedlimit" ></ion-checkbox>
            </div>
          </ion-col>
        </ion-row>
        <ion-row class="cell-class">
          <ion-col size="8">
            <div>
              <h6 style="text-align:left">Assist/Warn the driver of any <strong>obstacles, hazards or dangers</strong></h6>
            </div>
          </ion-col>
          <ion-col class="invalid-class" style="margin-left : -1px;">
            <div class="invalid-div">
              <h5 style="text-align:center"><strong>-</strong></h5>
            </div>
          </ion-col>
          <ion-col align-items-center>
            <div class="checkbox-div" align="center">
              <ion-checkbox formControlName="cmddanger" name="cmddanger" style="background: transparent;">></ion-checkbox>
            </div>
          </ion-col>
        </ion-row>
        <ion-row class="cell-class">
          <ion-col size="8">
            <div>
              <h6 style="text-align:left">Warn the driver during <strong>reversing or movement towards congested or narrow spaces</strong></h6>
            </div>
          </ion-col>
          <ion-col class="invalid-class" style="margin-left : -1px;">
            <div class="invalid-div">
              <h5 style="text-align:center"><strong>-</strong></h5>
            </div>
          </ion-col>
          <ion-col align-items-center>
            <div class="checkbox-div" align="center">
              <ion-checkbox formControlName="cmdreverse" name="cmdreverse"></ion-checkbox>
            </div>
          </ion-col>
        </ion-row>
        <ion-row class="cell-class">
          <ion-col size="8">
            <div>
              <h6 style="text-align:left">Brief and ensure troops <strong>secure their seat belts</strong> before movement of vehicle</h6>
            </div>
          </ion-col>
          <ion-col class="cell-class" style="margin-left : -1px;">
            <div class="checkbox-div" align="center">
              <ion-checkbox formControlName="seatbeltdriver" name="seatbeltdriver"></ion-checkbox>
            </div>
          </ion-col>
          <ion-col align-items-center>
            <div class="checkbox-div" align="center">
              <ion-checkbox formControlName="seatbeltcommander" name="seatbeltcommander"></ion-checkbox>
            </div>
          </ion-col>
        </ion-row>
        <ion-row class="cell-class">
          <ion-col size="8">
            <div>
              <h6 style="text-align:left">Check and ensure <strong>seating or loading capacity of the vehicle is not exceeded</strong></h6>
            </div>
          </ion-col>
          <ion-col class="cell-class" style="margin-left : -1px;">
            <div class="checkbox-div" align="center">
              <ion-checkbox formControlName="seatingdriver" name="seatingdriver"></ion-checkbox>
            </div>
          </ion-col>
          <ion-col align-items-center>
            <div class="checkbox-div" align="center">
              <ion-checkbox formControlName="seatingcommander" name="seatingcommander"></ion-checkbox>
            </div>
          </ion-col>
        </ion-row>
        <ion-row class="cell-class">
          <ion-col size="8">
            <div>
              <h6 style="text-align:left">Check and ensure <strong>safety straps in place and tailboard of vehicle is closed</strong></h6>
            </div>
          </ion-col>
          <ion-col class="cell-class" style="margin-left : -1px;">
            <div class="checkbox-div" align="center">
              <ion-checkbox formControlName="safetystrapdriver" name="safetystrapdriver"></ion-checkbox>
            </div>
          </ion-col>
          <ion-col align-items-center>
            <div class="checkbox-div" align="center">
              <ion-checkbox formControlName="safetystrapcommander" name="safetystrapcommander"></ion-checkbox>
            </div>
          </ion-col>
        </ion-row>
        <ion-row class="cell-class">
          <ion-col size="8">
            <div>
              <h6 style="text-align:left">Brief troops on <strong>no smoking/sleeping on the vehicle</strong> before movement of vehicle</h6>
            </div>
          </ion-col>
          <ion-col class="cell-class" style="margin-left : -1px;">
            <div class="checkbox-div" align="center">
              <ion-checkbox formControlName="smokingdriver" name="smokingdriver"></ion-checkbox>
            </div>
          </ion-col>
          <ion-col align-items-center>
            <div class="checkbox-div" align="center">
              <ion-checkbox formControlName="smokingcommander" name="smokingcommander"></ion-checkbox>
            </div>
          </ion-col>
        </ion-row>
        <ion-row class="cell-class">
          <ion-col size="8">
            <div>
              <h6 style="text-align:left"><strong>Secure load</strong> before movement of vehicle</h6>
            </div>
          </ion-col>
          <ion-col class="cell-class" style="margin-left : -1px;">
            <div class="checkbox-div" align="center">
              <ion-checkbox formControlName="loaddriver" name="loaddriver"></ion-checkbox>
            </div>
          </ion-col>
          <ion-col align-items-center>
            <div class="checkbox-div" align="center">
              <ion-checkbox formControlName="loadcommander" name="loadcommander"></ion-checkbox>
            </div>
          </ion-col>
        </ion-row>
        <ion-row class="cell-class">
          <ion-col size="8">
            <div>
              <h6 style="text-align:left">If vehicle <strong>involved in an accident</strong> to contact parent unit, Transport Node and Police to inform about accident</h6>
            </div>
          </ion-col>
          <ion-col class="cell-class" style="margin-left : -1px;">
            <div class="checkbox-div" align="center">
              <ion-checkbox formControlName="accidentdriver" name="accidentdriver"></ion-checkbox>
            </div>
          </ion-col>
          <ion-col align-items-center>
            <div class="checkbox-div" align="center">
              <ion-checkbox formControlName="accidentcommander" name="accidentcommander"></ion-checkbox>
            </div>
          </ion-col>
        </ion-row>
        <ion-row class="cell-class">
          <ion-col size="8">
            <div>
              <h6 style="text-align:left">Ensure that MT RAC form is <strong>completed and duly counter-signed</strong></h6>
            </div>
          </ion-col>
          <ion-col class="cell-class" style="margin-left : -1px;">
            <div class="checkbox-div" align="center">
              <ion-checkbox formControlName="mtraccompletedriver" name="mtraccompletedriver"></ion-checkbox>
            </div>
          </ion-col>
          <ion-col align-items-center>
            <div class="checkbox-div" align="center">
              <ion-checkbox formControlName="mtraccompletecommander" name="mtraccompletecommander"></ion-checkbox>
            </div>
          </ion-col>
        </ion-row>
        <ion-row class="cell-class">
          <ion-col size="8">
            <div>
              <h6 style="text-align:left">Ensure that driver has <strong>completed</strong> the checks listed above</h6>
            </div>
          </ion-col>
          <ion-col class="invalid-class" style="margin-left : -1px;">
            <div class="invalid-div">
              <h5 style="text-align:center"><strong>-</strong></h5>
            </div>
          </ion-col>
          <ion-col align-items-center>
            <div class="checkbox-div" align="center">
              <ion-checkbox formControlName="cmdchecklistcomplete" name="cmdchecklistcomplete"></ion-checkbox>
            </div>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>

<!--

    <div class="btn-wrapper">
      <div *ngIf = showSubmit()>
        <ion-button class="submit-btn" type="submit" routerLink="/add-drive" [disabled]="!mtracForm.valid" style="padding-right:10px">Submit
        </ion-button>
        <ion-button (click)='onCancel()'>Cancel</ion-button>
      </div>
      <div *ngIf = !showSubmit()>
        <ion-button expand="block" (click)='onCancel()'>OK</ion-button>
      </div>
    </div>

-->

    <ion-item>
      <ion-label text-wrap>I acknowledge that I, {{this.database.current.user.name}}, have read through, understood, and checked through the MT Risk Assessment (MT-RAC) Checklist on {{getcdt()}}.</ion-label>
      <ion-checkbox *ngIf="this.driver == this.database.current.user.email" slot="start" formControlName="drivermtrac" name="drivermtrac" style="background: transparent;"></ion-checkbox>
      <ion-checkbox *ngIf="this.commander == this.database.current.user.email" slot="start" formControlName="commandermtrac" name="commandermtrac" style="background: transparent;"></ion-checkbox>
    </ion-item>

    <div class="btn-wrapper">
    <div *ngIf="mtracForm.get('drivermtrac').value && !mtracForm.get('commandermtrac').value && this.commander != this.database.current.user.email">
      <ion-button (click)='onCancel()'>Cancel</ion-button>
      <ion-button *ngIf="!this.database.current.user.is_commander" style="padding-right:10px" class="submit-btn" type="submit" [disabled]="!mtracForm.valid || getoverallrisk()==false" routerLink="/tabs/summary">Submit</ion-button>
      <ion-button *ngIf="this.database.current.user.is_commander" style="padding-right:10px" class="submit-btn" type="submit" [disabled]="!mtracForm.valid || getoverallrisk()==false" routerLink="/tabs/commander">Submit</ion-button>
    </div>
    <div *ngIf="this.commander == this.database.current.user.email">
      <ion-button (click)='onCancel()'>Cancel</ion-button>
      <ion-button style="padding-right:10px" [disabled]="!getcmdchecklistcomplete() || getoverallrisk()==false " class="submit-btn" type="submit" (click)='onCancel()'>Acknowledge</ion-button>
    </div>
    <div *ngIf="getcmdchecklistcomplete() && this.commander != this.database.current.user.email">
      <ion-button (click)='onCancel()'>Cancel</ion-button>
      <ion-button style="padding-right:10px" routerLink="/add-drive" class="submit-btn" type="submit">Continue</ion-button>
    </div>
    <div *ngIf="!mtracForm.get('drivermtrac').value">
      <ion-button (click)='onCancel()'>Cancel</ion-button>
    </div>
  </div>

  </form>

</ion-content>