{"version":3,"sources":["./src/app/pages/history/history.page.html","./src/app/pages/history/history.module.ts","./src/app/pages/history/history.page.scss","./src/app/pages/history/history.page.ts"],"names":[],"mappings":"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","file":"pages-history-history-module-es2015.js","sourcesContent":["export default \"<ion-header >\\n  <ion-toolbar>\\n    <ion-title>History</ion-title>\\n    <ion-buttons slot=\\\"primary\\\">\\n      <ion-button left routerLink=\\\"/\\\" routerDirection=\\\"root\\\" fill=\\\"clear\\\" slot=\\\"primary\\\">\\n        Logout<ion-icon name=\\\"log-out\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-card>\\n  <ion-list>\\n    <ion-item>\\n      <ion-label position=\\\"stacked\\\">Vehicle Type</ion-label>\\n      <ion-select id=\\\"vehitype\\\" interface=\\\"popover\\\" value=\\\"ALL\\\">\\n        <ion-select-option value=\\\"ALL\\\">ALL</ion-select-option>\\n        <ion-select-option *ngFor =\\\"let vehicle of database.current.stats.most_recent_drive_by_vehicle_type | keyvalue\\\" value={{vehicle.key}} class=\\\"custom-font-size\\\">{{vehicle.key}}</ion-select-option>\\n      </ion-select>\\n    </ion-item>\\n  </ion-list>\\n</ion-card>\\n\\n<ion-content>\\n\\n  <!-- Month/date Selector (Sticky header) -->\\n\\n  <ion-item-divider sticky>\\n    <ion-grid>\\n      <ion-row class=\\\"vertical-align-content\\\">\\n        <ion-col no-padding text-center size=3>\\n            <ion-button size=\\\"small\\\" (click)=\\\"incrementFilterPeriod(-1)\\\"><ion-icon name=\\\"return-left\\\"></ion-icon></ion-button>\\n        </ion-col>\\n\\n        <ion-col no-padding text-center>\\n          <h4>{{getFilterPeriodString()}}</h4>\\n        </ion-col>\\n\\n        <ion-col no-padding text-center size=3>\\n            <ion-button size=\\\"small\\\" (click)=\\\"incrementFilterPeriod(+1)\\\"><ion-icon name=\\\"return-right\\\"></ion-icon></ion-button>\\n        </ion-col>\\n\\n      </ion-row>\\n    </ion-grid>\\n  </ion-item-divider>\\n\\n  <div style=\\\"display: block\\\">\\n    <canvas baseChart\\n                [data]=\\\"chartData\\\"\\n                [labels]=\\\"chartLabels\\\"\\n                [chartType]=\\\"chartType\\\"\\n                [colors]=\\\"chartColors\\\"\\n                (chartHover)=\\\"chartHovered($event)\\\"\\n                (chartClick)=\\\"chartClicked($event)\\\"></canvas>\\n  </div>\\n\\n\\n\\n  <ion-card *ngFor=\\\"let trip of getDrives()\\\">\\n    <br>\\n    <app-drive-view expandHeight='150px' expandWidth='100px' [drive]=\\\"trip\\\"></app-drive-view>\\n  </ion-card>\\n\\n</ion-content>\\n<!--\\n    <ion-row >\\n      <ion-col align=\\\"center\\\">\\n      <ion-card >\\n    <ion-card-header>\\n      <ion-card-subtitle>\\n          <ion-item class=\\\"card\\\">\\n          <ion-label position=\\\"floating\\\"></ion-label>\\n          <ion-input disabled type=\\\"date\\\" name=\\\"text_drivedate\\\" color=\\\"success\\\">  </ion-input>\\n            </ion-item>\\n        </ion-card-subtitle>\\n      <ion-card-title>\\n        <ion-item class=\\\"card\\\" >\\n          <ion-label color=\\\"success\\\" position=\\\"floating\\\">VehicleType</ion-label>\\n          <ion-input color=\\\"success\\\" disabled type=\\\"number\\\" name=\\\"text_drivevehicletype\\\">  </ion-input>\\n            </ion-item>\\n    </ion-card-title>\\n    </ion-card-header>\\n  \\n    <ion-card-content>\\n      \\n      <ion-grid>\\n        <ion-row>\\n          <ion-col >\\n            <ion-item class=\\\"card\\\">\\n          <ion-label color=\\\"success\\\" position=\\\"floating\\\">Total Time Driven</ion-label>\\n          <ion-input disabled type=\\\"number\\\" name=\\\"text_driveduration\\\" color=\\\"success\\\">  </ion-input>\\n            </ion-item>\\n          </ion-col>\\n          <ion-col>\\n            <ion-item class=\\\"card\\\">\\n          <ion-label color=\\\"success\\\" position=\\\"floating\\\">Total Mileage</ion-label>\\n          <ion-input disabled type=\\\"number\\\" name=\\\"text_drivemileage\\\" color=\\\"success\\\">  </ion-input>\\n            </ion-item>\\n          </ion-col>\\n        </ion-row>\\n      </ion-grid>\\n\\n    </ion-card-content>\\n  </ion-card>\\n\\n      </ion-col>\\n    </ion-row>\\n-->\\n\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { HistoryPage } from './history.page';\nimport { DriveViewModule } from '../../drive-view/drive-view.module';\nimport { ChartsModule } from 'ng2-charts';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HistoryPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\nDriveViewModule,\nChartsModule\n  ],\n  declarations: [HistoryPage\n  ]\n})\nexport class HistoryPageModule {}\n","export default \".vertical-align-content > * {\\n  display: -webkit-box !important;\\n  display: flex !important;\\n  align-content: center !important;\\n  -webkit-box-align: center !important;\\n          align-items: center !important;\\n  -webkit-box-pack: center !important;\\n          justify-content: center !important;\\n}\\n\\n.custom-font-size {\\n  font-size: 0.8em;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sZXdpc3RoYW0vR2l0SHViL0VuZ2luZWVyc0xvZ2Jvb2syL3NyYy9hcHAvcGFnZXMvaGlzdG9yeS9oaXN0b3J5LnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvaGlzdG9yeS9oaXN0b3J5LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVLLCtCQUFBO0VBQUEsd0JBQUE7RUFDQSxnQ0FBQTtFQUNBLG9DQUFBO1VBQUEsOEJBQUE7RUFDQSxtQ0FBQTtVQUFBLGtDQUFBO0FDQUw7O0FERUE7RUFDSSxnQkFBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvaGlzdG9yeS9oaXN0b3J5LnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi52ZXJ0aWNhbC1hbGlnbi1jb250ZW50ID4gKlxue1xuICAgICBkaXNwbGF5OiBmbGV4IWltcG9ydGFudDtcbiAgICAgYWxpZ24tY29udGVudDogY2VudGVyIWltcG9ydGFudDtcbiAgICAgYWxpZ24taXRlbXM6IGNlbnRlciFpbXBvcnRhbnQ7ICAvLyB2ZXJ0aWNhbCBhbGlnbm1lbnRcbiAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXIgIWltcG9ydGFudDsgIC8vIGhvcml6b250YWwgYWxpZ25tZW50XG59XG4uY3VzdG9tLWZvbnQtc2l6ZSB7XG4gICAgZm9udC1zaXplOiAwLjhlbTtcbn0iLCIudmVydGljYWwtYWxpZ24tY29udGVudCA+ICoge1xuICBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7XG4gIGFsaWduLWNvbnRlbnQ6IGNlbnRlciAhaW1wb3J0YW50O1xuICBhbGlnbi1pdGVtczogY2VudGVyICFpbXBvcnRhbnQ7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyICFpbXBvcnRhbnQ7XG59XG5cbi5jdXN0b20tZm9udC1zaXplIHtcbiAgZm9udC1zaXplOiAwLjhlbTtcbn0iXX0= */\"","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\nimport { DatabaseService, Drive, VehicleTypes } from '../../services/database.service';\nimport * as dayjs from 'dayjs'; // DateTime utility, See http://zetcode.com/javascript/dayjs/\nimport { Chart } from \"chart.js\";\nimport { PipesModule } from '../../pipes/pipes.module';\nimport 'chartjs-plugin-labels';\nimport 'chartjs-chart-radial-gauge';\nimport 'chartjs-tsgauge';\nimport {ChartsModule, Color} from 'ng2-charts';\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\n\n@Component({\n  selector: 'app-history',\n  templateUrl: './history.page.html',\n  styleUrls: ['./history.page.scss'],\n})\nexport class HistoryPage implements OnInit {\n\n  select_month: number = 0;\n  select_year: number = 0;\n  \n  constructor(\n    private database: DatabaseService,\n    private geolocation: Geolocation,\n  ) { }\n\n  ngOnInit() {\n    this.buildChart();\n    let watch = this.geolocation.watchPosition();\n    watch.subscribe((data) => {\n      if ( ( parseFloat(data.coords.latitude.toFixed(9)), parseFloat(data.coords.longitude.toFixed(9)) ) != (this.database.current.user.location.lat, this.database.current.user.location.lng) )\n      { this.database.current.user.location = {lat: parseFloat(data.coords.latitude.toFixed(9)),lng: parseFloat(data.coords.longitude.toFixed(9))};\n        console.log(this.database.current.user.location);\n        console.log(\"write\");\n        this.database.write('user', this.database.current.user.email, this.database.current.user);\n      }\n    });\n  }\n\n  public getDrives() : Drive[] {\n\n    var drives = this.database.current.drive_history;\n    var vtype = (<HTMLInputElement>document.getElementById(\"vehitype\")).value;\n    if (!this.select_month && !this.select_year) {\n      if (vtype != \"ALL\") {\n        return drives.filter( (drive) => drive.vehicle_type == vtype);\n      }\n      return drives\n    }\n    else {\n      if (vtype != \"ALL\") {\n        var  a = drives.filter( (drive) => drive.vehicle_type == vtype);\n        return a.filter( (drive) => {\n          var elem = drive.date.split(\"-\");\n          return (!this.select_year||parseInt(elem[0])==this.select_year)\n            && (!this.select_month||parseInt(elem[1])==this.select_month);\n        });\n      }\n      return drives.filter( (drive) => {\n        var elem = drive.date.split(\"-\");\n        return (!this.select_year||parseInt(elem[0])==this.select_year)\n          && (!this.select_month||parseInt(elem[1])==this.select_month);\n      });\n    }\n  }\n\n  /*public getDrives() : Drive[] {\n\n    var drives = this.database.current.drive_history;\n\n    if (!this.select_month && !this.select_year) return drives; // No filter\n\n    return drives.filter( (drive) => {\n      var elem = drive.date.split(\"-\");\n      return (!this.select_year||parseInt(elem[0])==this.select_year) \n        && (!this.select_month||parseInt(elem[1])==this.select_month);\n    });\n  }*/\n  \n  public getFilterPeriodString(): string {\n    if (this.select_month==0 || this.select_year==0) {\n      return \"All\";\n    } else {\n      const dt = dayjs(new Date(this.select_year, this.select_month-1, 1));  // months in dayjs, Jan=0\n      return dt.format(\"MMMM, YYYY\");\n    }\n  }\n  \n  public incrementFilterPeriod(delta: number) {\n\n    const today = dayjs();\n\n    var changed: boolean = true;\n    \n    if (delta==-1) {\n      if (!this.select_month || !this.select_year) {\n        // Current month/year\n        this.select_month = today.month()+1;\n        this.select_year = today.year();\n      } else {\n        this.select_month--;\n        if (this.select_month==0) { \n          // Roll back to previous year\n          this.select_year--; \n          this.select_month = 12;\n        }\n      }\n    } else {\n      if (!this.select_month || !this.select_year) {\n        // Can't increment\n        changed = false;\n      } else {\n        // When incrementing beyond current month/year, select \"all\"\n        if (this.select_year==today.year() && (this.select_month-1)==today.month()) {\n          this.select_year = this.select_month = 0;\n        } else {\n          this.select_month++;\n          if (this.select_month==13) { \n            // Roll over to next year\n            this.select_year++; \n            this.select_month = 1;\n          }\n        }\n      }\n    }\n    if (changed) this.buildChart();\n  }\n\n  // Build Doughnut chart of mileage per VehicleType\n  public chartLabels:string[] = VehicleTypes;\n  public chartData:number[] = [ 0,0,0,0 ];\n  public chartType:string = 'doughnut';\n  public chartColors:any[] = [{backgroundColor: [\n            \"rgba(255,99,132,1)\",\n            \"rgba(54, 162, 235, 1)\",\n            \"rgba(255, 206, 86, 1)\",\n            \"rgba(75, 192, 192, 1)\",\n            \"rgba(153, 102, 255, 1)\",]}];\n\n  private buildChart(): void {\n\n    var count:number[] = Array(VehicleTypes.length).fill(0)\n    \n    this.getDrives().map( (trip) => {\n      var valid_type = false;\n      for (let i=0; i<VehicleTypes.length; i++) {\n        if (trip.vehicle_type === VehicleTypes[i]) {\n          count[i] += this.database.distance(trip);\n          valid_type = true;\n        }\n      }\n      if (!valid_type) { console.log(`### Error: Invalid vehicle type: ${trip.vehicle_type} in ${trip.id}`); }\n    });\n    \n    //console.log(`>buildChart() = ${count}`);\n    this.chartData = count;\n  }\n  \n  public chartClicked(e:any):void {\n    //console.log(e);\n  }\n  public chartHovered(e:any):void {\n    //console.log(e);\n  }\n}\n"],"sourceRoot":"webpack:///"}