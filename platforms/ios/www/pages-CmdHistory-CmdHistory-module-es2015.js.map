{"version":3,"sources":["./src/app/pages/CmdHistory/CmdHistory.page.html","./src/app/pages/CmdHistory/CmdHistory.module.ts","./src/app/pages/CmdHistory/CmdHistory.page.scss","./src/app/pages/CmdHistory/CmdHistory.page.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,mwBAAosB,cAAc,8BAA8B,cAAc,maAAma,aAAa,8BAA8B,aAAa,qgBAAqgB,yBAAyB,uyE;;;;;;;;;;;;;;;;;;;;;;;;ACA7tD;AACM;AACF;AACU;AAEV;AAEM;AACkB;AAC3B;AAE1C,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,+DAAc;KAC1B;CACF,CAAC;AAcF,IAAa,oBAAoB,GAAjC,MAAa,oBAAoB;CAAG;AAAvB,oBAAoB;IAZhC,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;YAC7B,6EAAe;YACf,uDAAY;SACb;QACD,YAAY,EAAE,CAAC,+DAAc;SAC5B;KACF,CAAC;GACW,oBAAoB,CAAG;AAAH;;;;;;;;;;;;;AC9BjC;AAAe,6FAA8B,oCAAoC,6BAA6B,qCAAqC,yCAAyC,2CAA2C,wCAAwC,+CAA+C,GAAG,wBAAwB,gBAAgB,oBAAoB,GAAG,uBAAuB,qBAAqB,GAAG,6CAA6C,m2C;;;;;;;;;;;;;;;;;;;;;ACA1a;AACqC;AACxD,CAAC,8DAA8D;AAClC;AAO5D,IAAa,cAAc,GAA3B,MAAa,cAAc;IAKzB,YACU,QAAyB,EACzB,WAAwB;QADxB,aAAQ,GAAR,QAAQ,CAAiB;QACzB,gBAAW,GAAX,WAAW,CAAa;QALlC,iBAAY,GAAW,CAAC,CAAC;QACzB,gBAAW,GAAW,CAAC,CAAC;QAmJxB,kDAAkD;QAC3C,gBAAW,GAAY,uEAAY,CAAC;QACpC,cAAS,GAAY,CAAE,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAE,CAAC;QACjC,cAAS,GAAU,UAAU,CAAC;QAC9B,gBAAW,GAAS,CAAC,EAAC,eAAe,EAAE;oBACpC,oBAAoB;oBACpB,uBAAuB;oBACvB,uBAAuB;oBACvB,uBAAuB;oBACvB,wBAAwB;iBAAE,EAAC,CAAC,CAAC;IAvJnC,CAAC;IAEL,QAAQ;QACN,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE,CAAC;QAC7C,KAAK,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,EAAE;YACvB,IAAK,CAAE,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EACxL;gBAAE,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,GAAG,EAAC,GAAG,EAAE,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAC,GAAG,EAAE,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAC,CAAC;gBAC3I,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBACjD,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;gBACrB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;aAC3F;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAEM,SAAS;QAEd,IAAI,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,aAAa,CAAC;QACjD,IAAI,KAAK,GAAsB,QAAQ,CAAC,cAAc,CAAC,UAAU,CAAE,CAAC,KAAK,CAAC;QAC1E,IAAI,IAAI,GAAsB,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAE,CAAC,KAAK,CAAC;QACrE,UAAU;QACV,4BAA4B;QAC5B,8BAA8B;QAC9B,8BAA8B;QAC9B,gCAAgC;QAChC,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YAC3C,4BAA4B;YAC5B,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,EAAE;gBACnC,IAAI,CAAC,GAAG,MAAM,CAAC,MAAM,CAAE,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,YAAY,IAAI,KAAK,CAAC,CAAC;gBAC/D,OAAO,CAAC,CAAC,MAAM,CAAE,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC;aACnD;YACD,8BAA8B;iBACzB,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,EAAE;gBACxC,OAAO,MAAM,CAAC,MAAM,CAAE,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC;aACxD;YACD,8BAA8B;iBACzB,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,EAAE;gBACxC,OAAO,MAAM,CAAC,MAAM,CAAE,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,YAAY,IAAI,KAAK,CAAC,CAAC;aAC/D;YACD,gCAAgC;YAChC,OAAO,MAAM;SACd;aACI;YACH,4BAA4B;YAC5B,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,EAAE;gBACnC,IAAI,CAAC,GAAE,MAAM,CAAC,MAAM,CAAE,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,YAAY,IAAI,KAAK,CAAC,CAAC;gBAC9D,IAAI,CAAC,GAAE,CAAC,CAAC,MAAM,CAAE,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC;gBAClD,OAAO,CAAC,CAAC,MAAM,CAAE,CAAC,KAAK,EAAE,EAAE;oBACzB,IAAI,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBACjC,OAAO,CAAC,CAAC,IAAI,CAAC,WAAW,IAAE,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAE,IAAI,CAAC,WAAW,CAAC;2BAC1D,CAAC,CAAC,IAAI,CAAC,YAAY,IAAE,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAE,IAAI,CAAC,YAAY,CAAC,CAAC;gBAClE,CAAC,CAAC,CAAC;aACJ;YACD,8BAA8B;iBACzB,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,EAAE;gBACxC,IAAI,CAAC,GAAE,MAAM,CAAC,MAAM,CAAE,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC;gBACvD,OAAO,CAAC,CAAC,MAAM,CAAE,CAAC,KAAK,EAAE,EAAE;oBACzB,IAAI,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBACjC,OAAO,CAAC,CAAC,IAAI,CAAC,WAAW,IAAE,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAE,IAAI,CAAC,WAAW,CAAC;2BAC1D,CAAC,CAAC,IAAI,CAAC,YAAY,IAAE,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAE,IAAI,CAAC,YAAY,CAAC,CAAC;gBAClE,CAAC,CAAC,CAAC;aACJ;YACD,8BAA8B;iBACzB,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,EAAE;gBACxC,IAAI,CAAC,GAAE,MAAM,CAAC,MAAM,CAAE,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,YAAY,IAAI,KAAK,CAAC,CAAC;gBAC9D,OAAO,CAAC,CAAC,MAAM,CAAE,CAAC,KAAK,EAAE,EAAE;oBACzB,IAAI,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBACjC,OAAO,CAAC,CAAC,IAAI,CAAC,WAAW,IAAE,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAE,IAAI,CAAC,WAAW,CAAC;2BAC1D,CAAC,CAAC,IAAI,CAAC,YAAY,IAAE,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAE,IAAI,CAAC,YAAY,CAAC,CAAC;gBAClE,CAAC,CAAC,CAAC;aACJ;YACD,gCAAgC;YAChC,OAAO,MAAM,CAAC,MAAM,CAAE,CAAC,KAAK,EAAE,EAAE;gBAC9B,IAAI,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBACjC,OAAO,CAAC,CAAC,IAAI,CAAC,WAAW,IAAE,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAE,IAAI,CAAC,WAAW,CAAC;uBAC1D,CAAC,CAAC,IAAI,CAAC,YAAY,IAAE,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAE,IAAI,CAAC,YAAY,CAAC,CAAC;YAClE,CAAC,CAAC,CAAC;SACJ;IACH,CAAC;IAED;;;;;;;;;;;OAWG;IAEI,qBAAqB;QAC1B,IAAI,IAAI,CAAC,YAAY,IAAE,CAAC,IAAI,IAAI,CAAC,WAAW,IAAE,CAAC,EAAE;YAC/C,OAAO,KAAK,CAAC;SACd;aAAM;YACL,MAAM,EAAE,GAAG,kCAAK,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,GAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAE,yBAAyB;YAChG,OAAO,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;SAChC;IACH,CAAC;IAEM,qBAAqB,CAAC,KAAa;QAExC,MAAM,KAAK,GAAG,kCAAK,EAAE,CAAC;QAEtB,IAAI,OAAO,GAAY,IAAI,CAAC;QAE5B,IAAI,KAAK,IAAE,CAAC,CAAC,EAAE;YACb,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;gBAC3C,qBAAqB;gBACrB,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC,KAAK,EAAE,GAAC,CAAC,CAAC;gBACpC,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,IAAI,EAAE,CAAC;aACjC;iBAAM;gBACL,IAAI,CAAC,YAAY,EAAE,CAAC;gBACpB,IAAI,IAAI,CAAC,YAAY,IAAE,CAAC,EAAE;oBACxB,6BAA6B;oBAC7B,IAAI,CAAC,WAAW,EAAE,CAAC;oBACnB,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;iBACxB;aACF;SACF;aAAM;YACL,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;gBAC3C,kBAAkB;gBAClB,OAAO,GAAG,KAAK,CAAC;aACjB;iBAAM;gBACL,4DAA4D;gBAC5D,IAAI,IAAI,CAAC,WAAW,IAAE,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,YAAY,GAAC,CAAC,CAAC,IAAE,KAAK,CAAC,KAAK,EAAE,EAAE;oBAC1E,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;iBAC1C;qBAAM;oBACL,IAAI,CAAC,YAAY,EAAE,CAAC;oBACpB,IAAI,IAAI,CAAC,YAAY,IAAE,EAAE,EAAE;wBACzB,yBAAyB;wBACzB,IAAI,CAAC,WAAW,EAAE,CAAC;wBACnB,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;qBACvB;iBACF;aACF;SACF;QACD,IAAI,OAAO;YAAE,IAAI,CAAC,UAAU,EAAE,CAAC;IACjC,CAAC;IAaO,UAAU;QAEhB,IAAI,KAAK,GAAY,KAAK,CAAC,uEAAY,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;QAEvD,IAAI,CAAC,SAAS,EAAE,CAAC,GAAG,CAAE,CAAC,IAAI,EAAE,EAAE;YAC7B,IAAI,UAAU,GAAG,KAAK,CAAC;YACvB,KAAK,IAAI,CAAC,GAAC,CAAC,EAAE,CAAC,GAAC,uEAAY,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACxC,IAAI,IAAI,CAAC,YAAY,KAAK,uEAAY,CAAC,CAAC,CAAC,EAAE;oBACzC,KAAK,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;oBACzC,UAAU,GAAG,IAAI,CAAC;iBACnB;aACF;YACD,IAAI,CAAC,UAAU,EAAE;gBAAE,OAAO,CAAC,GAAG,CAAC,oCAAoC,IAAI,CAAC,YAAY,OAAO,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC;aAAE;QAC1G,CAAC,CAAC,CAAC;QAEH,0CAA0C;QAC1C,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;IACzB,CAAC;IAEM,YAAY,CAAC,CAAK;QACvB,iBAAiB;IACnB,CAAC;IACM,YAAY,CAAC,CAAK;QACvB,iBAAiB;IACnB,CAAC;CAEF;;YArLqB,0EAAe;YACZ,yEAAW;;AAPvB,cAAc;IAL1B,+DAAS,CAAC;QACT,QAAQ,EAAE,iBAAiB;QAC3B,8NAAqC;;KAEtC,CAAC;2EAOoB,0EAAe;QACZ,yEAAW;GAPvB,cAAc,CA2L1B;AA3L0B","file":"pages-CmdHistory-CmdHistory-module-es2015.js","sourcesContent":["export default \"<ion-header >\\n  <ion-toolbar>\\n    <ion-title>History</ion-title>\\n    <ion-buttons slot=\\\"primary\\\">\\n      <ion-button left routerLink=\\\"/\\\" routerDirection=\\\"root\\\" fill=\\\"clear\\\" slot=\\\"primary\\\">\\n        Logout<ion-icon name=\\\"log-out\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-card>\\n  <ion-list>\\n    <ion-item>\\n      <ion-label position=\\\"stacked\\\">Driver</ion-label>\\n      <ion-select id=\\\"drvr\\\" interface=\\\"popover\\\" value=\\\"ALL\\\" class=\\\"full-width-select\\\">\\n        <ion-select-option value=\\\"ALL\\\">ALL</ion-select-option>\\n        <ion-select-option text-wrap *ngFor=\\\"let driver of database.current.all_drivers_of_commander\\\" value={{driver.email}} class=\\\"custom-font-size\\\">{{driver.email}}</ion-select-option>\\n      </ion-select>\\n      <ion-label position=\\\"stacked\\\">Vehicle Type</ion-label>\\n        <ion-select id=\\\"vehitype\\\" interface=\\\"popover\\\" value=\\\"ALL\\\" class=\\\"full-width-select\\\">\\n          <ion-select-option value=\\\"ALL\\\">ALL</ion-select-option>\\n          <ion-select-option text-wrap *ngFor =\\\"let vehicle of database.current.stats.most_recent_drive_by_vehicle_type | keyvalue\\\" value={{vehicle.key}} class=\\\"custom-font-size\\\">{{vehicle.key}}</ion-select-option>\\n        </ion-select>\\n    </ion-item>\\n  </ion-list>\\n</ion-card>\\n\\n<ion-content>\\n\\n  <!-- Month/date Selector (Sticky header) -->\\n\\n  <ion-item-divider sticky>\\n    <ion-grid>\\n      <ion-row class=\\\"vertical-align-content\\\">\\n        <ion-col no-padding text-center size=3>\\n            <ion-button size=\\\"small\\\" (click)=\\\"incrementFilterPeriod(-1)\\\"><ion-icon name=\\\"return-left\\\"></ion-icon></ion-button>\\n        </ion-col>\\n\\n        <ion-col no-padding text-center>\\n          <h4>{{getFilterPeriodString()}}</h4>\\n        </ion-col>\\n\\n        <ion-col no-padding text-center size=3>\\n            <ion-button size=\\\"small\\\" (click)=\\\"incrementFilterPeriod(+1)\\\"><ion-icon name=\\\"return-right\\\"></ion-icon></ion-button>\\n        </ion-col>\\n\\n      </ion-row>\\n    </ion-grid>\\n  </ion-item-divider>\\n\\n  <div style=\\\"display: block\\\">\\n    <canvas baseChart\\n                [data]=\\\"chartData\\\"\\n                [labels]=\\\"chartLabels\\\"\\n                [chartType]=\\\"chartType\\\"\\n                [colors]=\\\"chartColors\\\"\\n                (chartHover)=\\\"chartHovered($event)\\\"\\n                (chartClick)=\\\"chartClicked($event)\\\"></canvas>\\n  </div>\\n\\n  <ion-card *ngFor=\\\"let trip of getDrives()\\\">\\n    <br>\\n    <app-drive-view expandHeight='150px' expandWidth='100px' [drive]=\\\"trip\\\"></app-drive-view>\\n  </ion-card>\\n\\n<!--\\n    <ion-row >\\n      <ion-col align=\\\"center\\\">\\n      <ion-card >\\n    <ion-card-header>\\n      <ion-card-subtitle>\\n          <ion-item class=\\\"card\\\">\\n          <ion-label position=\\\"floating\\\"></ion-label>\\n          <ion-input disabled type=\\\"date\\\" name=\\\"text_drivedate\\\" color=\\\"success\\\">  </ion-input>\\n            </ion-item>\\n        </ion-card-subtitle>\\n      <ion-card-title>\\n        <ion-item class=\\\"card\\\" >\\n          <ion-label color=\\\"success\\\" position=\\\"floating\\\">VehicleType</ion-label>\\n          <ion-input color=\\\"success\\\" disabled type=\\\"number\\\" name=\\\"text_drivevehicletype\\\">  </ion-input>\\n            </ion-item>\\n    </ion-card-title>\\n    </ion-card-header>\\n\\n    <ion-card-content>\\n\\n      <ion-grid>\\n        <ion-row>\\n          <ion-col >\\n            <ion-item class=\\\"card\\\">\\n          <ion-label color=\\\"success\\\" position=\\\"floating\\\">Total Time Driven</ion-label>\\n          <ion-input disabled type=\\\"number\\\" name=\\\"text_driveduration\\\" color=\\\"success\\\">  </ion-input>\\n            </ion-item>\\n          </ion-col>\\n          <ion-col>\\n            <ion-item class=\\\"card\\\">\\n          <ion-label color=\\\"success\\\" position=\\\"floating\\\">Total Mileage</ion-label>\\n          <ion-input disabled type=\\\"number\\\" name=\\\"text_drivemileage\\\" color=\\\"success\\\">  </ion-input>\\n            </ion-item>\\n          </ion-col>\\n        </ion-row>\\n      </ion-grid>\\n\\n    </ion-card-content>\\n  </ion-card>\\n\\n      </ion-col>\\n    </ion-row>\\n-->\\n\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CmdHistoryPage } from './CmdHistory.page';\nimport { DriveViewModule } from '../../drive-view/drive-view.module';\nimport { ChartsModule } from 'ng2-charts';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CmdHistoryPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    DriveViewModule,\n    ChartsModule\n  ],\n  declarations: [CmdHistoryPage\n  ]\n})\nexport class CmdHistoryPageModule {}\n","export default \".vertical-align-content > * {\\n  display: -webkit-box !important;\\n  display: flex !important;\\n  align-content: center !important;\\n  -webkit-box-align: center !important;\\n          align-items: center !important;\\n  -webkit-box-pack: center !important;\\n          justify-content: center !important;\\n}\\n\\n.full-width-select {\\n  width: 100%;\\n  max-width: 100%;\\n}\\n\\n.custom-font-size {\\n  font-size: 0.8em;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tb2phdmUvRGVza3RvcC9FbmdpbmVlcnNMb2dib29rMi9zcmMvYXBwL3BhZ2VzL0NtZEhpc3RvcnkvQ21kSGlzdG9yeS5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL0NtZEhpc3RvcnkvQ21kSGlzdG9yeS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFSywrQkFBQTtFQUFBLHdCQUFBO0VBQ0EsZ0NBQUE7RUFDQSxvQ0FBQTtVQUFBLDhCQUFBO0VBQ0EsbUNBQUE7VUFBQSxrQ0FBQTtBQ0FMOztBREVBO0VBQ0UsV0FBQTtFQUNBLGVBQUE7QUNDRjs7QURDQTtFQUNJLGdCQUFBO0FDRUoiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9DbWRIaXN0b3J5L0NtZEhpc3RvcnkucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnZlcnRpY2FsLWFsaWduLWNvbnRlbnQgPiAqXG57XG4gICAgIGRpc3BsYXk6IGZsZXghaW1wb3J0YW50O1xuICAgICBhbGlnbi1jb250ZW50OiBjZW50ZXIhaW1wb3J0YW50O1xuICAgICBhbGlnbi1pdGVtczogY2VudGVyIWltcG9ydGFudDsgIC8vIHZlcnRpY2FsIGFsaWdubWVudFxuICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlciAhaW1wb3J0YW50OyAgLy8gaG9yaXpvbnRhbCBhbGlnbm1lbnRcbn1cbi5mdWxsLXdpZHRoLXNlbGVjdCB7XG4gIHdpZHRoOiAxMDAlO1xuICBtYXgtd2lkdGg6IDEwMCU7XG59XG4uY3VzdG9tLWZvbnQtc2l6ZSB7XG4gICAgZm9udC1zaXplOiAwLjhlbTtcbn0iLCIudmVydGljYWwtYWxpZ24tY29udGVudCA+ICoge1xuICBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7XG4gIGFsaWduLWNvbnRlbnQ6IGNlbnRlciAhaW1wb3J0YW50O1xuICBhbGlnbi1pdGVtczogY2VudGVyICFpbXBvcnRhbnQ7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyICFpbXBvcnRhbnQ7XG59XG5cbi5mdWxsLXdpZHRoLXNlbGVjdCB7XG4gIHdpZHRoOiAxMDAlO1xuICBtYXgtd2lkdGg6IDEwMCU7XG59XG5cbi5jdXN0b20tZm9udC1zaXplIHtcbiAgZm9udC1zaXplOiAwLjhlbTtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { DatabaseService, Drive, VehicleTypes } from '../../services/database.service';\nimport * as dayjs from 'dayjs'; // DateTime utility, See http://zetcode.com/javascript/dayjs/;\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\n\n@Component({\n  selector: 'app-cmd_history',\n  templateUrl: './CmdHistory.page.html',\n  styleUrls: ['./CmdHistory.page.scss'],\n})\nexport class CmdHistoryPage implements OnInit {\n\n  select_month: number = 0;\n  select_year: number = 0;\n\n  constructor(\n    private database: DatabaseService,\n    private geolocation: Geolocation,\n  ) { }\n\n  ngOnInit() {\n    this.buildChart();\n    let watch = this.geolocation.watchPosition();\n    watch.subscribe((data) => {\n      if ( ( parseFloat(data.coords.latitude.toFixed(9)), parseFloat(data.coords.longitude.toFixed(9)) ) != (this.database.current.user.location.lat, this.database.current.user.location.lng) )\n      { this.database.current.user.location = {lat: parseFloat(data.coords.latitude.toFixed(9)),lng: parseFloat(data.coords.longitude.toFixed(9))};\n        console.log(this.database.current.user.location);\n        console.log(\"write\");\n        this.database.write('user', this.database.current.user.email, this.database.current.user);\n      }\n    });\n  }\n\n  public getDrives() : Drive[] {\n\n    var drives = this.database.current.drive_history;\n    var vtype = (<HTMLInputElement>document.getElementById(\"vehitype\")).value;\n    var drvr = (<HTMLInputElement>document.getElementById(\"drvr\")).value;\n    // 4 cases\n    // if vtype = X and drvr = X\n    // if vtype = ALL and drvr = X\n    // if vtype = X and drvr = ALL\n    // if vtype = ALL and drvr = ALL\n    if (!this.select_month && !this.select_year) {\n      // if vtype = X and drvr = X\n      if (vtype != \"ALL\" && drvr != \"ALL\") {\n        var r = drives.filter( (drive) => drive.vehicle_type == vtype);\n        return r.filter( (drive) => drive.driver == drvr);\n      }\n      // if vtype = ALL and drvr = X\n      else if (vtype == \"ALL\" && drvr != \"ALL\") {\n        return drives.filter( (drive) => drive.driver == drvr);\n      }\n      // if vtype = X and drvr = ALL\n      else if (vtype != \"ALL\" && drvr == \"ALL\") {\n        return drives.filter( (drive) => drive.vehicle_type == vtype);\n      }\n      // if vtype = ALL and drvr = ALL\n      return drives\n    }\n    else {\n      // if vtype = X and drvr = X\n      if (vtype != \"ALL\" && drvr != \"ALL\") {\n        var r =drives.filter( (drive) => drive.vehicle_type == vtype);\n        var r =r.filter( (drive) => drive.driver == drvr);\n        return r.filter( (drive) => {\n          var elem = drive.date.split(\"-\");\n          return (!this.select_year||parseInt(elem[0])==this.select_year)\n            && (!this.select_month||parseInt(elem[1])==this.select_month);\n        });\n      }\n      // if vtype = ALL and drvr = X\n      else if (vtype == \"ALL\" && drvr != \"ALL\") {\n        var r =drives.filter( (drive) => drive.driver == drvr);\n        return r.filter( (drive) => {\n          var elem = drive.date.split(\"-\");\n          return (!this.select_year||parseInt(elem[0])==this.select_year)\n            && (!this.select_month||parseInt(elem[1])==this.select_month);\n        });\n      }\n      // if vtype = X and drvr = ALL\n      else if (vtype != \"ALL\" && drvr == \"ALL\") {\n        var r =drives.filter( (drive) => drive.vehicle_type == vtype);\n        return r.filter( (drive) => {\n          var elem = drive.date.split(\"-\");\n          return (!this.select_year||parseInt(elem[0])==this.select_year)\n            && (!this.select_month||parseInt(elem[1])==this.select_month);\n        });\n      }\n      // if vtype = ALL and drvr = ALL\n      return drives.filter( (drive) => {\n        var elem = drive.date.split(\"-\");\n        return (!this.select_year||parseInt(elem[0])==this.select_year)\n          && (!this.select_month||parseInt(elem[1])==this.select_month);\n      });\n    }\n  }\n\n  /*public getDrives() : Drive[] {\n\n    var drives = this.database.current.drive_history;\n\n    if (!this.select_month && !this.select_year) return drives; // No filter\n\n    return drives.filter( (drive) => {\n      var elem = drive.date.split(\"-\");\n      return (!this.select_year||parseInt(elem[0])==this.select_year) \n        && (!this.select_month||parseInt(elem[1])==this.select_month);\n    });\n  }*/\n  \n  public getFilterPeriodString(): string {\n    if (this.select_month==0 || this.select_year==0) {\n      return \"All\";\n    } else {\n      const dt = dayjs(new Date(this.select_year, this.select_month-1, 1));  // months in dayjs, Jan=0\n      return dt.format(\"MMMM, YYYY\");\n    }\n  }\n  \n  public incrementFilterPeriod(delta: number) {\n\n    const today = dayjs();\n\n    var changed: boolean = true;\n    \n    if (delta==-1) {\n      if (!this.select_month || !this.select_year) {\n        // Current month/year\n        this.select_month = today.month()+1;\n        this.select_year = today.year();\n      } else {\n        this.select_month--;\n        if (this.select_month==0) { \n          // Roll back to previous year\n          this.select_year--; \n          this.select_month = 12;\n        }\n      }\n    } else {\n      if (!this.select_month || !this.select_year) {\n        // Can't increment\n        changed = false;\n      } else {\n        // When incrementing beyond current month/year, select \"all\"\n        if (this.select_year==today.year() && (this.select_month-1)==today.month()) {\n          this.select_year = this.select_month = 0;\n        } else {\n          this.select_month++;\n          if (this.select_month==13) { \n            // Roll over to next year\n            this.select_year++; \n            this.select_month = 1;\n          }\n        }\n      }\n    }\n    if (changed) this.buildChart();\n  }\n\n  // Build Doughnut chart of mileage per VehicleType\n  public chartLabels:string[] = VehicleTypes;\n  public chartData:number[] = [ 0,0,0,0 ];\n  public chartType:string = 'doughnut';\n  public chartColors:any[] = [{backgroundColor: [\n            \"rgba(255,99,132,1)\",\n            \"rgba(54, 162, 235, 1)\",\n            \"rgba(255, 206, 86, 1)\",\n            \"rgba(75, 192, 192, 1)\",\n            \"rgba(153, 102, 255, 1)\",]}];\n\n  private buildChart(): void {\n\n    var count:number[] = Array(VehicleTypes.length).fill(0)\n    \n    this.getDrives().map( (trip) => {\n      var valid_type = false;\n      for (let i=0; i<VehicleTypes.length; i++) {\n        if (trip.vehicle_type === VehicleTypes[i]) {\n          count[i] += this.database.distance(trip);\n          valid_type = true;\n        }\n      }\n      if (!valid_type) { console.log(`### Error: Invalid vehicle type: ${trip.vehicle_type} in ${trip.id}`); }\n    });\n    \n    //console.log(`>buildChart() = ${count}`);\n    this.chartData = count;\n  }\n  \n  public chartClicked(e:any):void {\n    //console.log(e);\n  }\n  public chartHovered(e:any):void {\n    //console.log(e);\n  }\n\n}\n"],"sourceRoot":"webpack:///"}