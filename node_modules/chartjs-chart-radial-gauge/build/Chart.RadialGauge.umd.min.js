!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("chart.js")):"function"==typeof define&&define.amd?define(["chart.js"],e):t.ChartjsRadialGauge=e(t.Chart)}(this,function(t){"use strict";var e="default"in t?t.default:t;t.elements.RoundedArc=t.elements.Arc.extend({draw:function(){var t=this._chart.ctx,e=this._view,r=e.startAngle,a=e.endAngle,n=(e.outerRadius-e.innerRadius)/2,o=(e.outerRadius+e.innerRadius)/2;t.translate(e.x,e.y),t.rotate(r);var i=a-r;t.beginPath(),e.roundedCorners&&t.arc(o,0,n,Math.PI,0),t.arc(0,0,e.outerRadius,0,i);var d=o*Math.cos(i),l=o*Math.sin(i);e.roundedCorners&&t.arc(d,l,n,i,i+Math.PI),t.arc(0,0,e.innerRadius,i,0,!0),t.closePath(),t.rotate(-r),t.translate(-e.x,-e.y),t.strokeStyle=e.borderColor,t.lineWidth=e.borderWidth,t.fillStyle=e.backgroundColor,t.fill(),t.lineJoin="bevel",e.borderWidth&&t.stroke()}}),t.elements.RoundedArc;var r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],a=!0,n=!1,o=void 0;try{for(var i,d=t[Symbol.iterator]();!(a=(i=d.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){n=!0,o=t}finally{try{!a&&d.return&&d.return()}finally{if(n)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=e.helpers;e.defaults._set("radialGauge",{animation:{animateRotate:!0,animateScale:!0},centerPercentage:80,rotation:-Math.PI/2,trackColor:"rgb(204, 221, 238)",roundedCorners:!0,centerArea:{displayText:!0,fontFamily:null,fontColor:null,fontSize:null,padding:4,backgroundImage:null,backgroundColor:null,text:null},hover:{mode:"single"},legend:{display:!1},domain:[0,100],tooltips:{callbacks:{title:function(){return""},label:function(t,e){var r=e.labels[t.index];return r+=": "+e.datasets[t.datasetIndex].data[t.index]}}}});var n,o=function(t){t.RadialGauge=function(e,r){return r.type="radialGauge",new t(e,r)}};return(n=e).controllers.radialGauge=n.DatasetController.extend({dataElementType:n.elements.RoundedArc,linkScales:a.noop,draw:function(){this.drawTrack(),this.drawCenterArea();for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];n.DatasetController.prototype.draw.apply(this,e)},drawTrack:function(){new n.elements.Arc({_view:{backgroundColor:this.chart.options.trackColor,borderColor:this.chart.options.trackColor,startAngle:0,endAngle:2*Math.PI,x:this.centerX,y:this.centerY,innerRadius:this.innerRadius,outerRadius:this.outerRadius,borderWidth:this.borderWidth},_chart:this.chart}).draw()},drawCenterArea:function(){var t=this.chart.ctx,e={ctx:t,value:Math.ceil(this.getMeta().data[0]._view.value),radius:this.innerRadius,options:this.chart.options.centerArea};t.save();try{if(t.translate(this.centerX,this.centerY),e.options.draw)return void e.options.draw(e);e.options.backgroundColor&&this.drawCenterBackground(e),e.options.backgroundImage&&this.drawCenterImage(e),e.options.displayText&&this.drawCenterText(e)}finally{t.restore()}},drawCenterBackground:function(t){var e=t.options,r=t.radius,a=t.ctx,n=r-e.padding;a.beginPath(),a.arc(0,0,n,0,2*Math.PI),a.closePath(),a.fillStyle=e.backgroundColor,a.fill()},drawCenterImage:function(t){var e=t.radius,r=t.options,a=t.ctx,n=e-r.padding;a.beginPath(),a.arc(0,0,n,0,2*Math.PI,!0),a.closePath(),a.clip(),a.drawImage(r.backgroundImage,-n,-n,2*n,2*n)},drawCenterText:function(t){var e=t.options,r=t.value,a=e.fontSize||(this.innerRadius/50).toFixed(2)+"em";"number"==typeof a&&(a+="px");var o=e.fontFamily||n.defaults.global.defaultFontFamily,i=e.fontColor||n.defaults.global.defaultFontColor,d="function"==typeof e.text?e.text(r,e):e.text;d=d||""+r,this.chart.ctx.font=a+" "+o,this.chart.ctx.fillStyle=i,this.chart.ctx.textBaseline="middle";var l=this.chart.ctx.measureText(d).width,s=Math.round(-l/2);l<2*this.innerRadius*.8&&this.chart.ctx.fillText(d,s,0)},update:function(t){var e=this,r=this.chart,n=r.chartArea,o=r.options,i=o.elements.arc,d=n.right-n.left-i.borderWidth,l=n.bottom-n.top-i.borderWidth,s=Math.min(d,l),u=this.getMeta(),c=o.centerPercentage;this.borderWidth=this.getMaxBorderWidth(u.data),this.outerRadius=Math.max((s-this.borderWidth)/2,0),this.innerRadius=Math.max(c?this.outerRadius/100*c:0,0),u.total=this.getMetricValue(),this.centerX=(n.left+n.right)/2,this.centerY=(n.top+n.bottom)/2,a.each(u.data,function(r,a){e.updateElement(r,a,t)})},updateElement:function(t,e,r){var n=this.chart,o=n.chartArea,i=n.options,d=i.animation,l=(o.left+o.right)/2,s=(o.top+o.bottom)/2,u=i.rotation,c=this.getDataset(),h=r&&d.animateRotate?0:this.calculateArcAngle(c.data[e]),f=r&&d.animateScale?0:this.getMetricValue(),g=u+h,b=this.innerRadius,m=this.outerRadius,p=a.valueAtIndexOrDefault;a.extend(t,{_datasetIndex:this.index,_index:e,_model:{x:l,y:s,startAngle:u,endAngle:g,outerRadius:m,innerRadius:b,label:p(c.label,e,n.data.labels[e]),roundedCorners:i.roundedCorners,value:f}});var x=t._model,v=t.custom||{},C=a.valueAtIndexOrDefault,y=this.chart.options.elements.arc;x.backgroundColor=v.backgroundColor?v.backgroundColor:C(c.backgroundColor,e,y.backgroundColor),x.borderColor=v.borderColor?v.borderColor:C(c.borderColor,e,y.borderColor),x.borderWidth=v.borderWidth?v.borderWidth:C(c.borderWidth,e,y.borderWidth),t.pivot()},getMetricValue:function(){var t=this.getDataset().data[0];return null==t&&(t=this.chart.options.domain[0]),t},getDomain:function(){return this.chart.options.domain},calculateArcAngle:function(){var t=this.getDomain(),e=r(t,2),a=e[0],n=e[1],o=this.getMetricValue(),i=n-a;return i>0?2*Math.PI*(Math.abs(o-a)/i):0},getMaxBorderWidth:function(t){for(var e=0,r=this.index,a=t.length,n=void 0,o=void 0,i=0;i<a;i++)n=t[i]._model?t[i]._model.borderWidth:0,e=(o=t[i]._chart?t[i]._chart.config.data.datasets[r].hoverBorderWidth:0)>(e=n>e?n:e)?o:e;return e}}),o(e),o});