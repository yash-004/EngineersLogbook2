{"version":3,"sources":["src/app/pages/CmdMap/CmdMap.page.html","src/app/pages/CmdMap/CmdMap.module.ts","src/app/pages/CmdMap/CmdMap.page.scss","src/app/pages/CmdMap/CmdMap.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-content padding>\\r\\n    <script src=\\\"https://maps.googleapis.com/maps/api/js?key=AIzaSyCZ71jPdOF6e02nQmca2WrbJw_QeXZBh5Q\\\"></script>\\r\\n    <div #map id=\\\"map\\\" style=\\\"height: 100%;width: 100%;overflow: auto;background-color: transparent;\\\"></div>\\r\\n</ion-content>\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { FormsModule, ReactiveFormsModule} from '@angular/forms';\r\nimport { RouterModule } from '@angular/router';\r\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\r\nimport { Device } from '@ionic-native/device/ngx';\r\nimport { CmdMapPage } from './CmdMap.page';\r\nimport { Component, OnInit, ElementRef, ViewChild } from '@angular/core';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ReactiveFormsModule,\r\n    RouterModule.forChild([\r\n      {\r\n        path: '',\r\n        component: CmdMapPage\r\n      }\r\n    ])\r\n  ],\r\n  declarations: [CmdMapPage]\r\n})\r\nexport class CmdMapPageModule {}\r\n","export default \".popup-bubble {\\n  /* Position the bubble centred-above its parent. */\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  -webkit-transform: translate(-50%, -100%);\\n          transform: translate(-50%, -100%);\\n  /* Style the bubble. */\\n  background-color: white;\\n  padding: 5px;\\n  border-radius: 5px;\\n  font-family: sans-serif;\\n  overflow-y: auto;\\n  max-height: 60px;\\n  box-shadow: 0px 2px 10px 1px rgba(0, 0, 0, 0.5); }\\n\\n/* The parent of the bubble. A zero-height div at the top of the tip. */\\n\\n.popup-bubble-anchor {\\n  /* Position the div a fixed distance above the tip. */\\n  position: absolute;\\n  width: 100%;\\n  bottom: 8px;\\n  left: 0; }\\n\\n/* This element draws the tip. */\\n\\n.popup-bubble-anchor::after {\\n  content: \\\"\\\";\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  /* Center the tip horizontally. */\\n  -webkit-transform: translate(-50%, 0);\\n          transform: translate(-50%, 0);\\n  /* The tip is a https://css-tricks.com/snippets/css/css-triangle/ */\\n  width: 0;\\n  height: 0;\\n  /* The tip is 8px high, and 12px wide. */\\n  border-left: 6px solid transparent;\\n  border-right: 6px solid transparent;\\n  border-top: 8px solid white; }\\n\\n/* JavaScript will position this div at the bottom of the popup tip. */\\n\\n.popup-container {\\n  cursor: auto;\\n  height: 0;\\n  position: absolute;\\n  /* The max width of the info window. */\\n  width: 200px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvQ21kTWFwL0M6XFxVc2Vyc1xcUnVpXFxBbmRyb2lkU3R1ZGlvUHJvamVjdHNcXEVuZ2luZWVyc0xvZ2Jvb2syL3NyY1xcYXBwXFxwYWdlc1xcQ21kTWFwXFxDbWRNYXAucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ1Esa0RBQUE7RUFDQSxrQkFBa0I7RUFDbEIsTUFBTTtFQUNOLE9BQU87RUFDUCx5Q0FBaUM7VUFBakMsaUNBQWlDO0VBQ2pDLHNCQUFBO0VBQ0EsdUJBQXVCO0VBQ3ZCLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsdUJBQXVCO0VBQ3ZCLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIsK0NBQTRDLEVBQUE7O0FBRTlDLHVFQUFBOztBQUNOO0VBQ1EscURBQUE7RUFDQSxrQkFBa0I7RUFDbEIsV0FBVztFQUNYLFdBQTZCO0VBQzdCLE9BQU8sRUFBQTs7QUFFVCxnQ0FBQTs7QUFDTjtFQUNRLFdBQVc7RUFDWCxrQkFBa0I7RUFDbEIsTUFBTTtFQUNOLE9BQU87RUFDUCxpQ0FBQTtFQUNBLHFDQUE2QjtVQUE3Qiw2QkFBNkI7RUFDN0IsbUVBQUE7RUFDQSxRQUFRO0VBQ1IsU0FBUztFQUNULHdDQUFBO0VBQ0Esa0NBQWtDO0VBQ2xDLG1DQUFtQztFQUNuQywyQkFBNkMsRUFBQTs7QUFFL0Msc0VBQUE7O0FBQ047RUFDUSxZQUFZO0VBQ1osU0FBUztFQUNULGtCQUFrQjtFQUNsQixzQ0FBQTtFQUNBLFlBQVksRUFBQSIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL0NtZE1hcC9DbWRNYXAucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnBvcHVwLWJ1YmJsZSB7XHJcbiAgICAgICAgLyogUG9zaXRpb24gdGhlIGJ1YmJsZSBjZW50cmVkLWFib3ZlIGl0cyBwYXJlbnQuICovXHJcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgIHRvcDogMDtcclxuICAgICAgICBsZWZ0OiAwO1xyXG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC0xMDAlKTtcclxuICAgICAgICAvKiBTdHlsZSB0aGUgYnViYmxlLiAqL1xyXG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gICAgICAgIHBhZGRpbmc6IDVweDtcclxuICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICAgICAgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7XHJcbiAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcclxuICAgICAgICBtYXgtaGVpZ2h0OiA2MHB4O1xyXG4gICAgICAgIGJveC1zaGFkb3c6IDBweCAycHggMTBweCAxcHggcmdiYSgwLDAsMCwwLjUpO1xyXG59XHJcbiAgICAgIC8qIFRoZSBwYXJlbnQgb2YgdGhlIGJ1YmJsZS4gQSB6ZXJvLWhlaWdodCBkaXYgYXQgdGhlIHRvcCBvZiB0aGUgdGlwLiAqL1xyXG4ucG9wdXAtYnViYmxlLWFuY2hvciB7XHJcbiAgICAgICAgLyogUG9zaXRpb24gdGhlIGRpdiBhIGZpeGVkIGRpc3RhbmNlIGFib3ZlIHRoZSB0aXAuICovXHJcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgIGJvdHRvbTogLyogVElQX0hFSUdIVD0gKi8gOHB4O1xyXG4gICAgICAgIGxlZnQ6IDA7XHJcbn1cclxuICAgICAgLyogVGhpcyBlbGVtZW50IGRyYXdzIHRoZSB0aXAuICovXHJcbi5wb3B1cC1idWJibGUtYW5jaG9yOjphZnRlciB7XHJcbiAgICAgICAgY29udGVudDogXCJcIjtcclxuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgdG9wOiAwO1xyXG4gICAgICAgIGxlZnQ6IDA7XHJcbiAgICAgICAgLyogQ2VudGVyIHRoZSB0aXAgaG9yaXpvbnRhbGx5LiAqL1xyXG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIDApO1xyXG4gICAgICAgIC8qIFRoZSB0aXAgaXMgYSBodHRwczovL2Nzcy10cmlja3MuY29tL3NuaXBwZXRzL2Nzcy9jc3MtdHJpYW5nbGUvICovXHJcbiAgICAgICAgd2lkdGg6IDA7XHJcbiAgICAgICAgaGVpZ2h0OiAwO1xyXG4gICAgICAgIC8qIFRoZSB0aXAgaXMgOHB4IGhpZ2gsIGFuZCAxMnB4IHdpZGUuICovXHJcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDZweCBzb2xpZCB0cmFuc3BhcmVudDtcclxuICAgICAgICBib3JkZXItcmlnaHQ6IDZweCBzb2xpZCB0cmFuc3BhcmVudDtcclxuICAgICAgICBib3JkZXItdG9wOiAvKiBUSVBfSEVJR0hUPSAqLyA4cHggc29saWQgd2hpdGU7XHJcbn1cclxuICAgICAgLyogSmF2YVNjcmlwdCB3aWxsIHBvc2l0aW9uIHRoaXMgZGl2IGF0IHRoZSBib3R0b20gb2YgdGhlIHBvcHVwIHRpcC4gKi9cclxuLnBvcHVwLWNvbnRhaW5lciB7XHJcbiAgICAgICAgY3Vyc29yOiBhdXRvO1xyXG4gICAgICAgIGhlaWdodDogMDtcclxuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgLyogVGhlIG1heCB3aWR0aCBvZiB0aGUgaW5mbyB3aW5kb3cuICovXHJcbiAgICAgICAgd2lkdGg6IDIwMHB4O1xyXG59XHJcbiJdfQ== */\"","import { Component, OnInit, ElementRef, ViewChild } from '@angular/core';\r\nimport { NavController } from '@ionic/angular';\r\nimport { Platform } from '@ionic/angular';\r\nimport { DatabaseService, User, Drive, VehicleTypes } from '../../services/database.service';\r\nimport { Chart } from \"chart.js\";\r\nimport { PipesModule } from '../../pipes/pipes.module';\r\nimport * as dayjs from 'dayjs';\r\nimport { ToastController } from '@ionic/angular';\r\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\r\nimport { Device } from '@ionic-native/device/ngx';\r\nimport * as firebase from 'firebase';\r\ndeclare var google: any;\r\n\r\n@Component({\r\n  selector: 'app-CmdMap',\r\n  templateUrl:'./CmdMap.page.html',\r\n  styleUrls: ['./CmdMap.page.scss'],\r\n})\r\n\r\nexport class CmdMapPage {\r\n\r\n  @ViewChild('map', {static: false}) mapElement: ElementRef;\r\n  map: any;\r\n  markers = [];\r\n  drvr: any;\r\n  ref = firebase.database().ref('geolocations/');\r\n  constructor(public navCtrl: NavController,\r\n    public platform: Platform,\r\n    private geolocation: Geolocation,\r\n    public database: DatabaseService,\r\n    private device: Device) {\r\n    platform.ready().then(() => {\r\n      this.initMap();\r\n    });\r\n    this.ref.on('value', resp => {\r\n      this.deleteMarkers();\r\n      snapshotToArray(resp).forEach(data => {\r\n          let image = 'assets/car.png';\r\n          let updatelocation = new google.maps.LatLng(this.database.current.user.location.lat, this.database.current.user.location.lng);\r\n          console.log(data.latitude,data.longitude);\r\n          console.log(this.database.current.user.location.lat, this.database.current.user.location.lng);\r\n          this.addMarker(updatelocation,image,this.database.current.user.name);\r\n          this.setMapOnAll(this.map);\r\n      });\r\n    });\r\n  }\r\n\r\n  initMap() {\r\n    console.log(this.database.current.user);\r\n    this.geolocation.getCurrentPosition({ maximumAge: 3000, timeout: 5000, enableHighAccuracy: true }).then((resp) => {\r\n    let mylocation = new google.maps.LatLng(parseFloat( resp.coords.latitude.toFixed(9)),parseFloat(resp.coords.longitude.toFixed(9)) );\r\n    if ( ( parseFloat(resp.coords.latitude.toFixed(9)), parseFloat(resp.coords.longitude.toFixed(9)) ) != (this.database.current.user.location.lat, this.database.current.user.location.lng) )\r\n    {\r\n      this.database.current.user.location = {lat: parseFloat(resp.coords.latitude.toFixed(9)),lng: parseFloat(resp.coords.longitude.toFixed(9))};\r\n      this.database.write('user', this.database.current.user.email, this.database.current.user);\r\n    }\r\n    this.map = new google.maps.Map(this.mapElement.nativeElement,\r\n    {\r\n        zoom: 15,\r\n        center: mylocation\r\n    });\r\n    });\r\n    let watch = this.geolocation.watchPosition();\r\n    watch.subscribe((data) => {\r\n      let updatelocation = new google.maps.LatLng(parseFloat(data.coords.latitude.toFixed(9)),parseFloat(data.coords.longitude.toFixed(9)));\r\n      if ( ( parseFloat(data.coords.latitude.toFixed(9)), parseFloat(data.coords.longitude.toFixed(9)) ) != (this.database.current.user.location.lat, this.database.current.user.location.lng) )\r\n      {\r\n        this.deleteMarkers();\r\n        let image = 'assets/car.png';\r\n        this.addMarker(updatelocation,image,this.database.current.user.name);\r\n        this.setMapOnAll(this.map);\r\n        this.map.panTo(updatelocation);\r\n        this.database.current.user.location = {lat: parseFloat(data.coords.latitude.toFixed(9)),lng: parseFloat(data.coords.longitude.toFixed(9))};\r\n        console.log(this.database.current.user.location);\r\n        console.log(\"write\");\r\n        this.database.write('user', this.database.current.user.email, this.database.current.user);\r\n      }\r\n      console.log(\"notmoved\");\r\n      this.deleteMarkers();\r\n      for (const driver of this.database.current.all_drivers_of_commander)\r\n        {\r\n          this.updatedriverloc(driver.email).then(result => { var drvrloc = new google.maps.LatLng(result.lat,result.lng);let image = 'assets/car.png';this.addMarker(drvrloc,image,driver.name); console.log(driver.email); console.log(result);});\r\n        }\r\n      let image = 'assets/car.png';\r\n      this.addMarker(updatelocation,image,this.database.current.user.name);\r\n      this.setMapOnAll(this.map);\r\n    });\r\n  }\r\n\r\n  async updatedriverloc(email: string) {\r\n    var result =  await this.database.read('user',email);\r\n    this.drvr = {\r\n      driver: result.data() as User,\r\n    };\r\n    return this.drvr.driver.location;\r\n  }\r\n\r\n  addMarker(location, image, name) {\r\n    let marker = new google.maps.Marker({\r\n      position: location,\r\n      map: this.map,\r\n      icon: image,\r\n      label: name\r\n    });\r\n    this.markers.push(marker);\r\n  }\r\n\r\n  setMapOnAll(map) {\r\n    for (var i = 0; i < this.markers.length; i++) {\r\n      this.markers[i].setMap(map);\r\n    }\r\n  }\r\n\r\n  clearMarkers() {\r\n    this.setMapOnAll(null);\r\n  }\r\n\r\n  deleteMarkers() {\r\n    this.clearMarkers();\r\n    this.markers = [];\r\n  }\r\n\r\n}\r\n\r\nexport const snapshotToArray = snapshot => {\r\n    let returnArr = [];\r\n\r\n    snapshot.forEach(childSnapshot => {\r\n        let item = childSnapshot.val();\r\n        item.key = childSnapshot.key;\r\n        returnArr.push(item);\r\n    });\r\n\r\n    return returnArr;\r\n};\r\n/*\r\n\r\nfor (var driver of this.database.current.all_drivers_of_commander){\r\n      var drvrloc = new google.maps.LatLng(driver.location.lat,driver.location.lng);\r\n      let image = 'assets/car.png';\r\n      this.addMarker(drvrloc,image,driver.name);\r\n      this.setMapOnAll(this.map);\r\nparseFloat(.toFixed(9))\r\n    }*/\r\n"],"sourceRoot":"webpack:///","file":"pages-CmdMap-CmdMap-module-es5.js"}