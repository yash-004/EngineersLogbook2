{"version":3,"sources":["./src/app/home/home.page.html","./src/app/home/home.module.ts","./src/app/home/home.page.scss","./src/app/home/home.page.ts","./src/app/services/anime.js","./src/app/services/messaging.service.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,wxBAAytB,sBAAsB,0rBAA0rB,sBAAsB,wGAAwG,cAAc,88BAA88B,SAAS,mXAAmX,QAAQ,mNAAmN,IAAI,8C;;;;;;;;;;;;;;;;;;;;;;ACApkG;AACM;AACF;AACoB;AAClB;AAER;AAiBvC,IAAa,cAAc,GAA3B,MAAa,cAAc;CAAG;AAAjB,cAAc;IAf1B,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,kEAAmB;YACnB,4DAAY,CAAC,QAAQ,CAAC;gBACpB;oBACE,IAAI,EAAE,EAAE;oBACR,SAAS,EAAE,mDAAQ;iBACpB;aACF,CAAC;SACH;QACD,YAAY,EAAE,CAAC,mDAAQ,CAAC;KACzB,CAAC;GACW,cAAc,CAAG;AAAH;;;;;;;;;;;;;ACvB3B;AAAe,6EAAc,yBAAyB,uBAAuB,uBAAuB,EAAE,0BAA0B,yBAAyB,EAAE,4BAA4B,gCAAgC,EAAE,gCAAgC,iBAAiB,uBAAuB,EAAE,+CAA+C,myC;;;;;;;;;;;;;;;;;;;;;;;;;;ACAxS;AACsC;AACd;AACS;AACZ;AACE;AACjE,2DAA2D;AACE;AACpB;AACI,CAAE,uBAAuB;AAOtE,IAAa,QAAQ,GAArB,MAAa,QAAQ;IAkBnB,YAEU,OAAsB,EACtB,WAAkC,EAClC,QAAyB,EACzB,SAA2B,EAC3B,WAAwB,EACxB,WAA8B,EAC9B,OAAgB;IACxB,8BAA8B;;QAPtB,YAAO,GAAP,OAAO,CAAe;QACtB,gBAAW,GAAX,WAAW,CAAuB;QAClC,aAAQ,GAAR,QAAQ,CAAiB;QACzB,cAAS,GAAT,SAAS,CAAkB;QAC3B,gBAAW,GAAX,WAAW,CAAa;QACxB,gBAAW,GAAX,WAAW,CAAmB;QAC9B,YAAO,GAAP,OAAO,CAAS;QAvB1B,iBAAY,GAAG,EAAE,CAAC;QAElB,uBAAkB,GAAG;YACnB,KAAK,EAAE;gBACL,EAAE,IAAI,EAAE,UAAU,EAAE,OAAO,EAAE,oBAAoB,EAAE;gBACnD,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,gBAAgB,EAAE;aAC/C;YAED,wDAAwD;YACxD,QAAQ,EAAE;gBACR,EAAE,IAAI,EAAE,UAAU,EAAE,OAAO,EAAE,uBAAuB,EAAE;gBACtD,EAAE,IAAI,EAAE,WAAW,EAAE,OAAO,EAAE,8CAA8C,EAAE;aAC/E;SACF,CAAC;QAkBK,mBAAc,GAAG,IAAI,CAAC;QACtB,qBAAgB,GAAG,KAAK,CAAC;QAL9B,iBAAiB;IACnB,CAAC;IAMD,QAAQ;QAEN,IAAI,CAAC,cAAc,GAAG,CAAC,qEAAW,CAAC,UAAU,CAAC,CAAE,SAAS;QAEzD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;YAC5C,KAAK,EAAE,IAAI,0DAAW,CAAC,EAAE,EAAE,yDAAU,CAAC,OAAO,CAAC;gBAC5C,yDAAU,CAAC,QAAQ;gBACnB,yDAAU,CAAC,OAAO,CAAC,iDAAiD,CAAC;aACtE,CAAC,CAAC;YAEH,QAAQ,EAAE,IAAI,0DAAW,CAAC,EAAE,EAAE,yDAAU,CAAC,OAAO,CAAC;gBAC/C,yDAAU,CAAC,SAAS,CAAC,CAAC,CAAC;gBACvB,yDAAU,CAAC,QAAQ;aACpB,CAAC,CAAC;SACJ,CAAC,CAAC;QAEH,6BAA6B;QAC7B,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;YACrC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACpD,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;YACxC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACvD,CAAC,CAAC,CAAC;QAEH,6DAA6D;QAC7D,0DAA0D;QAC1D,MAAM,MAAM,GAAO,QAAQ,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC;QAC1D,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,CAAC,EAAM,EAAE,EAAE;YAC9C,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;YAC1D,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;YACpC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YAC9C,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC,CAAC,4CAA4C;QAC7E,CAAC,CAAC,CAAC;IACL,CAAC;IAEK,SAAS,CAAC,KAAK;;YAEnB,OAAO,CAAC,GAAG,CAAC,uBAAuB,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC;YAElD,0BAA0B;YAC1B,IAAI,CAAC,OAAO,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;gBAC3C,OAAO,EAAE,mBAAmB;aAC7B,CAAC,CAAC;YACH,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;YAEvB,IAAI;gBAEF,oBAAoB;gBACpB,IAAI,GAAG,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;gBAClD,OAAO,CAAC,GAAG,CAAC,4CAA4C,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;gBAE1E,+CAA+C;gBAC/C,IAAI,CAAC,cAAc,CAAC,qBAAqB,CAAC,CAAC;gBAC3C,MAAM,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBACzC,OAAO,CAAC,GAAG,CAAC,4BAA4B,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;gBAE1D,qCAAqC;gBACrC,IAAI,CAAC,cAAc,CAAC,iCAAiC,CAAC,CAAC;gBACvD,MAAM,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBAE1C,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC;gBACtC,UAAU,CAAC,GAAG,EAAE,GAAE,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,EAAC,EAAC,IAAI,CAAC,CAAC;gBAEjD,sBAAsB;gBACtB,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,EAAE;oBAC3C,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,iBAAiB,CAAC,CAAC;iBACjD;qBAAM;oBACL,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,eAAe,CAAC,CAAC;iBAC/C;gBACD,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;gBAEvB,qCAAqC;gBACrC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC;gBACvC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,QAAQ,CAAC,CAAC;aAE9C;YAAC,OAAM,GAAG,EAAE;gBAEX,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;gBACvB,IAAI,CAAC,YAAY,GAAG,iBAAiB,GAAG,EAAE,CAAC;aAC5C;YACD,+BAA+B;QACjC,CAAC;KAAA;IAEO,cAAc,CAAC,IAAW;QAChC,MAAM,IAAI,GAAG,QAAQ,CAAC,aAAa,CACjC,yCAAyC,CAAC,CAAC;QAC7C,IAAI,IAAI;YAAE,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;IAClC,CAAC;IAEO,KAAK,CAAC,GAAG;QACf,IAAI,GAAG,KAAK,QAAQ,EAAE;YACpB,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;YAC7D,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;SACzD;QACD,IAAI,GAAG,KAAK,WAAW,EAAE;YACvB,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;YAC7D,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;SACzD;QAED;;;;;;;;;;;WAWG;IACL,CAAC;IACO,OAAO;QACb,kEAAkE;QAClE,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;QAC1C,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE,GAAG,EAAE;YAEnC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;YAC7C,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;YAEnC,2DAAc,CAAC,EAAC,IAAI,EAAE,KAAK,EAAC,CAAC;iBAC5B,GAAG,CAAC;gBACH,OAAO,EAAE,gBAAgB;gBACzB,OAAO,EAAE,CAAC,CAAC,EAAC,CAAC,CAAC;gBACd,QAAQ,EAAE,IAAI;gBACd,MAAM,EAAE,aAAa;aACtB,CAAC,CAAC,GAAG,CAAC;gBACL,OAAO,EAAE,QAAQ;gBACjB,OAAO,EAAE,CAAC,CAAC,EAAC,CAAC,CAAC;gBACd,UAAU,EAAE,CAAC,MAAM,EAAC,CAAC,CAAC;gBACtB,QAAQ,EAAE,GAAG;gBACb,MAAM,EAAE,aAAa;gBACrB,MAAM,EAAE,QAAQ;aACjB,CAAC,CAAC,GAAG,CAAC;gBACL,OAAO,EAAE,WAAW;gBACpB,OAAO,EAAE,CAAC,CAAC,EAAC,CAAC,CAAC;gBACd,UAAU,EAAE,CAAC,MAAM,EAAC,CAAC,CAAC;gBACtB,QAAQ,EAAE,GAAG;gBACb,MAAM,EAAE,aAAa;gBACrB,MAAM,EAAE,QAAQ;aACjB,CAAC,CAAC,GAAG,CAAC;gBACL,OAAO,EAAE,aAAa;gBACtB,OAAO,EAAE,CAAC,CAAC,EAAC,CAAC,CAAC;gBACd,UAAU,EAAE,CAAC,MAAM,EAAC,CAAC,CAAC;gBACtB,QAAQ,EAAE,GAAG;gBACb,MAAM,EAAE,aAAa;gBACrB,MAAM,EAAE,QAAQ;aACjB,CAAC,CAAC,GAAG,CAAC;gBACL,OAAO,EAAE,aAAa;gBACtB,OAAO,EAAE,CAAC,CAAC,EAAC,CAAC,CAAC;gBACd,UAAU,EAAE,CAAC,MAAM,EAAC,CAAC,CAAC;gBACtB,QAAQ,EAAE,GAAG;gBACb,MAAM,EAAE,aAAa;gBACrB,MAAM,EAAE,QAAQ;aACjB,CAAC,CAAC,GAAG,CAAC;gBACL,OAAO,EAAE,cAAc;gBACvB,OAAO,EAAE,CAAC,CAAC,EAAC,CAAC,CAAC;gBACd,QAAQ,EAAE,GAAG;gBACb,MAAM,EAAE,aAAa;gBACrB,MAAM,EAAE,QAAQ;aACjB,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;CACF;;YAvLoB,4DAAa;YACT,sFAAqB;YACxB,0EAAe;YACd,4EAAgB;YACd,0DAAW;YACX,gEAAiB;YACrB,sDAAO;;AA1Bf,QAAQ;IALpB,+DAAS,CAAC;QACT,QAAQ,EAAE,UAAU;QACpB,sMAA6B;;KAE9B,CAAC;2EAqBmB,4DAAa;QACT,sFAAqB;QACxB,0EAAe;QACd,4EAAgB;QACd,0DAAW;QACX,gEAAiB;QACrB,sDAAO;QACxB,8BAA8B;;GA3BrB,QAAQ,CA2MpB;AA3MoB;;;;;;;;;;;;AChBrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM,IAA0C;AAChD;AACA,IAAI,iCAAO,EAAE,oCAAE,OAAO;AAAA;AAAA;AAAA,oGAAC;AACvB,GAAG,MAAM,EAQN;AACH,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,EAAE,eAAe,EAAE;AAC9C;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,2BAA2B;AAC3B,2BAA2B;AAC3B,2BAA2B;;AAE3B,wCAAwC;AACxC,sCAAsC;;AAEtC;AACA;AACA;AACA;AACA;AACA,6BAA6B,gBAAgB,OAAO;AACpD,OAAO;AACP;AACA;;AAEA;AACA,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,cAAc,mEAAmE;AACjF;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,GAAG;;AAEH;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;;AAEA;;AAEA,GAAG;;AAEH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,yBAAyB,OAAO;AAChC;;AAEA;AACA;AACA;AACA,6BAA6B,EAAE,UAAU,EAAE,UAAU,EAAE;AACvD;AACA;AACA;AACA,mBAAmB,EAAE,GAAG,EAAE,GAAG,EAAE;AAC/B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,QAAQ,GAAG,QAAQ,GAAG,QAAQ,GAAG,EAAE;AACtD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,0E;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO,mDAAmD;AAC1D,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB,0BAA0B;AAC9C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,EAAE,GAAG,EAAE;AACpC;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;;AAEA;AACA,qBAAqB,mCAAmC;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;;;AAGH;;AAEA,4BAA4B;;AAE5B;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,oBAAoB;AAC3C,OAAO;AACP,oCAAoC,KAAK;AACzC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,yBAAyB,mBAAmB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA,8EAA8E,EAAE;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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","file":"home-home-module-es2015.js","sourcesContent":["export default \"<ion-content padding id='login-content'>\\r\\n\\r\\n  <form class=\\\"form\\\" [formGroup]=\\\"validationsForm\\\"  (ngSubmit)=\\\"loginUser(validationsForm.value)\\\">\\r\\n    <ion-item class=\\\"textfield\\\" no-padding id='email'>\\r\\n      <ion-label class=\\\"textfield\\\" position=\\\"floating\\\">Email</ion-label>\\r\\n      <ion-input type=\\\"email\\\" formControlName=\\\"email\\\" name=\\\"email\\\"></ion-input>\\r\\n    </ion-item>\\r\\n\\r\\n    <!--div class=\\\"validation-errors\\\">\\r\\n      <ng-container *ngFor=\\\"let validation of validationMessages.email\\\">\\r\\n        <div class=\\\"error-message\\\" *ngIf=\\\"validationsForm.get('email').hasError(validation.type) && (validationsForm.get('email').dirty || validationsForm.get('email').touched)\\\">\\r\\n          {{ validation.message }}\\r\\n        </div>\\r\\n      </ng-container>\\r\\n    </div-->\\r\\n\\r\\n    <ion-item class=\\\"textfield\\\" fill=\\\"outline\\\" no-padding id='password'>\\r\\n      <ion-label class=\\\"textfield\\\" position=\\\"floating\\\">Password</ion-label>\\r\\n      <ion-input type=\\\"password\\\" formControlName=\\\"password\\\" class=\\\"form-control\\\" required ></ion-input>\\r\\n    </ion-item>\\r\\n\\r\\n    <!--div class=\\\"validation-errors\\\">\\r\\n      <ng-container *ngFor=\\\"let validation of validationMessages.password\\\">\\r\\n        <div class=\\\"error-message\\\" *ngIf=\\\"validationsForm.get('password').hasError(validation.type) && (validationsForm.get('password').dirty || validationsForm.get('password').touched)\\\">\\r\\n          {{ validation.message }}\\r\\n        </div>\\r\\n      </ng-container>\\r\\n    </div-->\\r\\n\\r\\n    <label class=\\\"error-message\\\">{{errorMessage}}</label>\\r\\n\\r\\n    <ion-button class=\\\"submit-btn\\\" type=\\\"submit\\\" fill=\\\"solid\\\" expand=\\\"block\\\" [disabled]=\\\"!validationsForm.valid\\\" >Login</ion-button>\\r\\n\\r\\n  </form>\\r\\n  <ion-button class='signup-btn' fill=\\\"outline\\\" routerLink=\\\"/signup\\\" expand=\\\"block\\\">Sign up</ion-button>\\r\\n\\r\\n<!--\\r\\n  <ion-button class='offline-btn' fill=\\\"outline\\\" routerLink=\\\"/offline\\\" expand=\\\"block\\\">Offline Mode</ion-button>\\r\\n-->\\r\\n\\r\\n      <ion-list>\\r\\n        <ion-item lines=\\\"full\\\">\\r\\n          <ion-icon slot=\\\"start\\\" name=\\\"moon\\\"></ion-icon>\\r\\n          <ion-label>\\r\\n            Toggle Dark Theme\\r\\n          </ion-label>\\r\\n          <ion-toggle [(ngModel)]=\\\"toggle_dark_mode\\\" id=\\\"themeToggle\\\" slot=\\\"end\\\"></ion-toggle>\\r\\n        </ion-item>\\r\\n      </ion-list>\\r\\n\\r\\n      <div text-center>\\r\\n        <img src=\\\"assets/30SCE.png\\\">\\r\\n      </div>\\r\\n\\r\\n  <!-- FOR DEBUGGING ONLY -->\\r\\n\\r\\n  <!--<div id='debug-stuff' style=\\\"position:relative; top:5em;\\\" *ngIf=\\\"debugging_mode\\\">\\r\\n    <ion-button size='small' fill=\\\"outline\\\" (click)=\\\"debug('driver')\\\" clear>Debug Driver</ion-button>\\r\\n    <ion-button size='small' fill=\\\"outline\\\" (click)=\\\"debug('commander')\\\" clear>Debug Commander</ion-button>\\r\\n    <ion-button size='small' fill=\\\"outline\\\" (click)=\\\"debug('admin')\\\" clear>Debug Admin</ion-button>\\r\\n    &lt;!&ndash;ion-button (click)=\\\"changeTheme('autumn')\\\">Autumn</ion-button>\\r\\n    <ion-button (click)=\\\"changeTheme('night')\\\">Dark</ion-button>\\r\\n    <ion-button (click)=\\\"changeTheme('neon')\\\">Neon</ion-button> &ndash;&gt;\\r\\n  </div>-->\\r\\n\\r\\n\\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { FormsModule, ReactiveFormsModule} from '@angular/forms';\r\nimport { RouterModule } from '@angular/router';\r\n\r\nimport { HomePage } from './home.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ReactiveFormsModule,\r\n    RouterModule.forChild([\r\n      {\r\n        path: '',\r\n        component: HomePage\r\n      }\r\n    ])\r\n  ],\r\n  declarations: [HomePage]\r\n})\r\nexport class HomePageModule {}\r\n","export default \"ion-content {\\n  --padding-start: 10%;\\n  --padding-end: 10%;\\n  --padding-top: 10%; }\\n  ion-content .rounded {\\n    border-radius: 5px; }\\n  ion-content .textfield {\\n    --background: transparent; }\\n  ion-content .error-message {\\n    color: red;\\n    font-size: 0.8em; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaG9tZS9DOlxcVXNlcnNcXFJ1aVxcQW5kcm9pZFN0dWRpb1Byb2plY3RzXFxFbmdpbmVlcnNMb2dib29rMi9zcmNcXGFwcFxcaG9tZVxcaG9tZS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0E7RUFJRSxvQkFBZ0I7RUFDaEIsa0JBQWM7RUFDZCxrQkFBYyxFQUFBO0VBTmhCO0lBZ0JJLGtCQUFrQixFQUFBO0VBaEJ0QjtJQW1CSSx5QkFBYSxFQUFBO0VBbkJqQjtJQXNCSSxVQUFVO0lBQ1YsZ0JBQWdCLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9ob21lL2hvbWUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmlvbi1jb250ZW50IHtcclxuXHJcbi8vICBvcGFjaXR5OiAwOyAgIC8vIGFuaW1lanMgd2lsbCBmYWRlIHRoaXMgaW5cclxuICBcclxuICAtLXBhZGRpbmctc3RhcnQ6IDEwJTtcclxuICAtLXBhZGRpbmctZW5kOiAxMCU7XHJcbiAgLS1wYWRkaW5nLXRvcDogMTAlO1xyXG5cclxuICAvLyBodHRwczovL3d3dy5jc3NtYXRpYy5jb20vZ3JhZGllbnQtZ2VuZXJhdG9yXHJcbiAgLy9iYWNrZ3JvdW5kOiAtbW96LWxpbmVhci1ncmFkaWVudChsZWZ0LCByZ2JhKDMzLDUzLDksMSkwJSwgIHJnYmEoMTA0LDEzMyw4MSwxKSAgMTAwJSk7XHJcbiAgLy8tLWlvbi1iYWNrZ3JvdW5kLWNvbG9yOiBub25lO1xyXG4gIC8vLS1pb24tdGV4dC1jb2xvcjojMDAwMDAwO1xyXG4gICAgXHJcbiAgLnJvdW5kZWQge1xyXG4gICAgLW1vei1ib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICB9XHJcbiAgLnRleHRmaWVsZCB7XHJcbiAgICAtLWJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xyXG4gIH1cclxuICAuZXJyb3ItbWVzc2FnZSB7XHJcbiAgICBjb2xvcjogcmVkO1xyXG4gICAgZm9udC1zaXplOiAwLjhlbTtcclxuICB9XHJcbn1cclxuIl19 */\"","import { Component } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators, FormControl} from '@angular/forms';\r\nimport { NavController, LoadingController } from '@ionic/angular';\r\nimport { AuthenticationService } from '../services/authentication.service';\r\nimport { DatabaseService } from '../services/database.service';\r\nimport { MessagingService } from '../services/messaging.service';\r\n//import { ThemeService } from '../services/theme.service';\r\nimport { environment } from '../../environments/environment';\r\nimport { Storage } from '@ionic/storage';\r\nimport * as anime from '../services/anime.js'  // For splash animation\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: 'home.page.html',\r\n  styleUrls: ['home.page.scss'],\r\n})\r\nexport class HomePage {\r\n\r\n  validationsForm: FormGroup;\r\n  errorMessage = '';\r\n\r\n  validationMessages = {\r\n    email: [\r\n      { type: 'required', message: 'Email is required.' },\r\n      { type: 'pattern', message: 'Invalid email.' }\r\n    ],\r\n\r\n    // TODO: Validate password security at sign-up page only\r\n    password: [\r\n      { type: 'required', message: 'Password is required.' },\r\n      { type: 'minlength', message: 'Password must be at least 6 characters long.' }\r\n    ]\r\n  };\r\n\r\n  constructor(\r\n\r\n    private navCtrl: NavController,\r\n    private authService: AuthenticationService,\r\n    private database: DatabaseService,\r\n    private messaging: MessagingService,\r\n    private formBuilder: FormBuilder,\r\n    private loadingCtrl: LoadingController,\r\n    private storage: Storage\r\n    //,private theme: ThemeService\r\n\r\n  ) {\r\n    //this.animate();\r\n  }    \r\n\r\n  private loading;\r\n  public debugging_mode = true;\r\n  public toggle_dark_mode = false;\r\n  \r\n  ngOnInit() {\r\n\r\n    this.debugging_mode = !environment.production;  // --prod\r\n    \r\n    this.validationsForm = this.formBuilder.group({\r\n      email: new FormControl('', Validators.compose([\r\n        Validators.required,\r\n        Validators.pattern('^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$')\r\n      ])),\r\n\r\n      password: new FormControl('', Validators.compose([\r\n        Validators.minLength(6),\r\n        Validators.required\r\n      ]))\r\n    });\r\n    \r\n    // Restore used user/password\r\n    this.storage.get('email').then(value => {\r\n      this.validationsForm.get('email').setValue(value);\r\n    });\r\n    this.storage.get('password').then(value => {\r\n      this.validationsForm.get('password').setValue(value);\r\n    });\r\n\r\n    // Query for the toggle that is used to change between themes\r\n    // Note: \"dark\" colors are defined in theme/variables.scss\r\n    const toggle:any = document.querySelector('#themeToggle');\r\n    toggle.addEventListener('ionChange', (ev:any) => {\r\n      document.body.classList.toggle('dark', ev.detail.checked);\r\n      this.storage.set('dark', ev.detail.checked);\r\n    });\r\n\r\n    this.storage.get('dark').then(value => {\r\n      document.body.classList.toggle('dark', value);\r\n      this.toggle_dark_mode = value; // This will also set ngModel for ion-toggle\r\n    });\r\n  }\r\n\r\n  async loginUser(input){\r\n\r\n    console.log(`> Attempting login: ${input.email}`);\r\n\r\n    // Loading spinner overlay\r\n    this.loading = await this.loadingCtrl.create({\r\n      message: \"Authenticating...\"\r\n    });\r\n    this.loading.present();\r\n    \r\n    try { \r\n\r\n      // Authenticate user\r\n      var res = await this.authService.loginUser(input);\r\n      console.log(`> Firebase authentication is successful: ${res.user.email}`);\r\n\r\n      // Init database, retrieve user/drives info    \r\n      this.setLoadingText(\"Reading database...\");\r\n      await this.database.init(res.user.email);\r\n      console.log(`> Finished loading user: ${res.user.email}`);\r\n\r\n      // Init cloud messaging/notifications\r\n      this.setLoadingText(\"Initializing cloud messaging...\");\r\n      await this.messaging.init(res.user.email);\r\n\r\n      this.setLoadingText(\"Login success.\");\r\n      setTimeout(() => {this.loading.dismiss();},2000);\r\n\r\n      // Done initialization\r\n      if (this.database.current.user.is_commander) {\r\n        this.navCtrl.navigateForward('/tabs/commander');\r\n      } else {\r\n        this.navCtrl.navigateForward('/tabs/summary');\r\n      }\r\n      this.errorMessage = '';\r\n\r\n      // On successful login, save it      \r\n      this.storage.set('email', input.email);\r\n      this.storage.set('password', input.password);\r\n\r\n    } catch(err) {\r\n    \r\n      this.loading.dismiss();\r\n      this.errorMessage = `Login failed. ${err}`;\r\n    }\r\n    //this.validationsForm.reset();\r\n  }\r\n\r\n  private setLoadingText(text:string) {\r\n    const elem = document.querySelector(\r\n      \"div.loading-wrapper div.loading-content\");\r\n    if (elem) elem.innerHTML = text;\r\n  }\r\n\r\n  private debug(who) {\r\n    if (who === 'driver') {\r\n      this.validationsForm.get('email').setValue('meto@30sce.com');\r\n      this.validationsForm.get('password').setValue('123456');\r\n    }\r\n    if (who === 'commander') {\r\n      this.validationsForm.get('email').setValue('meoc@30sce.com');\r\n      this.validationsForm.get('password').setValue('123456');\r\n    }\r\n\r\n    /*//if (who === 'driver') {\r\n      this.validationsForm.get('email').setValue('tan97@gmail.com');\r\n      this.validationsForm.get('password').setValue('123456');\r\n    } else\r\n    //if (who === 'commander') {\r\n      this.validationsForm.get('email').setValue('lee55@gmail.com');\r\n      this.validationsForm.get('password').setValue('123456');\r\n    } else\r\n    //if (who === 'admin') {\r\n      this.validationsForm.get('email').setValue('superuser@gmail.com');\r\n      this.validationsForm.get('password').setValue('123456');\r\n    }*/\r\n  }\r\n  private animate() {\r\n    // Only start animation when background image has finished loading\r\n    document.body.classList.add('js-loading');\r\n    window.addEventListener(\"load\", () => \r\n    {\r\n      document.body.classList.remove('js-loading');\r\n      console.log(\"Inside window::load\");\r\n\r\n      anime.timeline({loop: false})\r\n      .add({\r\n        targets: '#login-content',\r\n        opacity: [0,1],\r\n        duration: 3000,\r\n        easing: \"easeOutExpo\",\r\n      }).add({\r\n        targets: '#email',\r\n        opacity: [0,1],\r\n        translateY: [\"50em\",0],\r\n        duration: 800,\r\n        easing: \"easeOutBack\",\r\n        offset: '-=3000'\r\n      }).add({\r\n        targets: '#password',\r\n        opacity: [0,1],\r\n        translateY: [\"50em\",0],\r\n        duration: 800,\r\n        easing: \"easeOutBack\",\r\n        offset: '-=2500'\r\n      }).add({\r\n        targets: '.submit-btn',\r\n        opacity: [0,1],\r\n        translateY: [\"50em\",0],\r\n        duration: 800,\r\n        easing: \"easeOutBack\",\r\n        offset: '-=2250'\r\n      }).add({\r\n        targets: '.signup-btn',\r\n        opacity: [0,1],\r\n        translateY: [\"50em\",0],\r\n        duration: 800,\r\n        easing: \"easeOutBack\",\r\n        offset: '-=2000'\r\n      }).add({\r\n        targets: '#debug-stuff',\r\n        opacity: [0,1],\r\n        duration: 800,\r\n        easing: \"easeOutBack\",\r\n        offset: '-=1000'\r\n      });\r\n    });\r\n  }\r\n}\r\n","/**\r\n * http://animejs.com\r\n * JavaScript animation engine\r\n * @version v2.2.0\r\n * @author Julian Garnier\r\n * @copyright ©2017 Julian Garnier\r\n * Released under the MIT license\r\n**/\r\n\r\n(function(root, factory) {\r\n  if (typeof define === 'function' && define.amd) {\r\n    // AMD. Register as an anonymous module.\r\n    define([], factory);\r\n  } else if (typeof module === 'object' && module.exports) {\r\n    // Node. Does not work with strict CommonJS, but\r\n    // only CommonJS-like environments that support module.exports,\r\n    // like Node.\r\n    module.exports = factory();\r\n  } else {\r\n    // Browser globals (root is window)\r\n    root.anime = factory();\r\n  }\r\n}(this, () => {\r\n\r\n  // Defaults\r\n\r\n  const defaultInstanceSettings = {\r\n    update: undefined,\r\n    begin: undefined,\r\n    run: undefined,\r\n    complete: undefined,\r\n    loop: 1,\r\n    direction: 'normal',\r\n    autoplay: true,\r\n    offset: 0\r\n  }\r\n\r\n  const defaultTweenSettings = {\r\n    duration: 1000,\r\n    delay: 0,\r\n    easing: 'easeOutElastic',\r\n    elasticity: 500,\r\n    round: 0\r\n  }\r\n\r\n  const validTransforms = ['translateX', 'translateY', 'translateZ', 'rotate', 'rotateX', 'rotateY', 'rotateZ', 'scale', 'scaleX', 'scaleY', 'scaleZ', 'skewX', 'skewY', 'perspective'];\r\n  let transformString;\r\n\r\n  // Utils\r\n\r\n  function stringContains(str, text) {\r\n    return str.indexOf(text) > -1;\r\n  }\r\n\r\n  const is = {\r\n    arr: a => Array.isArray(a),\r\n    obj: a => stringContains(Object.prototype.toString.call(a), 'Object'),\r\n    pth: a => is.obj(a) && a.hasOwnProperty('totalLength'),\r\n    svg: a => a instanceof SVGElement,\r\n    dom: a => a.nodeType || is.svg(a),\r\n    str: a => typeof a === 'string',\r\n    fnc: a => typeof a === 'function',\r\n    und: a => typeof a === 'undefined',\r\n    hex: a => /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a),\r\n    rgb: a => /^rgb/.test(a),\r\n    hsl: a => /^hsl/.test(a),\r\n    col: a => (is.hex(a) || is.rgb(a) || is.hsl(a))\r\n  }\r\n\r\n  // BezierEasing https://github.com/gre/bezier-easing\r\n\r\n  const bezier = (() => {\r\n\r\n    const kSplineTableSize = 11;\r\n    const kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\r\n\r\n    function A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1 };\r\n    function B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1 };\r\n    function C (aA1)      { return 3.0 * aA1 };\r\n\r\n    function calcBezier (aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT };\r\n    function getSlope (aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1) };\r\n\r\n    function binarySubdivide (aX, aA, aB, mX1, mX2) {\r\n      let currentX, currentT, i = 0;\r\n      do {\r\n        currentT = aA + (aB - aA) / 2.0;\r\n        currentX = calcBezier(currentT, mX1, mX2) - aX;\r\n        if (currentX > 0.0) { aB = currentT } else { aA = currentT };\r\n      } while (Math.abs(currentX) > 0.0000001 && ++i < 10);\r\n      return currentT;\r\n    }\r\n\r\n    function newtonRaphsonIterate (aX, aGuessT, mX1, mX2) {\r\n      for (let i = 0; i < 4; ++i) {\r\n        const currentSlope = getSlope(aGuessT, mX1, mX2);\r\n        if (currentSlope === 0.0) return aGuessT;\r\n        const currentX = calcBezier(aGuessT, mX1, mX2) - aX;\r\n        aGuessT -= currentX / currentSlope;\r\n      }\r\n      return aGuessT;\r\n    }\r\n\r\n    function bezier(mX1, mY1, mX2, mY2) {\r\n\r\n      if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) return;\r\n      let sampleValues = new Float32Array(kSplineTableSize);\r\n\r\n      if (mX1 !== mY1 || mX2 !== mY2) {\r\n        for (let i = 0; i < kSplineTableSize; ++i) {\r\n          sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\r\n        }\r\n      }\r\n\r\n      function getTForX(aX) {\r\n\r\n        let intervalStart = 0.0;\r\n        let currentSample = 1;\r\n        const lastSample = kSplineTableSize - 1;\r\n\r\n        for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\r\n          intervalStart += kSampleStepSize;\r\n        }\r\n\r\n        --currentSample;\r\n\r\n        const dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\r\n        const guessForT = intervalStart + dist * kSampleStepSize;\r\n        const initialSlope = getSlope(guessForT, mX1, mX2);\r\n\r\n        if (initialSlope >= 0.001) {\r\n          return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\r\n        } else if (initialSlope === 0.0) {\r\n          return guessForT;\r\n        } else {\r\n          return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\r\n        }\r\n\r\n      }\r\n\r\n      return x => {\r\n        if (mX1 === mY1 && mX2 === mY2) return x;\r\n        if (x === 0) return 0;\r\n        if (x === 1) return 1;\r\n        return calcBezier(getTForX(x), mY1, mY2);\r\n      }\r\n\r\n    }\r\n\r\n    return bezier;\r\n\r\n  })();\r\n\r\n  const easings = (() => {\r\n\r\n    const names = ['Quad', 'Cubic', 'Quart', 'Quint', 'Sine', 'Expo', 'Circ', 'Back', 'Elastic'];\r\n\r\n    // Elastic easing adapted from jQueryUI http://api.jqueryui.com/easings/\r\n\r\n    function elastic(t, p) {\r\n      return t === 0 || t === 1 ? t :\r\n      -Math.pow(2, 10 * (t - 1)) * Math.sin((((t - 1) - (p / (Math.PI * 2.0) * Math.asin(1))) * (Math.PI * 2)) / p );\r\n    }\r\n\r\n    // Approximated Penner equations http://matthewlein.com/ceaser/\r\n\r\n    const equations = {\r\n      In: [\r\n        [0.550, 0.085, 0.680, 0.530], /* InQuad */\r\n        [0.550, 0.055, 0.675, 0.190], /* InCubic */\r\n        [0.895, 0.030, 0.685, 0.220], /* InQuart */\r\n        [0.755, 0.050, 0.855, 0.060], /* InQuint */\r\n        [0.470, 0.000, 0.745, 0.715], /* InSine */\r\n        [0.950, 0.050, 0.795, 0.035], /* InExpo */\r\n        [0.600, 0.040, 0.980, 0.335], /* InCirc */\r\n        [0.600, -0.280, 0.735, 0.045], /* InBack */\r\n        elastic /* InElastic */\r\n      ], Out: [\r\n        [0.250, 0.460, 0.450, 0.940], /* OutQuad */\r\n        [0.215, 0.610, 0.355, 1.000], /* OutCubic */\r\n        [0.165, 0.840, 0.440, 1.000], /* OutQuart */\r\n        [0.230, 1.000, 0.320, 1.000], /* OutQuint */\r\n        [0.390, 0.575, 0.565, 1.000], /* OutSine */\r\n        [0.190, 1.000, 0.220, 1.000], /* OutExpo */\r\n        [0.075, 0.820, 0.165, 1.000], /* OutCirc */\r\n        [0.175, 0.885, 0.320, 1.275], /* OutBack */\r\n        (t, f) => 1 - elastic(1 - t, f) /* OutElastic */\r\n      ], InOut: [\r\n        [0.455, 0.030, 0.515, 0.955], /* InOutQuad */\r\n        [0.645, 0.045, 0.355, 1.000], /* InOutCubic */\r\n        [0.770, 0.000, 0.175, 1.000], /* InOutQuart */\r\n        [0.860, 0.000, 0.070, 1.000], /* InOutQuint */\r\n        [0.445, 0.050, 0.550, 0.950], /* InOutSine */\r\n        [1.000, 0.000, 0.000, 1.000], /* InOutExpo */\r\n        [0.785, 0.135, 0.150, 0.860], /* InOutCirc */\r\n        [0.680, -0.550, 0.265, 1.550], /* InOutBack */\r\n        (t, f) => t < .5 ? elastic(t * 2, f) / 2 : 1 - elastic(t * -2 + 2, f) / 2 /* InOutElastic */\r\n      ]\r\n    }\r\n\r\n    let functions = {\r\n      linear: bezier(0.250, 0.250, 0.750, 0.750)\r\n    }\r\n\r\n    for (let type in equations) {\r\n      equations[type].forEach((f, i) => {\r\n        functions['ease'+type+names[i]] = is.fnc(f) ? f : bezier.apply(this, f);\r\n      });\r\n    }\r\n\r\n    return functions;\r\n\r\n  })();\r\n\r\n  // Strings\r\n\r\n  function stringToHyphens(str) {\r\n    return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\r\n  }\r\n\r\n  function selectString(str) {\r\n    if (is.col(str)) return;\r\n    try {\r\n      let nodes = document.querySelectorAll(str);\r\n      return nodes;\r\n    } catch(e) {\r\n      return;\r\n    }\r\n  }\r\n\r\n  // Arrays\r\n\r\n  function filterArray(arr, callback) {\r\n    const len = arr.length;\r\n    const thisArg = arguments.length >= 2 ? arguments[1] : void 0;\r\n    let result = [];\r\n    for (let i = 0; i < len; i++) {\r\n      if (i in arr) {\r\n        const val = arr[i];\r\n        if (callback.call(thisArg, val, i, arr)) {\r\n          result.push(val);\r\n        }\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  function flattenArray(arr) {\r\n    return arr.reduce((a, b) => a.concat(is.arr(b) ? flattenArray(b) : b), []);\r\n  }\r\n\r\n  function toArray(o) {\r\n    if (is.arr(o)) return o;\r\n    if (is.str(o)) o = selectString(o) || o;\r\n    if (o instanceof NodeList || o instanceof HTMLCollection) return [].slice.call(o);\r\n    return [o];\r\n  }\r\n\r\n  function arrayContains(arr, val) {\r\n    return arr.some(a => a === val);\r\n  }\r\n\r\n  // Objects\r\n\r\n  function cloneObject(o) {\r\n    let clone = {};\r\n    for (let p in o) clone[p] = o[p];\r\n    return clone;\r\n  }\r\n\r\n  function replaceObjectProps(o1, o2) {\r\n    let o = cloneObject(o1);\r\n    for (let p in o1) o[p] = o2.hasOwnProperty(p) ? o2[p] : o1[p];\r\n    return o;\r\n  }\r\n\r\n  function mergeObjects(o1, o2) {\r\n    let o = cloneObject(o1);\r\n    for (let p in o2) o[p] = is.und(o1[p]) ? o2[p] : o1[p];\r\n    return o;\r\n  }\r\n\r\n  // Colors\r\n\r\n  function rgbToRgba(rgbValue) {\r\n    const rgb = /rgb\\((\\d+,\\s*[\\d]+,\\s*[\\d]+)\\)/g.exec(rgbValue);\r\n    return rgb ? `rgba(${rgb[1]},1)` : rgbValue;\r\n  }\r\n\r\n  function hexToRgba(hexValue) {\r\n    const rgx = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n    const hex = hexValue.replace(rgx, (m, r, g, b) => r + r + g + g + b + b );\r\n    const rgb = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n    const r = parseInt(rgb[1], 16);\r\n    const g = parseInt(rgb[2], 16);\r\n    const b = parseInt(rgb[3], 16);\r\n    return `rgba(${r},${g},${b},1)`;\r\n  }\r\n\r\n  function hslToRgba(hslValue) {\r\n    const hsl = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.exec(hslValue) || /hsla\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%,\\s*([\\d.]+)\\)/g.exec(hslValue);\r\n    const h = parseInt(hsl[1]) / 360;\r\n    const s = parseInt(hsl[2]) / 100;\r\n    const l = parseInt(hsl[3]) / 100;\r\n    const a = hsl[4] || 1;\r\n    function hue2rgb(p, q, t) {\r\n      if (t < 0) t += 1;\r\n      if (t > 1) t -= 1;\r\n      if (t < 1/6) return p + (q - p) * 6 * t;\r\n      if (t < 1/2) return q;\r\n      if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;\r\n      return p;\r\n    }\r\n    let r, g, b;\r\n    if (s == 0) {\r\n      r = g = b = l;\r\n    } else {\r\n      const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n      const p = 2 * l - q;\r\n      r = hue2rgb(p, q, h + 1/3);\r\n      g = hue2rgb(p, q, h);\r\n      b = hue2rgb(p, q, h - 1/3);\r\n    }\r\n    return `rgba(${r * 255},${g * 255},${b * 255},${a})`;\r\n  }\r\n\r\n  function colorToRgb(val) {\r\n    if (is.rgb(val)) return rgbToRgba(val);\r\n    if (is.hex(val)) return hexToRgba(val);\r\n    if (is.hsl(val)) return hslToRgba(val);\r\n  }\r\n\r\n  // Units\r\n\r\n  function getUnit(val) {\r\n    const split = /([\\+\\-]?[0-9#\\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(val);\r\n    if (split) return split[2];\r\n  }\r\n\r\n  function getTransformUnit(propName) {\r\n    if (stringContains(propName, 'translate') || propName === 'perspective') return 'px';\r\n    if (stringContains(propName, 'rotate') || stringContains(propName, 'skew')) return 'deg';\r\n  }\r\n\r\n  // Values\r\n\r\n  function minMaxValue(val, min, max) {\r\n    return Math.min(Math.max(val, min), max);\r\n  }\r\n\r\n  function getFunctionValue(val, animatable) {\r\n    if (!is.fnc(val)) return val;\r\n    return val(animatable.target, animatable.id, animatable.total);\r\n  }\r\n\r\n  function getCSSValue(el, prop) {\r\n    if (prop in el.style) {\r\n      return getComputedStyle(el).getPropertyValue(stringToHyphens(prop)) || '0';\r\n    }\r\n  }\r\n\r\n  function getAnimationType(el, prop) {\r\n    if (is.dom(el) && arrayContains(validTransforms, prop)) return 'transform';\r\n    if (is.dom(el) && (el.getAttribute(prop) || (is.svg(el) && el[prop]))) return 'attribute';\r\n    if (is.dom(el) && (prop !== 'transform' && getCSSValue(el, prop))) return 'css';\r\n    if (el[prop] != null) return 'object';\r\n  }\r\n\r\n  function getTransformValue(el, propName) {\r\n    const defaultUnit = getTransformUnit(propName);\r\n    const defaultVal = stringContains(propName, 'scale') ? 1 : 0 + defaultUnit;\r\n    const str = el.style.transform;\r\n    if (!str) return defaultVal;\r\n    let match = [];\r\n    let props = [];\r\n    let values = [];\r\n    const rgx = /(\\w+)\\((.+?)\\)/g;\r\n    while (match = rgx.exec(str)) {\r\n      props.push(match[1]);\r\n      values.push(match[2]);\r\n    }\r\n    const value = filterArray(values, (val, i) => props[i] === propName);\r\n    return value.length ? value[0] : defaultVal;\r\n  }\r\n\r\n  function getOriginalTargetValue(target, propName) {\r\n    switch (getAnimationType(target, propName)) {\r\n      case 'transform': return getTransformValue(target, propName);\r\n      case 'css': return getCSSValue(target, propName);\r\n      case 'attribute': return target.getAttribute(propName);\r\n    }\r\n    return target[propName] || 0;\r\n  }\r\n\r\n  function getRelativeValue(to, from) {\r\n    const operator = /^(\\*=|\\+=|-=)/.exec(to);\r\n    if (!operator) return to;\r\n    const u = getUnit(to) || 0;\r\n    const x = parseFloat(from);\r\n    const y = parseFloat(to.replace(operator[0], ''));\r\n    switch (operator[0][0]) {\r\n      case '+': return x + y + u;\r\n      case '-': return x - y + u;\r\n      case '*': return x * y + u;\r\n    }\r\n  }\r\n\r\n  function validateValue(val, unit) {\r\n    if (is.col(val)) return colorToRgb(val);\r\n    const originalUnit = getUnit(val);\r\n    const unitLess = originalUnit ? val.substr(0, val.length - originalUnit.length) : val;\r\n    return unit && !/\\s/g.test(val) ? unitLess + unit : unitLess;\r\n  }\r\n\r\n  // getTotalLength() equivalent for circle, rect, polyline, polygon and line shapes. \r\n  // adapted from https://gist.github.com/SebLambla/3e0550c496c236709744\r\n\r\n  function getDistance(p1, p2) {\r\n    return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2)); \r\n  }\r\n\r\n  function getCircleLength(el) {\r\n    return 2 * Math.PI * el.getAttribute('r');\r\n  }\r\n\r\n  function getRectLength(el) {\r\n    return (el.getAttribute('width') * 2) + (el.getAttribute('height') * 2);\r\n  }\r\n\r\n  function getLineLength(el) {\r\n    return getDistance(\r\n      {x: el.getAttribute('x1'), y: el.getAttribute('y1')}, \r\n      {x: el.getAttribute('x2'), y: el.getAttribute('y2')}\r\n    );\r\n  }\r\n\r\n  function getPolylineLength(el) {\r\n    const points = el.points;\r\n    let totalLength = 0;\r\n    let previousPos;\r\n    for (let i = 0 ; i < points.numberOfItems; i++) {\r\n      const currentPos = points.getItem(i);\r\n      if (i > 0) totalLength += getDistance(previousPos, currentPos);\r\n      previousPos = currentPos;\r\n    }\r\n    return totalLength;\r\n  }\r\n\r\n  function getPolygonLength(el) {\r\n    const points = el.points;\r\n    return getPolylineLength(el) + getDistance(points.getItem(points.numberOfItems - 1), points.getItem(0));\r\n  }\r\n\r\n  // Path animation\r\n\r\n  function getTotalLength(el) {\r\n    if (el.getTotalLength) return el.getTotalLength();\r\n    switch(el.tagName.toLowerCase()) {\r\n      case 'circle': return getCircleLength(el);\r\n      case 'rect': return getRectLength(el);\r\n      case 'line': return getLineLength(el);\r\n      case 'polyline': return getPolylineLength(el);\r\n      case 'polygon': return getPolygonLength(el);\r\n    }\r\n  }\r\n\r\n  function setDashoffset(el) {\r\n    const pathLength = getTotalLength(el);\r\n    el.setAttribute('stroke-dasharray', pathLength);\r\n    return pathLength;\r\n  }\r\n\r\n  // Motion path\r\n\r\n  function getPath(path, percent) {\r\n    const el = is.str(path) ? selectString(path)[0] : path;\r\n    const p = percent || 100;\r\n    return function(prop) {\r\n      return {\r\n        el: el,\r\n        property: prop,\r\n        totalLength: getTotalLength(el) * (p / 100)\r\n      }\r\n    }\r\n  }\r\n\r\n  function getPathProgress(path, progress) {\r\n    function point(offset = 0) {\r\n      const l = progress + offset >= 1 ? progress + offset : 0;\r\n      return path.el.getPointAtLength(l);\r\n    }\r\n    const p = point();\r\n    const p0 = point(-1);\r\n    const p1 = point(+1);\r\n    switch (path.property) {\r\n      case 'x': return p.x;\r\n      case 'y': return p.y;\r\n      case 'angle': return Math.atan2(p1.y - p0.y, p1.x - p0.x) * 180 / Math.PI;\r\n    }\r\n  }\r\n\r\n  // Decompose value\r\n\r\n  function decomposeValue(val, unit) {\r\n    const rgx = /-?\\d*\\.?\\d+/g;\r\n    const value = validateValue((is.pth(val) ? val.totalLength : val), unit) + '';\r\n    return {\r\n      original: value,\r\n      numbers: value.match(rgx) ? value.match(rgx).map(Number) : [0],\r\n      strings: (is.str(val) || unit) ? value.split(rgx) : []\r\n    }\r\n  }\r\n\r\n  // Animatables\r\n\r\n  function parseTargets(targets) {\r\n    const targetsArray = targets ? (flattenArray(is.arr(targets) ? targets.map(toArray) : toArray(targets))) : [];\r\n    return filterArray(targetsArray, (item, pos, self) => self.indexOf(item) === pos);\r\n  }\r\n\r\n  function getAnimatables(targets) {\r\n    const parsed = parseTargets(targets);\r\n    return parsed.map((t, i) => {\r\n      return {target: t, id: i, total: parsed.length};\r\n    });\r\n  }\r\n\r\n  // Properties\r\n\r\n  function normalizePropertyTweens(prop, tweenSettings) {\r\n    let settings = cloneObject(tweenSettings);\r\n    if (is.arr(prop)) {\r\n      const l = prop.length;\r\n      const isFromTo = (l === 2 && !is.obj(prop[0]));\r\n      if (!isFromTo) {\r\n        // Duration divided by the number of tweens\r\n        if (!is.fnc(tweenSettings.duration)) settings.duration = tweenSettings.duration / l;\r\n      } else {\r\n        // Transform [from, to] values shorthand to a valid tween value\r\n        prop = {value: prop};\r\n      }\r\n    }\r\n    return toArray(prop).map((v, i) => {\r\n      // Default delay value should be applied only on the first tween\r\n      const delay = !i ? tweenSettings.delay : 0;\r\n      // Use path object as a tween value\r\n      let obj = is.obj(v) && !is.pth(v) ? v : {value: v};\r\n      // Set default delay value\r\n      if (is.und(obj.delay)) obj.delay = delay;\r\n      return obj;\r\n    }).map(k => mergeObjects(k, settings));\r\n  }\r\n\r\n  function getProperties(instanceSettings, tweenSettings, params) {\r\n    let properties = [];\r\n    const settings = mergeObjects(instanceSettings, tweenSettings);\r\n    for (let p in params) {\r\n      if (!settings.hasOwnProperty(p) && p !== 'targets') {\r\n        properties.push({\r\n          name: p,\r\n          offset: settings['offset'],\r\n          tweens: normalizePropertyTweens(params[p], tweenSettings)\r\n        });\r\n      }\r\n    }\r\n    return properties;\r\n  }\r\n\r\n  // Tweens\r\n\r\n  function normalizeTweenValues(tween, animatable) {\r\n    let t = {};\r\n    for (let p in tween) {\r\n      let value = getFunctionValue(tween[p], animatable);\r\n      if (is.arr(value)) {\r\n        value = value.map(v => getFunctionValue(v, animatable));\r\n        if (value.length === 1) value = value[0];\r\n      }\r\n      t[p] = value;\r\n    }\r\n    t.duration = parseFloat(t.duration);\r\n    t.delay = parseFloat(t.delay);\r\n    return t;\r\n  }\r\n\r\n  function normalizeEasing(val) {\r\n    return is.arr(val) ? bezier.apply(this, val) : easings[val];\r\n  }\r\n\r\n  function normalizeTweens(prop, animatable) {\r\n    let previousTween;\r\n    return prop.tweens.map(t => {\r\n      let tween = normalizeTweenValues(t, animatable);\r\n      const tweenValue = tween.value;\r\n      const originalValue = getOriginalTargetValue(animatable.target, prop.name);\r\n      const previousValue = previousTween ? previousTween.to.original : originalValue;\r\n      const from = is.arr(tweenValue) ? tweenValue[0] : previousValue;\r\n      const to = getRelativeValue(is.arr(tweenValue) ? tweenValue[1] : tweenValue, from);\r\n      const unit = getUnit(to) || getUnit(from) || getUnit(originalValue);\r\n      tween.from = decomposeValue(from, unit);\r\n      tween.to = decomposeValue(to, unit);\r\n      tween.start = previousTween ? previousTween.end : prop.offset;\r\n      tween.end = tween.start + tween.delay + tween.duration;\r\n      tween.easing = normalizeEasing(tween.easing);\r\n      tween.elasticity = (1000 - minMaxValue(tween.elasticity, 1, 999)) / 1000;\r\n      tween.isPath = is.pth(tweenValue);\r\n      tween.isColor = is.col(tween.from.original);\r\n      if (tween.isColor) tween.round = 1;\r\n      previousTween = tween;\r\n      return tween;\r\n    });\r\n  }\r\n\r\n  // Tween progress\r\n\r\n  const setTweenProgress = {\r\n    css: (t, p, v) => t.style[p] = v,\r\n    attribute: (t, p, v) => t.setAttribute(p, v),\r\n    object: (t, p, v) => t[p] = v,\r\n    transform: (t, p, v, transforms, id) => {\r\n      if (!transforms[id]) transforms[id] = [];\r\n      transforms[id].push(`${p}(${v})`);\r\n    }\r\n  }\r\n\r\n  // Animations\r\n\r\n  function createAnimation(animatable, prop) {\r\n    const animType = getAnimationType(animatable.target, prop.name);\r\n    if (animType) {\r\n      const tweens = normalizeTweens(prop, animatable);\r\n      return {\r\n        type: animType,\r\n        property: prop.name,\r\n        animatable: animatable,\r\n        tweens: tweens,\r\n        duration: tweens[tweens.length - 1].end,\r\n        delay: tweens[0].delay\r\n      }\r\n    }\r\n  }\r\n\r\n  function getAnimations(animatables, properties) {\r\n    return filterArray(flattenArray(animatables.map(animatable => {\r\n      return properties.map(prop => {\r\n        return createAnimation(animatable, prop);\r\n      });\r\n    })), a => !is.und(a));\r\n  }\r\n\r\n  // Create Instance\r\n\r\n  function getInstanceTimings(type, animations, instanceSettings, tweenSettings) {\r\n    const isDelay = (type === 'delay');\r\n    if (animations.length) {\r\n      return (isDelay ? Math.min : Math.max).apply(Math, animations.map(anim => anim[type]));\r\n    } else {\r\n      return isDelay ? tweenSettings.delay : instanceSettings.offset + tweenSettings.delay + tweenSettings.duration;\r\n    }\r\n  }\r\n\r\n  function createNewInstance(params) {\r\n    const instanceSettings = replaceObjectProps(defaultInstanceSettings, params);\r\n    const tweenSettings = replaceObjectProps(defaultTweenSettings, params);\r\n    const animatables = getAnimatables(params.targets);\r\n    const properties = getProperties(instanceSettings, tweenSettings, params);\r\n    const animations = getAnimations(animatables, properties);\r\n    return mergeObjects(instanceSettings, {\r\n      children: [],\r\n      animatables: animatables,\r\n      animations: animations,\r\n      duration: getInstanceTimings('duration', animations, instanceSettings, tweenSettings),\r\n      delay: getInstanceTimings('delay', animations, instanceSettings, tweenSettings)\r\n    });\r\n  }\r\n\r\n  // Core\r\n\r\n  let activeInstances = [];\r\n  let raf = 0;\r\n\r\n  const engine = (() => {\r\n    function play() { raf = requestAnimationFrame(step); };\r\n    function step(t) {\r\n      const activeLength = activeInstances.length;\r\n      if (activeLength) {\r\n        let i = 0;\r\n        while (i < activeLength) {\r\n          if (activeInstances[i]) activeInstances[i].tick(t);\r\n          i++;\r\n        }\r\n        play();\r\n      } else {\r\n        cancelAnimationFrame(raf);\r\n        raf = 0;\r\n      }\r\n    }\r\n    return play;\r\n  })();\r\n\r\n\r\n  // Public Instance\r\n\r\n  function anime(params = {}) {\r\n\r\n    let now, startTime, lastTime = 0;\r\n\r\n    let resolve = null;\r\n\r\n    function makePromise() {\r\n      return window.Promise && new Promise(_resolve => resolve = _resolve);\r\n    }\r\n\r\n    let promise = makePromise();\r\n\r\n    let instance = createNewInstance(params);\r\n\r\n    function toggleInstanceDirection() {\r\n      instance.reversed = !instance.reversed;\r\n    }\r\n\r\n    function adjustTime(time) {\r\n      return instance.reversed ? instance.duration - time : time;\r\n    }\r\n\r\n    function syncInstanceChildren(time) {\r\n      const children = instance.children;\r\n      const childrenLength = children.length;\r\n      if (time >= instance.currentTime) {\r\n        for (let i = 0; i < childrenLength; i++) children[i].seek(time);\r\n      } else {\r\n        for (let i = childrenLength; i--;) children[i].seek(time);\r\n      }\r\n    }\r\n\r\n    function setAnimationsProgress(insTime) {\r\n      let i = 0;\r\n      let transforms = {};\r\n      const animations = instance.animations;\r\n      const animationsLength = animations.length;\r\n      while (i < animationsLength) {\r\n        const anim = animations[i];\r\n        const animatable = anim.animatable;\r\n        const tweens = anim.tweens;\r\n        const tweenLength = tweens.length - 1;\r\n        let tween = tweens[tweenLength];\r\n        // Only check for keyframes if there is more than one tween\r\n        if (tweenLength) tween = filterArray(tweens, t => (insTime < t.end))[0] || tween;\r\n        const elapsed = minMaxValue(insTime - tween.start - tween.delay, 0, tween.duration) / tween.duration;\r\n        const eased = isNaN(elapsed) ? 1 : tween.easing(elapsed, tween.elasticity);\r\n        const strings = tween.to.strings;\r\n        const round = tween.round;\r\n        let numbers = [];\r\n        let progress;\r\n        const toNumbersLength = tween.to.numbers.length;\r\n        for (let n = 0; n < toNumbersLength; n++) {\r\n          let value;\r\n          const toNumber = tween.to.numbers[n];\r\n          const fromNumber = tween.from.numbers[n];\r\n          if (!tween.isPath) {\r\n            value = fromNumber + (eased * (toNumber - fromNumber));\r\n          } else {\r\n            value = getPathProgress(tween.value, eased * toNumber);\r\n          }\r\n          if (round) {\r\n            if (!(tween.isColor && n > 2)) {\r\n              value = Math.round(value * round) / round;\r\n            }\r\n          }\r\n          numbers.push(value);\r\n        }\r\n        // Manual Array.reduce for better performances\r\n        const stringsLength = strings.length;\r\n        if (!stringsLength) {\r\n          progress = numbers[0];\r\n        } else {\r\n          progress = strings[0];\r\n          for (let s = 0; s < stringsLength; s++) {\r\n            const a = strings[s];\r\n            const b = strings[s + 1];\r\n            const n = numbers[s];\r\n            if (!isNaN(n)) {\r\n              if (!b) {\r\n                progress += n + ' ';\r\n              } else {\r\n                progress += n + b;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        setTweenProgress[anim.type](animatable.target, anim.property, progress, transforms, animatable.id);\r\n        anim.currentValue = progress;\r\n        i++;\r\n      }\r\n      const transformsLength = Object.keys(transforms).length;\r\n      if (transformsLength) {\r\n        for (let id = 0; id < transformsLength; id++) {\r\n          if (!transformString) {\r\n            const t = 'transform';\r\n            transformString = (getCSSValue(document.body, t) ? t : `-webkit-${t}`);\r\n          }\r\n          instance.animatables[id].target.style[transformString] = transforms[id].join(' ');\r\n        }\r\n      }\r\n      instance.currentTime = insTime;\r\n      instance.progress = (insTime / instance.duration) * 100;\r\n    }\r\n\r\n    function setCallback(cb) {\r\n      if (instance[cb]) instance[cb](instance);\r\n    }\r\n\r\n    function countIteration() {\r\n      if (instance.remaining && instance.remaining !== true) {\r\n        instance.remaining--;\r\n      }\r\n    }\r\n\r\n    function setInstanceProgress(engineTime) {\r\n      const insDuration = instance.duration;\r\n      const insOffset = instance.offset;\r\n      const insStart = insOffset + instance.delay;\r\n      const insCurrentTime = instance.currentTime;\r\n      const insReversed = instance.reversed;\r\n      const insTime = adjustTime(engineTime);\r\n      if (instance.children.length) syncInstanceChildren(insTime);\r\n      if (insTime >= insStart || !insDuration) {\r\n        if (!instance.began) {\r\n          instance.began = true;\r\n          setCallback('begin');\r\n        }\r\n        setCallback('run');\r\n      }\r\n      if (insTime > insOffset && insTime < insDuration) {\r\n        setAnimationsProgress(insTime);\r\n      } else {\r\n        if (insTime <= insOffset && insCurrentTime !== 0) {\r\n          setAnimationsProgress(0);\r\n          if (insReversed) countIteration();\r\n        }\r\n        if ((insTime >= insDuration && insCurrentTime !== insDuration) || !insDuration) {\r\n          setAnimationsProgress(insDuration);\r\n          if (!insReversed) countIteration();\r\n        }\r\n      }\r\n      setCallback('update');\r\n      if (engineTime >= insDuration) {\r\n        if (instance.remaining) {\r\n          startTime = now;\r\n          if (instance.direction === 'alternate') toggleInstanceDirection();\r\n        } else {\r\n          instance.pause();\r\n          if (!instance.completed) {\r\n            instance.completed = true;\r\n            setCallback('complete');\r\n            if ('Promise' in window) {\r\n              resolve();\r\n              promise = makePromise();\r\n            }\r\n          }\r\n        }\r\n        lastTime = 0;\r\n      }\r\n    }\r\n\r\n    instance.reset = function() {\r\n      const direction = instance.direction;\r\n      const loops = instance.loop;\r\n      instance.currentTime = 0;\r\n      instance.progress = 0;\r\n      instance.paused = true;\r\n      instance.began = false;\r\n      instance.completed = false;\r\n      instance.reversed = direction === 'reverse';\r\n      instance.remaining = direction === 'alternate' && loops === 1 ? 2 : loops;\r\n      setAnimationsProgress(0);\r\n      for (let i = instance.children.length; i--; ){\r\n        instance.children[i].reset();\r\n      }\r\n    }\r\n\r\n    instance.tick = function(t) {\r\n      now = t;\r\n      if (!startTime) startTime = now;\r\n      const engineTime = (lastTime + now - startTime) * anime.speed;\r\n      setInstanceProgress(engineTime);\r\n    }\r\n\r\n    instance.seek = function(time) {\r\n      setInstanceProgress(adjustTime(time));\r\n    }\r\n\r\n    instance.pause = function() {\r\n      const i = activeInstances.indexOf(instance);\r\n      if (i > -1) activeInstances.splice(i, 1);\r\n      instance.paused = true;\r\n    }\r\n\r\n    instance.play = function() {\r\n      if (!instance.paused) return;\r\n      instance.paused = false;\r\n      startTime = 0;\r\n      lastTime = adjustTime(instance.currentTime);\r\n      activeInstances.push(instance);\r\n      if (!raf) engine();\r\n    }\r\n\r\n    instance.reverse = function() {\r\n      toggleInstanceDirection();\r\n      startTime = 0;\r\n      lastTime = adjustTime(instance.currentTime);\r\n    }\r\n\r\n    instance.restart = function() {\r\n      instance.pause();\r\n      instance.reset();\r\n      instance.play();\r\n    }\r\n\r\n    instance.finished = promise;\r\n\r\n    instance.reset();\r\n\r\n    if (instance.autoplay) instance.play();\r\n\r\n    return instance;\r\n\r\n  }\r\n\r\n  // Remove targets from animation\r\n\r\n  function removeTargets(targets) {\r\n    const targetsArray = parseTargets(targets);\r\n    for (let i = activeInstances.length; i--;) {\r\n      const instance = activeInstances[i];\r\n      const animations = instance.animations;\r\n      for (let a = animations.length; a--;) {\r\n        if (arrayContains(targetsArray, animations[a].animatable.target)) {\r\n          animations.splice(a, 1);\r\n          if (!animations.length) instance.pause();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Timeline\r\n\r\n  function timeline(params) {\r\n    let tl = anime(params);\r\n    tl.pause();\r\n    tl.duration = 0;\r\n    tl.add = function(instancesParams) {\r\n      tl.children.forEach(i => { i.began = true; i.completed = true; });\r\n      toArray(instancesParams).forEach(instanceParams => {\r\n        let insParams = mergeObjects(instanceParams, replaceObjectProps(defaultTweenSettings, params || {}));\r\n        insParams.targets = insParams.targets || params.targets;\r\n        const tlDuration = tl.duration;\r\n        const insOffset = insParams.offset;\r\n        insParams.autoplay = false;\r\n        insParams.direction = tl.direction;\r\n        insParams.offset = is.und(insOffset) ? tlDuration : getRelativeValue(insOffset, tlDuration);\r\n        tl.began = true;\r\n        tl.completed = true;\r\n        tl.seek(insParams.offset);\r\n        const ins = anime(insParams);\r\n        ins.began = true;\r\n        ins.completed = true;\r\n        if (ins.duration > tlDuration) tl.duration = ins.duration;\r\n        tl.children.push(ins);\r\n      });\r\n      tl.seek(0);\r\n      tl.reset();\r\n      if (tl.autoplay) tl.restart();\r\n      return tl;\r\n    }\r\n    return tl;\r\n  }\r\n\r\n  anime.version = '2.2.0';\r\n  anime.speed = 1;\r\n  anime.running = activeInstances;\r\n  anime.remove = removeTargets;\r\n  anime.getValue = getOriginalTargetValue;\r\n  anime.path = getPath;\r\n  anime.setDashoffset = setDashoffset;\r\n  anime.bezier = bezier;\r\n  anime.easings = easings;\r\n  anime.timeline = timeline;\r\n  anime.random = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;\r\n\r\n  return anime;\r\n\r\n}));\r\n","import { Platform } from '@ionic/angular';\r\nimport { Injectable } from '@angular/core';\r\nimport { DatabaseService } from './database.service';\r\nimport { FCM } from '@ionic-native/fcm/ngx';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class MessagingService {\r\n\r\n  constructor(\r\n    private platform: Platform,\r\n    private database: DatabaseService,\r\n    private fcm: FCM  // Firebase Cloud Messaging\r\n  ) { }\r\n\r\n  public init(email: string) {\r\n\r\n    // Setup Firebase Cloud Messaging -- token handling,\r\n    // notifications in foreground/background.\r\n\r\n    if (this.platform.is('cordova')) {\r\n\r\n      console.log(`> FCM: Initializing cloud messaging services: ${email}`);\r\n      \r\n      this.fcm.getToken().then(token => {\r\n      \r\n        console.log(`> FCM: Token received: ${token}`);\r\n\r\n        const doc = {\r\n          token,\r\n          userId: email\r\n        };\r\n        \r\n        this.database.write('devices',email,doc);\r\n      });\r\n      \r\n      this.fcm.onTokenRefresh().subscribe(token => {\r\n        console.log(`> FCM: Token refreshed: ${token}`);\r\n        console.log(token);\r\n      });\r\n\r\n      this.fcm.onNotification().subscribe(data => {\r\n      \r\n        if (data.wasTapped) {\r\n          console.log(`> FCM: Received in background: ${data}`);\r\n//          this.router.navigate([data.landing_page, data.key3]);\r\n        } else {\r\n          console.log(`> FCM: Received token in foreground: ${data}`);\r\n//          this.router.navigate([data.landing_page, data.key3]);\r\n        }\r\n      });\r\n\r\n      console.log(`> FCM: initialization ok.`);\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}