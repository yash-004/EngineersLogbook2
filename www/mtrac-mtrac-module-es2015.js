(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["mtrac-mtrac-module"],{

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/mtrac/mtrac.page.html":
/*!*****************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/mtrac/mtrac.page.html ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<ion-header translucent>\r\n  <ion-toolbar>\r\n    <div>\r\n      <h1 style=\"margin-left: 10px;\"><strong>MT RISK ASSESSMENT CHECKLIST (MT-RAC)</strong></h1>\r\n    </div>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content>\r\n  <div>\r\n    <h5 style=\"text-align:right; margin-right: 10px;\"><strong><u>SAF 1200</u></strong></h5>\r\n    <h5 style=\"text-align:center;\"><strong><u>MT RISK ASSESSMENT CHECKLIST (MT-RAC)</u></strong></h5>\r\n    <h6 style=\"margin-left: 10px;\"><strong><u>ABOUT THE MT RAC FORM</u></strong><br></h6>\r\n    <h6 style=\"margin-left: 10px;\">It enables the drivers / riders to assess the risk level involved in their driving / riding detail. It allows the drivers / riders to make an informed decision as to whether to carry on with the detail.</h6>\r\n  </div>\r\n    <ion-item lines=\"none\" no-padding>\r\n    <ion-grid style=\"margin-left: 5px;\">\r\n      <ion-row class=\"cell-class\">\r\n        <ion-col size=\"2\">\r\n          <div>\r\n            <h6 style=\"text-align:center\"><strong>FACTORS</strong></h6>\r\n          </div>\r\n        </ion-col>\r\n        <ion-col class=\"cell-class\" style=\"margin-left : -1px\">\r\n          <div>\r\n            <h6 style=\"text-align:center\"><strong>MEANING</strong></h6>\r\n          </div>\r\n        </ion-col>\r\n      </ion-row>\r\n      <ion-row align-items-center class=\"cell-class\">\r\n        <ion-col size=\"2\">\r\n          <div>\r\n            <h6 style=\"text-align:center\">MAN</h6>\r\n          </div>\r\n        </ion-col>\r\n        <ion-col class=\"cell-class\" style=\"margin-left : -1px\">\r\n          <div>\r\n            <h6 style=\"text-align:left\">This refers to the driver / rider and in particular his driving / riding experience and accident record.<br>How well he has rested before the detail is also important.</h6>\r\n          </div>\r\n        </ion-col>\r\n      </ion-row>\r\n      <ion-row align-items-center class=\"cell-class\">\r\n        <ion-col size=\"2\">\r\n          <div>\r\n            <h6 style=\"text-align:center\">MACHINE</h6>\r\n          </div>\r\n        </ion-col>\r\n        <ion-col class=\"cell-class\" style=\"margin-left : -1px\">\r\n          <div>\r\n            <h6 style=\"text-align:left\">This refers to the condition of the vehicle / motorcycle, which they are handling on the road.<br>A faulty vehicle / motorcycle will heighten the risk level.</h6>\r\n          </div>\r\n        </ion-col>\r\n      </ion-row>\r\n      <ion-row align-items-center class=\"cell-class\">\r\n        <ion-col size=\"2\">\r\n          <div>\r\n            <h6 style=\"text-align:center\">MISSION</h6>\r\n          </div>\r\n        </ion-col>\r\n        <ion-col class=\"cell-class\" style=\"margin-left : -1px\">\r\n          <div>\r\n            <h6 style=\"text-align:left\">This type of transport detail will have an effect on the risk level.<br>An administrative detail will have less risk than a training detail, which requires them to drive / ride in difficult cross-country terrain.</h6>\r\n          </div>\r\n        </ion-col>\r\n      </ion-row>\r\n      <ion-row align-items-center class=\"cell-class\">\r\n        <ion-col size=\"2\">\r\n          <div>\r\n            <h6 style=\"text-align:center\">MEDIUM</h6>\r\n          </div>\r\n        </ion-col>\r\n        <ion-col class=\"cell-class\" style=\"margin-left : -1px\">\r\n          <div>\r\n            <h6 style=\"text-align:left\">This refers mainly to the road conditions under which the driver / rider operates.<br>Their prevailing conditions will have a direct effect on the driver / rider.</h6>\r\n          </div>\r\n        </ion-col>\r\n      </ion-row>\r\n      <ion-row align-items-center class=\"cell-class\">\r\n        <ion-col size=\"2\">\r\n          <div>\r\n            <h6 style=\"text-align:center\">MANAGEMENT</h6>\r\n          </div>\r\n        </ion-col>\r\n        <ion-col class=\"cell-class\" style=\"margin-left : -1px\">\r\n          <div>\r\n            <h6 style=\"text-align:left\">Close supervision of the driver / rider will contribute to risk minimisation.<br>Assignment of Vehicle Commander of a high rank will have a psychological effect on the driver to do better.</h6>\r\n          </div>\r\n        </ion-col>\r\n      </ion-row>\r\n    </ion-grid>\r\n  </ion-item>\r\n\r\n  <ion-item lines=\"none\" no-padding>\r\n    <ion-grid style=\"margin-left: 5px;\">\r\n      <ion-row>\r\n        <ion-col class=\"cell-class\">\r\n          <div>\r\n            <h6 style=\"text-align:center\"><strong>RISK LEVEL</strong></h6>\r\n          </div>\r\n        </ion-col>\r\n      </ion-row>\r\n      <ion-row align-items-center class=\"cell-class\">\r\n        <ion-col>\r\n          <div>\r\n            <h6 style=\"text-align:center\"><strong>LOW RISK</strong></h6>\r\n          </div>\r\n        </ion-col>\r\n        <ion-col class=\"cell-class\" style=\"margin-left : -1px;\">\r\n          <div>\r\n            <h6 style=\"text-align:center\"><strong>MEDIUM RISK</strong></h6>\r\n          </div>\r\n        </ion-col>\r\n        <ion-col>\r\n          <div>\r\n            <h6 style=\"text-align:center\"><strong>HIGH RISK</strong></h6>\r\n          </div>\r\n        </ion-col>\r\n      </ion-row>\r\n      <ion-row align-items-center class=\"cell-class\">\r\n        <ion-col>\r\n          <div>\r\n            <h6 style=\"text-align:center\">Normal operational risk.</h6>\r\n          </div>\r\n        </ion-col>\r\n        <ion-col class=\"cell-class\" style=\"margin-left : -1px;\">\r\n          <div>\r\n            <h6 style=\"text-align:center\">Above normal operational risk level.<br>Increase supervision, briefing and exercise caution, Mission may be suspended till conditions are better.</h6>\r\n          </div>\r\n        </ion-col>\r\n        <ion-col>\r\n          <div>\r\n            <h6 style=\"text-align:center\">Do not proceed with mission unless approved by higher authorities.<br><strong>All high risk factors must be mitigated.</strong></h6>\r\n          </div>\r\n        </ion-col>\r\n      </ion-row>\r\n    </ion-grid>\r\n  </ion-item>\r\n\r\n  <ion-item lines=\"none\" no-padding>\r\n    <ion-grid style=\"margin-left: 5px;\">\r\n      <ion-row class=\"cell-class\">\r\n        <ion-col>\r\n          <div>\r\n            <h6 style=\"text-align:center\"><strong>List of Common Vehicle Defects</strong></h6>\r\n          </div>\r\n        </ion-col>\r\n      </ion-row>\r\n      <ion-row class=\"cell-class\">\r\n        <ion-col class=\"cell-class\">\r\n          <div>\r\n            <h6 style=\"text-align:center\"><strong>Major Defects</strong></h6>\r\n          </div>\r\n        </ion-col>\r\n        <ion-col class=\"cell-class\">\r\n          <div>\r\n            <h6 style=\"text-align:center\"><strong>Minor Defects</strong></h6>\r\n          </div>\r\n        </ion-col>\r\n      </ion-row>\r\n      <ion-row class=\"cell-class\">\r\n        <ion-col class=\"cell-class\">\r\n          <div>\r\n            <h6 style=\"text-align:left\">- Emitting black or white smoke<br>\r\n              - Exhaust silencer leaking<br>\r\n              - Speedometer not working<br>\r\n              - Horn not working<br>\r\n              - Signal Indicator not working<br>\r\n              - Brake light not working<br>\r\n              - Headlights not working<br>\r\n              - Tail lights not working<br>\r\n              - No Mirrors / <strong>Loose mirror</strong> / <strong>Blurred mirror</strong><br>\r\n              - Windscreen shattered / crack<br>\r\n              - Wiper not working<br>\r\n              - Unusual noise or vibration from engine<br>\r\n              - Brakes not effective<br>\r\n              - Engine oil level below the minimum level, exceed maximum level<br>\r\n              - Bald tyre<br>\r\n              - Door not closing properly<br>\r\n              - Radiator water leaking<br>\r\n              - Speed Warning Device not working<br>\r\n              - Unserviceable Front/Rear (Safety Belt)<br>\r\n              - Unserviceable Safety strap<br>\r\n              - Pintle securing pin missing (Not fit for towing)</h6>\r\n          </div>\r\n        </ion-col>\r\n        <ion-col class=\"cell-class\">\r\n          <div>\r\n            <h6 style=\"text-align:left\">- Weak batteries<br>\r\n              - Battery water too low<br>\r\n              - Temperature gauge and other panel gauges not working<br>\r\n              - Incorrect tyre pressure<br>\r\n              - Vehicle body dented<br>\r\n              - Superstructure damaged or broken<br>\r\n              - Canopy torn<br>\r\n              - Tailboard strap missing<br>\r\n              - No self-centering (Steering system)<br>\r\n              - Steering free-play too much<br>\r\n              - Fan belt worn or slacked<br>\r\n              - Weak suspension coil spring<br>\r\n              - Towing pin missing (Not fit for towing)<br>\r\n              - Pintle securing pin missing (Not fit for towing) to major fault</h6>\r\n          </div>\r\n        </ion-col>\r\n      </ion-row>\r\n    </ion-grid>\r\n  </ion-item>\r\n  <div>\r\n    <h6 style=\"margin-left: 10px;\"><strong><u>Briefing and ensuring notes for TO/ DV/ LOA Drivers</u></strong><br></h6>\r\n\r\n    <h6 style=\"margin-left: 10px;\"><ol type=\"a\">\r\n      <li>Check and ensure seating capacity, if exceeds (Please do not proceed on with the detail)</li>\r\n      <li>Brief troops to engage seat belt throughout the journey</li>\r\n      <li>Assist the troops in engaging the safety straps. Safety straps are to be engaged throughout the journey.</li>\r\n      <li>Brief \"no smoking / sleeping on vehicle\" throughout the journey</li>\r\n      <li>Nobody is to move while the vehicle is on the move</li>\r\n      <li>No sitting on the tailboard at all times</li>\r\n    </ol></h6>\r\n\r\n    <h6 style=\"margin-left: 10px;\"><strong>* For any matters please seek vehicle commander's assistance</strong><br></h6>\r\n  </div>\r\n  <div>\r\n    <h5 style=\"text-align:right; margin-right: 10px;\"><strong><u>SAF 1200</u></strong></h5>\r\n    <h5 style=\"text-align:center;\"><strong><u>MT RISK ASSESSMENT CHECKLIST (MT-RAC)</u></strong></h5>\r\n    <ion-grid style=\"margin-left: 5px;\"><ion-row class=\"cell-class\">\r\n      <h6 style=\"margin-left: 10px;\">The MT-RAC form is an assessment of the 5-M Risk Factors and identified high risk factors are to be mitigated. All SAF Drivers are to fill up the MT-RAC form, and completed forms are to be kept by the MT Node for 3 working days or in the event of an accident, until the investigation is completed. A MT-RAC form is to be completed for every transport detail, or when there is a change in the conditions or nature of detail. For exercises/training, a MT-RAC is prepared at the start of each exercise, and updated  if there is a change in conditions.</h6>\r\n    </ion-row></ion-grid></div>\r\n\r\n  <form class=\"form\" [formGroup]=\"mtracForm\" (submit)=\"addmtrac(mtracForm.value)\">\r\n  <ion-card><ion-card-content>\r\n    <ion-item lines=\"none\">\r\n      <ion-label  position=\"floating\">driving area</ion-label>\r\n      <ion-select [ngStyle]=\"{'color': 'black'}\" formControlName=\"incamp\" interface=\"popover\">\r\n        <ion-select-option [ngStyle]=\"{'color': 'black'}\" text-wrap value=true>In Camp</ion-select-option>\r\n        <ion-select-option [ngStyle]=\"{'color': 'black'}\" text-wrap value=false *ngIf=\"gettime()\">Out of Camp</ion-select-option>\r\n      </ion-select>\r\n    </ion-item>\r\n\r\n    <ion-item>\r\n      <ion-label  position=\"floating\" >From</ion-label>\r\n      <ion-input [ngStyle]=\"{'color': 'black'}\" type=\"text\" onkeyup=\"this.value = this.value.toUpperCase()\" formControlName=\"startLocation\" placeholder=\"Start Location\"></ion-input>\r\n    </ion-item>\r\n    <ion-item>\r\n      <ion-label  position=\"floating\">To</ion-label>\r\n      <ion-input [ngStyle]=\"{'color': 'black'}\" type=\"text\" onkeyup=\"this.value = this.value.toUpperCase()\" formControlName=\"endLocation\" placeholder=\"End Location\"></ion-input>\r\n    </ion-item>\r\n\r\n    <ion-item>\r\n      <ion-col><ion-item>\r\n        <ion-label  position=\"floating\" >Vehicle Number</ion-label>\r\n        <ion-input [ngStyle]=\"{'color': 'black'}\" onkeyup=\"this.value = this.value.toUpperCase()\" formControlName=\"vehicleNumber\" placeholder=\"XXXXMID\"></ion-input>\r\n      </ion-item>\r\n      <div class=\"validation-errors\">\r\n        <ng-container *ngFor=\"let validation of validationMessages.vehicleNumber\">\r\n          <div class=\"error-message\" *ngIf=\"mtracForm.get('vehicleNumber').hasError(validation.type) && (mtracForm.get('vehicleNumber').dirty || mtracForm.get('vehicleNumber').touched)\">\r\n            {{ validation.message }}\r\n          </div>\r\n        </ng-container>\r\n      </div>\r\n      </ion-col></ion-item>\r\n    <ion-item>\r\n      <ion-label position=\"floating\">Vehicle Commander</ion-label>\r\n      <ion-select formControlName=\"commander\" interface=\"popover\">\r\n        <ion-select-option *ngFor=\"let c of database.current.all_commanders_of_driver\" value={{c.email}}>{{c.name}}\r\n        </ion-select-option>\r\n      </ion-select>\r\n    </ion-item>\r\n  </ion-card-content></ion-card>\r\n\r\n  <ion-card>\r\n    <ion-card-title text-center>MAN FACTORS</ion-card-title>\r\n    <ion-card-content>\r\n\r\n      <ion-col><ion-item>\r\n        <ion-label ><strong>Driving Experience</strong></ion-label>\r\n        <ion-select [ngStyle]=\"{'color': 'black'}\"  formControlName=\"licenseType\" interface=\"popover\" text-left>\r\n          <ion-select-option text-wrap value=\"L\">CAT A, B</ion-select-option>\r\n          <ion-select-option text-wrap value=\"M\">CAT C</ion-select-option>\r\n          <ion-select-option text-wrap value=\"H\">CAT D</ion-select-option>\r\n          <ion-select-option text-wrap value=\"N\">Have never been trained and familiarized in the vehicle that you will be driving</ion-select-option>\r\n        </ion-select></ion-item>\r\n        <div class=\"validation-errors\">\r\n          <ng-container *ngFor=\"let validation of validationMessages.licenseType\">\r\n            <div class=\"error-message\"\r\n                 *ngIf=\"mtracForm.get('licenseType').hasError(validation.type) && (mtracForm.get('licenseType').dirty || mtracForm.get('licenseType').touched)\">\r\n              {{ validation.message }}\r\n            </div>\r\n          </ng-container>\r\n        </div>\r\n      </ion-col>\r\n      <ion-col><ion-item>\r\n        <ion-label ><strong>Vehicle Type</strong></ion-label>\r\n        <ion-select [ngStyle]=\"{'color': 'black'}\"  formControlName=\"vehicleType2\" interface=\"popover\" text-wrap>\r\n          <ion-select-option text-wrap value=\"L\">Same as last detail / Different (GP Car/Pickup)</ion-select-option>\r\n          <ion-select-option text-wrap value=\"M\">Different (MUV/OUV/JEEP)</ion-select-option>\r\n          <ion-select-option text-wrap value=\"H\">Different (Coach/3Ton/5Ton/7Ton)</ion-select-option>\r\n        </ion-select>\r\n      </ion-item>\r\n        <div class=\"validation-errors\">\r\n          <ng-container *ngFor=\"let validation of validationMessages.vehicleType\">\r\n            <div class=\"error-message\"\r\n                 *ngIf=\"mtracForm.get('vehicleType').hasError(validation.type) && (mtracForm.get('vehicleType').dirty || mtracForm.get('vehicleType').touched)\">\r\n              {{ validation.message }}\r\n            </div>\r\n          </ng-container>\r\n        </div>\r\n      </ion-col>\r\n      <ion-col><ion-item>\r\n        <ion-label ><strong>Fatigue/Length of Rest</strong></ion-label>\r\n        <ion-select [ngStyle]=\"{'color': 'black'}\" formControlName=\"rest\" interface=\"popover\" text-wrap>\r\n          <ion-select-option text-wrap value=\"L\">More than 6 hours</ion-select-option>\r\n          <ion-select-option text-wrap value=\"M\">Less than 6 hours (Home/Camp)</ion-select-option>\r\n          <ion-select-option text-wrap value=\"H\">Less than 6 hours (Field)</ion-select-option>\r\n        </ion-select></ion-item>\r\n        <div class=\"validation-errors\">\r\n          <ng-container *ngFor=\"let validation of validationMessages.rest\">\r\n            <div class=\"error-message\"\r\n                 *ngIf=\"mtracForm.get('rest').hasError(validation.type) && (mtracForm.get('rest').dirty || mtracForm.get('rest').touched)\">\r\n              {{ validation.message }}\r\n            </div>\r\n          </ng-container>\r\n        </div>\r\n      </ion-col>\r\n      <ion-col><ion-item>\r\n        <ion-label ><strong>My Health</strong></ion-label>\r\n        <ion-select [ngStyle]=\"{'color': 'black'}\" formControlName=\"health\" interface=\"popover\" text-wrap>\r\n          <ion-select-option text-wrap value=\"L\">Good</ion-select-option>\r\n          <ion-select-option text-wrap value=\"M\">Fair (Just recovered from illness < 1 day)</ion-select-option>\r\n          <ion-select-option text-wrap value=\"N\">Poor (Still ill or Attend C) / Still under medication that causes drowsiness</ion-select-option>\r\n        </ion-select></ion-item>\r\n        <div class=\"validation-errors\">\r\n          <ng-container *ngFor=\"let validation of validationMessages.health\">\r\n            <div class=\"error-message\"\r\n                 *ngIf=\"mtracForm.get('health').hasError(validation.type) && (mtracForm.get('health').dirty || mtracForm.get('health').touched)\">\r\n              {{ validation.message }}\r\n            </div>\r\n          </ng-container>\r\n        </div>\r\n      </ion-col>\r\n    </ion-card-content></ion-card>\r\n\r\n  <ion-card>\r\n    <ion-card-title text-center>MEDIUM FACTORS</ion-card-title>\r\n    <ion-card-content>\r\n      <ion-col><ion-item>\r\n        <ion-label ><strong>Weather</strong></ion-label>\r\n        <ion-select [ngStyle]=\"{'color': 'black'}\" formControlName=\"weather\" interface=\"popover\" text-wrap>\r\n          <ion-select-option text-wrap value=\"L\">Dry</ion-select-option>\r\n          <ion-select-option text-wrap value=\"M\">Wet</ion-select-option>\r\n          <ion-select-option text-wrap value=\"H\">Heavy showers</ion-select-option>\r\n        </ion-select></ion-item>\r\n        <div class=\"validation-errors\">\r\n          <ng-container *ngFor=\"let validation of validationMessages.weather\">\r\n            <div class=\"error-message\"\r\n                 *ngIf=\"mtracForm.get('weather').hasError(validation.type) && (mtracForm.get('weather').dirty || mtracForm.get('weather').touched)\">\r\n              {{ validation.message }}\r\n            </div>\r\n          </ng-container>\r\n        </div>\r\n      </ion-col>\r\n      <ion-col><ion-item>\r\n        <ion-label ><strong>Route Familiarity</strong></ion-label>\r\n        <ion-select [ngStyle]=\"{'color': 'black'}\" formControlName=\"route\" interface=\"popover\" text-wrap>\r\n          <ion-select-option text-wrap value=\"L\">Familiar</ion-select-option>\r\n          <ion-select-option text-wrap value=\"H\">Not Familiar</ion-select-option>\r\n        </ion-select></ion-item>\r\n        <div class=\"validation-errors\">\r\n          <ng-container *ngFor=\"let validation of validationMessages.route\">\r\n            <div class=\"error-message\"\r\n                 *ngIf=\"mtracForm.get('route').hasError(validation.type) && (mtracForm.get('route').dirty || mtracForm.get('route').touched)\">\r\n              {{ validation.message }}\r\n            </div>\r\n          </ng-container>\r\n        </div>\r\n      </ion-col>\r\n    </ion-card-content></ion-card>\r\n\r\n  <ion-card>\r\n    <ion-card-title text-center>MISSION FACTORS</ion-card-title>\r\n    <ion-card-content>\r\n      <ion-col><ion-item>\r\n        <ion-label ><strong>Detail Type</strong></ion-label>\r\n        <ion-select [ngStyle]=\"{'color': 'black'}\" formControlName=\"detailType\" interface=\"popover\" text-wrap>\r\n          <ion-select-option text-wrap value=\"L\">Admin</ion-select-option>\r\n          <ion-select-option text-wrap value=\"M\">Training/Special mission oriented towing vehicle/gun</ion-select-option>\r\n          <ion-select-option text-wrap value=\"H\">Occasional towing trailer/vehicle/gun</ion-select-option>\r\n        </ion-select></ion-item>\r\n        <div class=\"validation-errors\">\r\n          <ng-container *ngFor=\"let validation of validationMessages.detailType\">\r\n            <div class=\"error-message\"\r\n                 *ngIf=\"mtracForm.get('detailType').hasError(validation.type) && (mtracForm.get('detailType').dirty || mtracForm.get('detailType').touched)\">\r\n              {{ validation.message }}\r\n            </div>\r\n          </ng-container>\r\n        </div>\r\n      </ion-col>\r\n    </ion-card-content></ion-card>\r\n\r\n  <ion-card>\r\n    <ion-card-title text-center>MANAGEMENT FACTORS</ion-card-title>\r\n    <ion-card-content>\r\n      <ion-col><ion-item>\r\n        <ion-label ><strong>Without Vehicle Commander</strong></ion-label>\r\n        <ion-select [ngStyle]=\"{'color': 'black'}\" formControlName=\"vc\" interface=\"popover\" text-wrap>\r\n          <ion-select-option text-wrap value=\"L\">CAT A, B</ion-select-option>\r\n          <ion-select-option text-wrap value=\"M\">CAT C</ion-select-option>\r\n          <ion-select-option text-wrap value=\"N\">CAT D</ion-select-option>\r\n        </ion-select></ion-item>\r\n        <div class=\"validation-errors\">\r\n          <ng-container *ngFor=\"let validation of validationMessages.vc\">\r\n            <div class=\"error-message\"\r\n                 *ngIf=\"mtracForm.get('vc').hasError(validation.type) && (mtracForm.get('vc').dirty || mtracForm.get('vc').touched)\">\r\n              {{ validation.message }}\r\n            </div>\r\n          </ng-container>\r\n        </div>\r\n      </ion-col>\r\n    </ion-card-content></ion-card>\r\n\r\n  <ion-card>\r\n    <ion-card-title text-center>MACHINE FACTORS</ion-card-title>\r\n    <ion-card-content>\r\n      <ion-col><ion-item>\r\n        <ion-label ><strong>Vehicle Serviceability</strong></ion-label>\r\n        <ion-select [ngStyle]=\"{'color': 'black'}\" formControlName=\"vehicleServiceability\" interface=\"popover\" text-wrap>\r\n          <ion-select-option text-wrap value=\"L\">No fault</ion-select-option>\r\n          <ion-select-option text-wrap value=\"H\">Minor fault</ion-select-option>\r\n          <ion-select-option text-wrap value=\"N\">Major fault</ion-select-option>\r\n        </ion-select></ion-item>\r\n        <div class=\"validation-errors\">\r\n          <ng-container *ngFor=\"let validation of validationMessages.vehicleServiceability\">\r\n            <div class=\"error-message\"\r\n                 *ngIf=\"mtracForm.get('vehicleServiceability').hasError(validation.type) && (mtracForm.get('vehicleServiceability').dirty || mtracForm.get('vehicleServiceability').touched)\">\r\n              {{ validation.message }}\r\n            </div>\r\n          </ng-container>\r\n        </div>\r\n      </ion-col>\r\n    </ion-card-content></ion-card>\r\n\r\n    <ion-card>\r\n      <ion-card-title text-center>OVERALL RISK LEVEL</ion-card-title>\r\n      <ion-card-content>\r\n        <ion-item *ngIf=\"!getoverallrisk()\" color=\"danger\" text-center>\r\n          <ion-label >\r\n            NO MOVE\r\n          </ion-label>\r\n        </ion-item>\r\n        <ion-item *ngIf=\"getoverallrisk()=='HIGH'\" color=\"danger\" text-center>\r\n          <ion-label >\r\n            {{getoverallrisk()}}\r\n          </ion-label>\r\n        </ion-item>\r\n        <ion-item *ngIf=\"getoverallrisk()=='MEDIUM'\" color=\"warning\" text-center>\r\n          <ion-label >\r\n            {{getoverallrisk()}}\r\n          </ion-label>\r\n        </ion-item>\r\n        <ion-item  *ngIf=\"getoverallrisk()=='LOW'\" color=\"success\" text-center>\r\n          <ion-label>\r\n            {{getoverallrisk()}}\r\n          </ion-label>\r\n        </ion-item>\r\n      </ion-card-content>\r\n    </ion-card>\r\n\r\n    <div>\r\n      <h6 style=\"text-align:center;\"><strong>SAF DRIVERS<sup>1</sup> AND VEHICLE COMMANDERS ARE RESPONSIBLE FOR THE TROOPS AND CARGO TRANSPORTED. THEY ARE TO PERFORM THE FOLLOWING ACTIONS AND BRIEFING. (PLEASE TICK ACCORDINGLY ON THE CHECKLIST)</strong></h6>\r\n    </div>\r\n\r\n    <ion-item lines=\"none\" no-padding style=\"ion-item-background: white\">\r\n      <ion-grid style=\"margin-left: 5px;\">\r\n        <ion-row class=\"cell-class\">\r\n          <ion-col size=\"8\">\r\n            <div>\r\n              <h6 style=\"text-align:left\"><strong>Description</strong></h6>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col class=\"cell-class\" style=\"margin-left : -1px; text-align:center;\">\r\n            <div>\r\n              <h6 style=\"text-align:center\"><strong>Driver</strong></h6>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col>\r\n            <div>\r\n              <h6 style=\"text-align:center\"><strong>Veh Com</strong></h6>\r\n            </div>\r\n          </ion-col>\r\n        </ion-row>\r\n        <ion-row class=\"cell-class\">\r\n          <ion-col size=\"8\">\r\n            <div>\r\n              <h6 style=\"text-align:left\">Ensure that the driver is licensed to operate the vehicle</h6>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col class=\"invalid-class\" style=\"margin-left : -1px;\">\r\n            <div class=\"invalid-div\">\r\n              <h5 style=\"text-align:center\"><strong>-</strong></h5>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col align-items-center>\r\n            <div class=\"checkbox-div\" align=\"center\">\r\n              <ion-checkbox formControlName=\"cmdlicense\" name=\"cmdlicense\"></ion-checkbox>\r\n            </div>\r\n          </ion-col>\r\n        </ion-row>\r\n        <ion-row class=\"cell-class\">\r\n          <ion-col size=\"8\">\r\n            <div>\r\n              <h6 style=\"text-align:left\">Ensure that driver does not exceed the vehicle or road speed limit</h6>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col class=\"invalid-class\" style=\"margin-left : -1px;\">\r\n            <div class=\"invalid-div\">\r\n              <h5 style=\"text-align:center\"><strong>-</strong></h5>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col align-items-center>\r\n            <div class=\"checkbox-div\" align=\"center\">\r\n              <ion-checkbox formControlName=\"cmdspeedlimit\" name=\"cmdspeedlimit\" ></ion-checkbox>\r\n            </div>\r\n          </ion-col>\r\n        </ion-row>\r\n        <ion-row class=\"cell-class\">\r\n          <ion-col size=\"8\">\r\n            <div>\r\n              <h6 style=\"text-align:left\">Warn the driver of any obstacles, hazards or dangers</h6>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col class=\"invalid-class\" style=\"margin-left : -1px;\">\r\n            <div class=\"invalid-div\">\r\n              <h5 style=\"text-align:center\"><strong>-</strong></h5>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col align-items-center>\r\n            <div class=\"checkbox-div\" align=\"center\">\r\n              <ion-checkbox formControlName=\"cmddanger\" name=\"cmddanger\" style=\"background: transparent;\">></ion-checkbox>\r\n            </div>\r\n          </ion-col>\r\n        </ion-row>\r\n        <ion-row class=\"cell-class\">\r\n          <ion-col size=\"8\">\r\n            <div>\r\n              <h6 style=\"text-align:left\">Warn the driver during reversing or movement towards congested or narrow spaces</h6>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col class=\"invalid-class\" style=\"margin-left : -1px;\">\r\n            <div class=\"invalid-div\">\r\n              <h5 style=\"text-align:center\"><strong>-</strong></h5>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col align-items-center>\r\n            <div class=\"checkbox-div\" align=\"center\">\r\n              <ion-checkbox formControlName=\"cmdreverse\" name=\"cmdreverse\"></ion-checkbox>\r\n            </div>\r\n          </ion-col>\r\n        </ion-row>\r\n        <ion-row class=\"cell-class\">\r\n          <ion-col size=\"8\">\r\n            <div>\r\n              <h6 style=\"text-align:left\">Brief and ensure troops secure their seat belts before movement of vehicle</h6>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col class=\"cell-class\" style=\"margin-left : -1px;\">\r\n            <div class=\"checkbox-div\" align=\"center\">\r\n              <ion-checkbox formControlName=\"seatbeltdriver\" name=\"seatbeltdriver\"></ion-checkbox>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col align-items-center>\r\n            <div class=\"checkbox-div\" align=\"center\">\r\n              <ion-checkbox formControlName=\"seatbeltcommander\" name=\"seatbeltcommander\"></ion-checkbox>\r\n            </div>\r\n          </ion-col>\r\n        </ion-row>\r\n        <ion-row class=\"cell-class\">\r\n          <ion-col size=\"8\">\r\n            <div>\r\n              <h6 style=\"text-align:left\">Check and ensure seating or loading capacity of the vehicle is not exceeded</h6>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col class=\"cell-class\" style=\"margin-left : -1px;\">\r\n            <div class=\"checkbox-div\" align=\"center\">\r\n              <ion-checkbox formControlName=\"seatingdriver\" name=\"seatingdriver\"></ion-checkbox>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col align-items-center>\r\n            <div class=\"checkbox-div\" align=\"center\">\r\n              <ion-checkbox formControlName=\"seatingcommander\" name=\"seatingcommander\"></ion-checkbox>\r\n            </div>\r\n          </ion-col>\r\n        </ion-row>\r\n        <ion-row class=\"cell-class\">\r\n          <ion-col size=\"8\">\r\n            <div>\r\n              <h6 style=\"text-align:left\">Check and ensure safety straps in place and tailboard of vehicle is closed</h6>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col class=\"cell-class\" style=\"margin-left : -1px;\">\r\n            <div class=\"checkbox-div\" align=\"center\">\r\n              <ion-checkbox formControlName=\"safetystrapdriver\" name=\"safetystrapdriver\"></ion-checkbox>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col align-items-center>\r\n            <div class=\"checkbox-div\" align=\"center\">\r\n              <ion-checkbox formControlName=\"safetystrapcommander\" name=\"safetystrapcommander\"></ion-checkbox>\r\n            </div>\r\n          </ion-col>\r\n        </ion-row>\r\n        <ion-row class=\"cell-class\">\r\n          <ion-col size=\"8\">\r\n            <div>\r\n              <h6 style=\"text-align:left\">Brief troops on no smoking/sleeping on the vehicle before movement of vehicle</h6>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col class=\"cell-class\" style=\"margin-left : -1px;\">\r\n            <div class=\"checkbox-div\" align=\"center\">\r\n              <ion-checkbox formControlName=\"smokingdriver\" name=\"smokingdriver\"></ion-checkbox>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col align-items-center>\r\n            <div class=\"checkbox-div\" align=\"center\">\r\n              <ion-checkbox formControlName=\"smokingcommander\" name=\"smokingcommander\"></ion-checkbox>\r\n            </div>\r\n          </ion-col>\r\n        </ion-row>\r\n        <ion-row class=\"cell-class\">\r\n          <ion-col size=\"8\">\r\n            <div>\r\n              <h6 style=\"text-align:left\">Secure load before movement</h6>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col class=\"cell-class\" style=\"margin-left : -1px;\">\r\n            <div class=\"checkbox-div\" align=\"center\">\r\n              <ion-checkbox formControlName=\"loaddriver\" name=\"loaddriver\"></ion-checkbox>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col align-items-center>\r\n            <div class=\"checkbox-div\" align=\"center\">\r\n              <ion-checkbox formControlName=\"loadcommander\" name=\"loadcommander\"></ion-checkbox>\r\n            </div>\r\n          </ion-col>\r\n        </ion-row>\r\n        <ion-row class=\"cell-class\">\r\n          <ion-col size=\"8\">\r\n            <div>\r\n              <h6 style=\"text-align:left\">Brief and ensure troops secure their seat belts before movement of vehicle</h6>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col class=\"cell-class\" style=\"margin-left : -1px;\">\r\n            <div class=\"checkbox-div\" align=\"center\">\r\n              <ion-checkbox formControlName=\"seatbelttroopsdriver\" name=\"seatbelttroopsdriver\"></ion-checkbox>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col align-items-center>\r\n            <div class=\"checkbox-div\" align=\"center\">\r\n              <ion-checkbox formControlName=\"seatbelttroopscommander\" name=\"seatbelttroopscommander\"></ion-checkbox>\r\n            </div>\r\n          </ion-col>\r\n        </ion-row>\r\n        <ion-row class=\"cell-class\">\r\n          <ion-col size=\"8\">\r\n            <div>\r\n              <h6 style=\"text-align:left\">If vehicle involved in an accident to contact parent unit, POLICE and SAF PROVOST UNIT to inform about accident</h6>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col class=\"cell-class\" style=\"margin-left : -1px;\">\r\n            <div class=\"checkbox-div\" align=\"center\">\r\n              <ion-checkbox formControlName=\"accidentdriver\" name=\"accidentdriver\"></ion-checkbox>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col align-items-center>\r\n            <div class=\"checkbox-div\" align=\"center\">\r\n              <ion-checkbox formControlName=\"accidentcommander\" name=\"accidentcommander\"></ion-checkbox>\r\n            </div>\r\n          </ion-col>\r\n        </ion-row>\r\n        <ion-row class=\"cell-class\">\r\n          <ion-col size=\"8\">\r\n            <div>\r\n              <h6 style=\"text-align:left\">Ensure that MT RAC form is completed and duly counter-signed</h6>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col class=\"cell-class\" style=\"margin-left : -1px;\">\r\n            <div class=\"checkbox-div\" align=\"center\">\r\n              <ion-checkbox formControlName=\"mtraccompletedriver\" name=\"mtraccompletedriver\"></ion-checkbox>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col align-items-center>\r\n            <div class=\"checkbox-div\" align=\"center\">\r\n              <ion-checkbox formControlName=\"mtraccompletecommander\" name=\"mtraccompletecommander\"></ion-checkbox>\r\n            </div>\r\n          </ion-col>\r\n        </ion-row>\r\n        <ion-row class=\"cell-class\">\r\n          <ion-col size=\"8\">\r\n            <div>\r\n              <h6 style=\"text-align:left\">Ensure that driver has completed the checks listed above</h6>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col class=\"invalid-class\" style=\"margin-left : -1px;\">\r\n            <div class=\"invalid-div\">\r\n              <h5 style=\"text-align:center\"><strong>-</strong></h5>\r\n            </div>\r\n          </ion-col>\r\n          <ion-col align-items-center>\r\n            <div class=\"checkbox-div\" align=\"center\">\r\n              <ion-checkbox formControlName=\"cmdchecklistcomplete\" name=\"cmdchecklistcomplete\"></ion-checkbox>\r\n            </div>\r\n          </ion-col>\r\n        </ion-row>\r\n      </ion-grid>\r\n    </ion-item>\r\n\r\n<!--\r\n\r\n    <div class=\"btn-wrapper\">\r\n      <div *ngIf = showSubmit()>\r\n        <ion-button class=\"submit-btn\" type=\"submit\" routerLink=\"/add-drive\" [disabled]=\"!mtracForm.valid\" style=\"padding-right:10px\">Submit\r\n        </ion-button>\r\n        <ion-button (click)='onCancel()'>Cancel</ion-button>\r\n      </div>\r\n      <div *ngIf = !showSubmit()>\r\n        <ion-button expand=\"block\" (click)='onCancel()'>OK</ion-button>\r\n      </div>\r\n    </div>\r\n\r\n-->\r\n\r\n    <ion-item>\r\n      <ion-label text-wrap>I acknowledge that I, {{this.database.current.user.name}}, have read through, understood, and checked through the MT Risk Assessment (MT-RAC) Checklist on {{getcdt()}}.</ion-label>\r\n      <ion-checkbox *ngIf=\"this.driver == this.database.current.user.email\" slot=\"start\" formControlName=\"drivermtrac\" name=\"drivermtrac\" style=\"background: transparent;\"></ion-checkbox>\r\n      <ion-checkbox *ngIf=\"this.commander == this.database.current.user.email\" slot=\"start\" formControlName=\"commandermtrac\" name=\"commandermtrac\" style=\"background: transparent;\"></ion-checkbox>\r\n    </ion-item>\r\n\r\n    <div class=\"btn-wrapper\">\r\n    <div *ngIf=\"mtracForm.get('drivermtrac').value && !mtracForm.get('commandermtrac').value && this.commander != this.database.current.user.email\">\r\n      <ion-button (click)='onCancel()'>Cancel</ion-button>\r\n      <ion-button *ngIf=\"!this.database.current.user.is_commander\" style=\"padding-right:10px\" class=\"submit-btn\" type=\"submit\" [disabled]=\"!mtracForm.valid || getoverallrisk()==false\" routerLink=\"/tabs/summary\">Submit</ion-button>\r\n      <ion-button *ngIf=\"this.database.current.user.is_commander\" style=\"padding-right:10px\" class=\"submit-btn\" type=\"submit\" [disabled]=\"!mtracForm.valid || getoverallrisk()==false\" routerLink=\"/tabs/commander\">Submit</ion-button>\r\n    </div>\r\n    <div *ngIf=\"this.commander == this.database.current.user.email\">\r\n      <ion-button (click)='onCancel()'>Cancel</ion-button>\r\n      <ion-button style=\"padding-right:10px\" [disabled]=\"!getcmdchecklistcomplete() || getoverallrisk()==false \" class=\"submit-btn\" type=\"submit\" (click)='onCancel()'>Acknowledge</ion-button>\r\n    </div>\r\n    <div *ngIf=\"getcmdchecklistcomplete() && this.commander != this.database.current.user.email\">\r\n      <ion-button (click)='onCancel()'>Cancel</ion-button>\r\n      <ion-button style=\"padding-right:10px\" routerLink=\"/add-drive\" class=\"submit-btn\" type=\"submit\">Continue</ion-button>\r\n    </div>\r\n    <div *ngIf=\"!mtracForm.get('drivermtrac').value\">\r\n      <ion-button (click)='onCancel()'>Cancel</ion-button>\r\n    </div>\r\n  </div>\r\n\r\n  </form>\r\n\r\n</ion-content>");

/***/ }),

/***/ "./src/app/mtrac/mtrac.module.ts":
/*!***************************************!*\
  !*** ./src/app/mtrac/mtrac.module.ts ***!
  \***************************************/
/*! exports provided: mtracPageModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mtracPageModule", function() { return mtracPageModule; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm2015/common.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm2015/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/dist/fesm5.js");
/* harmony import */ var _mtrac_page__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./mtrac.page */ "./src/app/mtrac/mtrac.page.ts");







const routes = [
    {
        path: '',
        component: _mtrac_page__WEBPACK_IMPORTED_MODULE_6__["mtracPage"]
    }
];
let mtracPageModule = class mtracPageModule {
};
mtracPageModule = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
        imports: [
            _angular_common__WEBPACK_IMPORTED_MODULE_2__["CommonModule"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_3__["FormsModule"],
            _ionic_angular__WEBPACK_IMPORTED_MODULE_5__["IonicModule"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_3__["ReactiveFormsModule"],
            _angular_router__WEBPACK_IMPORTED_MODULE_4__["RouterModule"].forChild(routes)
        ],
        declarations: [_mtrac_page__WEBPACK_IMPORTED_MODULE_6__["mtracPage"]]
    })
], mtracPageModule);



/***/ }),

/***/ "./src/app/mtrac/mtrac.page.scss":
/*!***************************************!*\
  !*** ./src/app/mtrac/mtrac.page.scss ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("* {\n  --ion-text-color: black; }\n\nion-toolbar {\n  --background:#FFFF66; }\n\nion-content {\n  --ion-background-color:#FFFF66;\n  --color:black;\n  --ion-text-color: black; }\n\nion-card {\n  --background:#FFFF66; }\n\nion-item {\n  --background:#FFFF66;\n  height: auto;\n  min-height: auto; }\n\nion-grid {\n  --background:#FFFF66; }\n\nion-input {\n  text-transform: uppercase;\n  color: primary !important; }\n\nion-card-title {\n  --color:black; }\n\nion-select {\n  --placeholder-color:black;\n  --color:black;\n  --padding-start: 0px;\n  --inner-padding-end: 0px;\n  min-width: auto;\n  max-width: 70%;\n  height: auto;\n  min-height: auto;\n  max-height: 100%; }\n\nlabel {\n  color: black; }\n\n.btn-wrapper {\n  text-align: center; }\n\n.input[type=number] {\n  -moz-appearance: textfield; }\n\n.input[type=number]::-webkit-inner-spin-button {\n    display: none; }\n\n.toolbar-title {\n  text-overflow: inherit;\n  white-space: normal;\n  text-align: left;\n  font-size: 1.3em; }\n\n.cell-class {\n  border-color: black;\n  border-width: .01em;\n  border-style: solid; }\n\n.invalid-class {\n  border-color: black;\n  border-width: .01em;\n  border-style: solid;\n  background: #c9c966; }\n\n.row {\n  height: 100%; }\n\n.col {\n  height: 100%;\n  border: solid black; }\n\n.sc-ion-popover-md-h {\n  min-width: auto;\n  min-height: auto;\n  max-width: 100%;\n  height: 50%; }\n\n.popover-content.sc-ion-popover-md {\n  position: inherit;\n  min-width: auto;\n  max-width: 100%;\n  height: auto;\n  min-height: auto;\n  max-height: 100%; }\n\ndiv {\n  color: black; }\n\n.invalid-div {\n  color: black;\n  background-color: #c9c966; }\n\n.checkbox-div {\n  background-color: #FFFF66; }\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbXRyYWMvQzpcXFVzZXJzXFxSdWlcXEFuZHJvaWRTdHVkaW9Qcm9qZWN0c1xcRW5naW5lZXJzTG9nYm9vazIvc3JjXFxhcHBcXG10cmFjXFxtdHJhYy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFSSx1QkFBaUIsRUFBQTs7QUFHckI7RUFDSSxvQkFBYSxFQUFBOztBQUdqQjtFQUNFLDhCQUF1QjtFQUN2QixhQUFRO0VBQ1IsdUJBQWlCLEVBQUE7O0FBR25CO0VBQ0Usb0JBQWEsRUFBQTs7QUFHZjtFQUNFLG9CQUFhO0VBQ2IsWUFBWTtFQUNaLGdCQUFnQixFQUFBOztBQUdsQjtFQUNFLG9CQUFhLEVBQUE7O0FBR2Y7RUFDRSx5QkFBeUI7RUFDekIseUJBQXdCLEVBQUE7O0FBRzFCO0VBQ0UsYUFBUSxFQUFBOztBQUdWO0VBQ0UseUJBQW9CO0VBQ3BCLGFBQVE7RUFDUixvQkFBZ0I7RUFDaEIsd0JBQW9CO0VBQ3BCLGVBQWU7RUFDZixjQUFjO0VBQ2QsWUFBWTtFQUNaLGdCQUFnQjtFQUNoQixnQkFBZ0IsRUFBQTs7QUFHbEI7RUFDRSxZQUFXLEVBQUE7O0FBR2I7RUFDRSxrQkFBa0IsRUFBQTs7QUFJcEI7RUFFRSwwQkFBeUIsRUFBQTs7QUFGM0I7SUFDZ0MsYUFBYSxFQUFBOztBQUk3QztFQUNHLHNCQUFzQjtFQUN0QixtQkFBbUI7RUFDbkIsZ0JBQWdCO0VBQ2hCLGdCQUFlLEVBQUE7O0FBR2xCO0VBQ0UsbUJBQW1CO0VBQ25CLG1CQUFtQjtFQUNuQixtQkFBa0IsRUFBQTs7QUFHcEI7RUFDRSxtQkFBbUI7RUFDbkIsbUJBQW1CO0VBQ25CLG1CQUFrQjtFQUNsQixtQkFBa0IsRUFBQTs7QUFHcEI7RUFFRSxZQUFZLEVBQUE7O0FBR2Q7RUFDRSxZQUFZO0VBQ1osbUJBQW1CLEVBQUE7O0FBR3JCO0VBQ0ksZUFBZTtFQUNmLGdCQUFnQjtFQUNoQixlQUFlO0VBQ2YsV0FBVyxFQUFBOztBQUdmO0VBQ0ksaUJBQWlCO0VBQ2pCLGVBQWU7RUFDZixlQUFlO0VBQ2YsWUFBWTtFQUNaLGdCQUFnQjtFQUNoQixnQkFBZ0IsRUFBQTs7QUFHcEI7RUFDSSxZQUFZLEVBQUE7O0FBR2hCO0VBQ0ksWUFBWTtFQUNaLHlCQUF5QixFQUFBOztBQUc3QjtFQUNJLHlCQUF5QixFQUFBIiwiZmlsZSI6InNyYy9hcHAvbXRyYWMvbXRyYWMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiKiB7XHJcbi8vICBvcGFjaXR5OiAxICFpbXBvcnRhbnQ7ICAvLyBkaXNhYmxlZCBpdGVtcyB3aWxsIG5vdCBiZSBncmV5IG91dC5cclxuICAgIC0taW9uLXRleHQtY29sb3I6IGJsYWNrO1xyXG59XHJcblxyXG5pb24tdG9vbGJhcntcclxuICAgIC0tYmFja2dyb3VuZDojRkZGRjY2O1xyXG59XHJcblxyXG5pb24tY29udGVudHtcclxuICAtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yOiNGRkZGNjY7XHJcbiAgLS1jb2xvcjpibGFjaztcclxuICAtLWlvbi10ZXh0LWNvbG9yOiBibGFjaztcclxufVxyXG5cclxuaW9uLWNhcmR7XHJcbiAgLS1iYWNrZ3JvdW5kOiNGRkZGNjY7XHJcbn1cclxuXHJcbmlvbi1pdGVte1xyXG4gIC0tYmFja2dyb3VuZDojRkZGRjY2O1xyXG4gIGhlaWdodDogYXV0bztcclxuICBtaW4taGVpZ2h0OiBhdXRvO1xyXG59XHJcblxyXG5pb24tZ3JpZHtcclxuICAtLWJhY2tncm91bmQ6I0ZGRkY2NjtcclxufVxyXG5cclxuaW9uLWlucHV0e1xyXG4gIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XHJcbiAgY29sb3I6IHByaW1hcnkhaW1wb3J0YW50O1xyXG59XHJcblxyXG5pb24tY2FyZC10aXRsZXtcclxuICAtLWNvbG9yOmJsYWNrO1xyXG59XHJcblxyXG5pb24tc2VsZWN0e1xyXG4gIC0tcGxhY2Vob2xkZXItY29sb3I6YmxhY2s7XHJcbiAgLS1jb2xvcjpibGFjaztcclxuICAtLXBhZGRpbmctc3RhcnQ6IDBweDtcclxuICAtLWlubmVyLXBhZGRpbmctZW5kOiAwcHg7XHJcbiAgbWluLXdpZHRoOiBhdXRvO1xyXG4gIG1heC13aWR0aDogNzAlO1xyXG4gIGhlaWdodDogYXV0bztcclxuICBtaW4taGVpZ2h0OiBhdXRvO1xyXG4gIG1heC1oZWlnaHQ6IDEwMCU7XHJcbn1cclxuXHJcbmxhYmVse1xyXG4gIGNvbG9yOmJsYWNrO1xyXG59XHJcblxyXG4uYnRuLXdyYXBwZXIge1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxufVxyXG5cclxuLy8gZG8gbm90IHNob3cgc3Bpbm5lciBmb3IgbnVtYmVyIGlucHV0c1xyXG4uaW5wdXRbdHlwZT1udW1iZXJdIHsgIFxyXG4gICY6Oi13ZWJraXQtaW5uZXItc3Bpbi1idXR0b257IGRpc3BsYXk6IG5vbmU7IH1cclxuICAtbW96LWFwcGVhcmFuY2U6dGV4dGZpZWxkO1xyXG59XHJcblxyXG4udG9vbGJhci10aXRsZSB7XHJcbiAgIHRleHQtb3ZlcmZsb3c6IGluaGVyaXQ7XHJcbiAgIHdoaXRlLXNwYWNlOiBub3JtYWw7XHJcbiAgIHRleHQtYWxpZ246IGxlZnQ7XHJcbiAgIGZvbnQtc2l6ZToxLjNlbTtcclxufVxyXG5cclxuLmNlbGwtY2xhc3Mge1xyXG4gIGJvcmRlci1jb2xvcjogYmxhY2s7XHJcbiAgYm9yZGVyLXdpZHRoOiAuMDFlbTtcclxuICBib3JkZXItc3R5bGU6c29saWQ7XHJcbn1cclxuXHJcbi5pbnZhbGlkLWNsYXNzIHtcclxuICBib3JkZXItY29sb3I6IGJsYWNrO1xyXG4gIGJvcmRlci13aWR0aDogLjAxZW07XHJcbiAgYm9yZGVyLXN0eWxlOnNvbGlkO1xyXG4gIGJhY2tncm91bmQ6I2M5Yzk2NjtcclxufVxyXG5cclxuLnJvdyB7XHJcbiAgLy8gRm9yY2UgZ3JpZCB0byBmaWxsIGhlaWdodCBvZiBjb250ZW50IGFzIHRoaXMgaXMgbm90IHNldCBieSBkZWZhdWx0XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG59XHJcblxyXG4uY29se1xyXG4gIGhlaWdodDogMTAwJTtcclxuICBib3JkZXI6IHNvbGlkIGJsYWNrO1xyXG59XHJcblxyXG4uc2MtaW9uLXBvcG92ZXItbWQtaCB7XHJcbiAgICBtaW4td2lkdGg6IGF1dG87XHJcbiAgICBtaW4taGVpZ2h0OiBhdXRvO1xyXG4gICAgbWF4LXdpZHRoOiAxMDAlO1xyXG4gICAgaGVpZ2h0OiA1MCU7XHJcbn1cclxuXHJcbi5wb3BvdmVyLWNvbnRlbnQuc2MtaW9uLXBvcG92ZXItbWQge1xyXG4gICAgcG9zaXRpb246IGluaGVyaXQ7XHJcbiAgICBtaW4td2lkdGg6IGF1dG87XHJcbiAgICBtYXgtd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6IGF1dG87XHJcbiAgICBtaW4taGVpZ2h0OiBhdXRvO1xyXG4gICAgbWF4LWhlaWdodDogMTAwJTtcclxufVxyXG5cclxuZGl2e1xyXG4gICAgY29sb3I6IGJsYWNrO1xyXG59XHJcblxyXG4uaW52YWxpZC1kaXZ7XHJcbiAgICBjb2xvcjogYmxhY2s7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjYzljOTY2O1xyXG59XHJcblxyXG4uY2hlY2tib3gtZGl2e1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI0ZGRkY2NjtcclxufSJdfQ== */");

/***/ }),

/***/ "./src/app/mtrac/mtrac.page.ts":
/*!*************************************!*\
  !*** ./src/app/mtrac/mtrac.page.ts ***!
  \*************************************/
/*! exports provided: mtracPage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mtracPage", function() { return mtracPage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm2015/forms.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/dist/fesm5.js");
/* harmony import */ var _services_database_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../services/database.service */ "./src/app/services/database.service.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");







let mtracPage = class mtracPage {
    constructor(navCtrl, formBuilder, toastController, database, route) {
        this.navCtrl = navCtrl;
        this.formBuilder = formBuilder;
        this.toastController = toastController;
        this.database = database;
        this.route = route;
        this.errorMessage = '';
        this.successMessage = '';
        this.today = new Date().toISOString();
        this.checkboxstatus = false;
        this.driver = "";
        this.commander = "";
        this.validationMessages = {
            vehicleNumber: [
                { type: 'required', message: 'Vehicle Number is required.' },
                { type: 'minlength', message: 'Vehicle number must be at least 5 characters long.' }
            ],
            licenseType: [
                { type: 'required', message: 'choose license type' },
            ],
            rest: [
                { type: 'required', message: 'choose rest' },
            ],
            health: [
                { type: 'required', message: 'choose health' },
            ],
            weather: [
                { type: 'required', message: 'choose weather' },
            ],
            route: [
                { type: 'required', message: 'choose route' },
            ],
            detailType: [
                { type: 'required', message: 'choose detail type' },
            ],
            vehicleServiceability: [
                { type: 'required', message: 'choose vehicle serviceability' },
            ],
            startLocation: [
                { type: 'required', message: 'enter start location' },
            ],
            endLocation: [
                { type: 'required', message: 'enter end location' },
            ],
            incamp: [
                { type: 'required', message: 'select drive area' },
            ],
        };
    }
    ngOnInit() {
        this.mtracForm = this.formBuilder.group({
            vehicleNumber: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]('', _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].minLength(5), _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].required])),
            licenseType: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]('', _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].required])),
            vehicleType2: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]('', _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].required])),
            rest: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]('', _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].required])),
            health: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]('', _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].required])),
            weather: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]('', _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].required])),
            route: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]('', _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].required])),
            detailType: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]('', _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].required])),
            vc: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"](''),
            vehicleServiceability: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]('', _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].required])),
            incamp: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]('', _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].required])),
            startLocation: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]('', _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].required])),
            endLocation: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]('', _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].required])),
            commander: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]('', _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].required])),
            cmdlicense: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]({ value: false, disabled: true }),
            cmdspeedlimit: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]({ value: false, disabled: true }),
            cmddanger: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]({ value: false, disabled: true }),
            cmdreverse: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]({ value: false, disabled: true }),
            seatbeltcommander: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]({ value: false, disabled: true }),
            seatingcommander: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]({ value: false, disabled: true }),
            safetystrapcommander: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]({ value: false, disabled: true }),
            smokingcommander: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]({ value: false, disabled: true }),
            loadcommander: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]({ value: false, disabled: true }),
            seatbelttroopscommander: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]({ value: false, disabled: true }),
            accidentcommander: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]({ value: false, disabled: true }),
            mtraccompletecommander: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]({ value: false, disabled: true }),
            cmdchecklistcomplete: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]({ value: false, disabled: true }),
            commandermtrac: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"]({ value: false, disabled: true }),
            seatbeltdriver: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"](false, _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].requiredTrue])),
            seatingdriver: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"](false, _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].requiredTrue])),
            safetystrapdriver: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"](false),
            smokingdriver: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"](false, _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].requiredTrue])),
            loaddriver: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"](false, _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].requiredTrue])),
            seatbelttroopsdriver: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"](false, _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].requiredTrue])),
            accidentdriver: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"](false, _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].requiredTrue])),
            mtraccompletedriver: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"](false, _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].requiredTrue])),
            drivermtrac: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormControl"](false, _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].compose([_angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].requiredTrue])),
        });
        this.mtrac = this.database.current.mtrac_to_edit;
        if (this.mtrac != null) {
            if (this.database.current.user.email == this.mtrac.commander && this.mtrac.status === 'pending') {
                this.commander = this.mtrac.commander;
                this.setmtracDetails();
                this.mtracForm.disable();
                this.mtracForm.get('cmdlicense').enable();
                this.mtracForm.get('cmdspeedlimit').enable();
                this.mtracForm.get('cmddanger').enable();
                this.mtracForm.get('cmdreverse').enable();
                this.mtracForm.get('seatbeltcommander').enable();
                this.mtracForm.get('seatingcommander').enable();
                this.mtracForm.get('safetystrapcommander').enable();
                this.mtracForm.get('smokingcommander').enable();
                this.mtracForm.get('loadcommander').enable();
                this.mtracForm.get('seatbelttroopscommander').enable();
                this.mtracForm.get('accidentcommander').enable();
                this.mtracForm.get('mtraccompletecommander').enable();
                this.mtracForm.get('cmdchecklistcomplete').enable();
                this.mtracForm.get('commandermtrac').enable();
            }
            else if (this.database.current.user.email == this.mtrac.driver && this.mtrac.status === 'verified') {
                this.driver = this.mtrac.driver;
                this.setmtracDetails();
                this.mtracForm.disable();
            }
            else if (this.database.current.user.email == this.mtrac.driver && this.mtrac.status === 'pending') {
                this.driver = this.mtrac.driver;
                this.setmtracDetails();
                this.mtracForm.disable();
            }
        }
        else {
            this.driver = this.database.current.user.email;
        }
    }
    setmtracDetails() {
        // Stage-1 details
        // populate values of start mtrac fields
        this.mtracForm.get('commander').setValue(this.mtrac.commander);
        this.mtracForm.get('vehicleNumber').setValue(this.mtrac.vehicleNumber.toUpperCase());
        this.mtracForm.get('vehicleType2').setValue(this.mtrac.vehicleType2);
        this.mtracForm.get('licenseType').setValue(this.mtrac.licenseType);
        this.mtracForm.get('incamp').setValue(this.mtrac.incamp);
        this.mtracForm.get('rest').setValue(this.mtrac.rest);
        this.mtracForm.get('health').setValue(this.mtrac.health);
        this.mtracForm.get('weather').setValue(this.mtrac.weather);
        this.mtracForm.get('route').setValue(this.mtrac.route);
        this.mtracForm.get('detailType').setValue(this.mtrac.detailType);
        this.mtracForm.get('vc').setValue(this.mtrac.vc);
        this.mtracForm.get('vehicleServiceability').setValue(this.mtrac.vehicleServiceability);
        this.mtracForm.get('startLocation').setValue(this.mtrac.startLocation);
        this.mtracForm.get('endLocation').setValue(this.mtrac.endLocation);
        this.mtracForm.get('cmdlicense').setValue(this.mtrac.cmdlicense);
        this.mtracForm.get('cmdspeedlimit').setValue(this.mtrac.cmdspeedlimit);
        this.mtracForm.get('cmddanger').setValue(this.mtrac.cmddanger);
        this.mtracForm.get('cmdreverse').setValue(this.mtrac.cmdreverse);
        this.mtracForm.get('seatbeltcommander').setValue(this.mtrac.seatbeltcommander);
        this.mtracForm.get('seatingcommander').setValue(this.mtrac.seatingcommander);
        this.mtracForm.get('safetystrapcommander').setValue(this.mtrac.safetystrapcommander);
        this.mtracForm.get('smokingcommander').setValue(this.mtrac.smokingcommander);
        this.mtracForm.get('loadcommander').setValue(this.mtrac.loadcommander);
        this.mtracForm.get('seatbelttroopscommander').setValue(this.mtrac.seatbelttroopscommander);
        this.mtracForm.get('accidentcommander').setValue(this.mtrac.accidentcommander);
        this.mtracForm.get('mtraccompletecommander').setValue(this.mtrac.mtraccompletecommander);
        this.mtracForm.get('cmdchecklistcomplete').setValue(this.mtrac.cmdchecklistcomplete);
        this.mtracForm.get('seatbeltdriver').setValue(this.mtrac.seatbeltdriver);
        this.mtracForm.get('seatingdriver').setValue(this.mtrac.seatingdriver);
        this.mtracForm.get('safetystrapdriver').setValue(this.mtrac.safetystrapdriver);
        this.mtracForm.get('smokingdriver').setValue(this.mtrac.smokingdriver);
        this.mtracForm.get('loaddriver').setValue(this.mtrac.loaddriver);
        this.mtracForm.get('seatbelttroopsdriver').setValue(this.mtrac.seatbelttroopsdriver);
        this.mtracForm.get('accidentdriver').setValue(this.mtrac.accidentdriver);
        this.mtracForm.get('mtraccompletedriver').setValue(this.mtrac.mtraccompletedriver);
        this.mtracForm.get('commandermtrac').setValue(this.mtrac.commandermtrac);
        this.mtracForm.get('drivermtrac').setValue(this.mtrac.drivermtrac);
    }
    gettime() {
        var cd = new Date(); // for now
        var nmtmoringstart = new Date();
        nmtmoringstart.setHours(7, 30, 0);
        var nmtmoringend = new Date();
        nmtmoringend.setHours(9, 30, 0);
        var nmtnightstart = new Date();
        nmtnightstart.setHours(17, 30, 0);
        var nmtnightend = new Date();
        nmtnightend.setHours(19, 30, 0);
        if (cd >= nmtmoringstart && cd < nmtmoringend) {
            return false;
        }
        if (cd >= nmtnightstart && cd < nmtnightend) {
            return false;
        }
        return true;
    }
    getcdt() {
        var cd = new Date(); // for now
        var cdt = cd.getDate() + "/"
            + (cd.getMonth() + 1) + "/"
            + cd.getFullYear() + " @ "
            + this.timenow();
        return cdt;
    }
    timenow() {
        var ct = new Date(); // for now
        var r = "";
        if (ct.getHours() < 10) {
            r += 0;
            r += ct.getHours();
        }
        else {
            r += ct.getHours();
        }
        r += ":";
        if (ct.getMinutes() < 10) {
            r += 0;
            r += ct.getMinutes();
        }
        else {
            r += ct.getMinutes();
        }
        return r;
    }
    getapprovedvtypes() {
        var vtypes = _services_database_service__WEBPACK_IMPORTED_MODULE_4__["VehicleTypes"];
        if (this.database.current.user.mss_certified != true) {
            vtypes = vtypes.filter(vtype => vtype != 'MSS');
        }
        if (this.database.current.user.flb_certified != true) {
            vtypes = vtypes.filter(vtype => vtype != 'FLB');
        }
        if (this.database.current.user.belrex_certified != true) {
            vtypes = vtypes.filter(vtype => vtype != 'BELREX');
            return vtypes;
        }
    }
    onCancel() {
        this.navCtrl.pop();
    }
    showSubmit() {
        return true;
    }
    showToast(msg) {
        this.toastController.create({
            message: msg,
            duration: 2000,
            //  showCloseButton: true,
            //  closeButtonText: 'OK',
            position: 'bottom'
        }).then((obj) => {
            obj.present();
        });
    }
    getoverallrisk() {
        var licenseType = this.mtracForm.get('licenseType').value;
        var vehicleType2 = this.mtracForm.get('vehicleType2').value;
        var rest = this.mtracForm.get('rest').value;
        var health = this.mtracForm.get('health').value;
        var weather = this.mtracForm.get('weather').value;
        var route = this.mtracForm.get('route').value;
        var detailType = this.mtracForm.get('detailType').value;
        var vc = this.mtracForm.get('vc').value;
        var vehicleServiceability = this.mtracForm.get('vehicleServiceability').value;
        if (licenseType == "N" || health == "N" || vc == "N" || vehicleServiceability == "N" || licenseType == "" || health == "" || vehicleServiceability == "") {
            return false;
        }
        else if (licenseType == "H" || vehicleType2 == "H" || rest == "H" || health == "H" || weather == "H" || route == "H" || detailType == "H" || vc == "H" || vehicleServiceability == "H") {
            return "HIGH";
        }
        else if (licenseType == "M" || vehicleType2 == "M" || rest == "M" || health == "M" || weather == "M" || route == "M" || detailType == "M" || vc == "M" || vehicleServiceability == "M") {
            return "MEDIUM";
        }
        else if (licenseType == "L" || vehicleType2 == "L" || rest == "L" || health == "L" || weather == "L" || route == "L" || detailType == "L" || vc == "L" || vehicleServiceability == "L") {
            return "LOW";
        }
    }
    getcmdchecklistcomplete() {
        if (this.mtracForm.get('cmdlicense').value == false ||
            this.mtracForm.get('cmdspeedlimit').value == false ||
            this.mtracForm.get('cmddanger').value == false ||
            this.mtracForm.get('cmdreverse').value == false ||
            this.mtracForm.get('seatbeltcommander').value == false ||
            this.mtracForm.get('seatingcommander').value == false ||
            this.mtracForm.get('safetystrapcommander').value == false ||
            this.mtracForm.get('smokingcommander').value == false ||
            this.mtracForm.get('loadcommander').value == false ||
            this.mtracForm.get('seatbelttroopscommander').value == false ||
            this.mtracForm.get('accidentcommander').value == false ||
            this.mtracForm.get('mtraccompletecommander').value == false ||
            this.mtracForm.get('cmdchecklistcomplete').value == false ||
            this.mtracForm.get('commandermtrac').value == false) {
            return false;
        }
        return true;
    }
    getcmdchecklistcomplete2() {
        if (this.mtracForm.get('cmdlicense').value == false ||
            this.mtracForm.get('cmdspeedlimit').value == false ||
            this.mtracForm.get('cmddanger').value == false ||
            this.mtracForm.get('cmdreverse').value == false ||
            this.mtracForm.get('seatbeltcommander').value == false ||
            this.mtracForm.get('seatingcommander').value == false ||
            this.mtracForm.get('safetystrapcommander').value == false ||
            this.mtracForm.get('smokingcommander').value == false ||
            this.mtracForm.get('loadcommander').value == false ||
            this.mtracForm.get('seatbelttroopscommander').value == false ||
            this.mtracForm.get('accidentcommander').value == false ||
            this.mtracForm.get('mtraccompletecommander').value == false ||
            this.mtracForm.get('cmdchecklistcomplete').value == false) {
            return false;
        }
        return true;
    }
    getdriverchecklistcomplete() {
        if (this.mtracForm.get('seatbeltdriver').value == false ||
            this.mtracForm.get('seatingdriver').value == false ||
            this.mtracForm.get('safetystrapdriver').value == false ||
            this.mtracForm.get('smokingdriver').value == false ||
            this.mtracForm.get('loaddriver').value == false ||
            this.mtracForm.get('seatbelttroopsdriver').value == false ||
            this.mtracForm.get('accidentdriver').value == false ||
            this.mtracForm.get('mtraccompletedriver').value == false ||
            this.mtracForm.get('drivermtrac').value == false) {
            return false;
        }
        return true;
    }
    addmtrac(value) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function* () {
            if (this.mtrac == null) {
                try {
                    var new_mtrac = {
                        created: this.database.getTimeStamp(),
                        driver: this.database.current.user.email,
                        commander: this.mtracForm.value.commander,
                        status: "pending",
                        // Stage-1 details
                        vehicleNumber: this.mtracForm.value.vehicleNumber,
                        //vehicle_type: this.mtracForm.value.vehicleType,
                        startLocation: this.mtracForm.value.startLocation,
                        endLocation: this.mtracForm.value.endLocation,
                        fleet: this.database.current.user.fleet,
                        company: this.database.current.user.company,
                        licenseType: this.mtracForm.value.licenseType,
                        vehicleType2: this.mtracForm.value.vehicleType2,
                        rest: this.mtracForm.value.rest,
                        health: this.mtracForm.value.health,
                        weather: this.mtracForm.value.weather,
                        route: this.mtracForm.value.route,
                        detailType: this.mtracForm.value.detailType,
                        vc: this.mtracForm.value.vc,
                        vehicleServiceability: this.mtracForm.value.vehicleServiceability,
                        incamp: this.mtracForm.value.incamp,
                        cmdlicense: false,
                        cmdspeedlimit: false,
                        cmddanger: false,
                        cmdreverse: false,
                        seatbeltcommander: false,
                        seatingcommander: false,
                        safetystrapcommander: false,
                        smokingcommander: false,
                        loadcommander: false,
                        seatbelttroopscommander: false,
                        accidentcommander: false,
                        mtraccompletecommander: false,
                        cmdchecklistcomplete: false,
                        seatbeltdriver: this.mtracForm.value.seatbeltdriver,
                        seatingdriver: this.mtracForm.value.seatingdriver,
                        safetystrapdriver: this.mtracForm.value.safetystrapdriver,
                        smokingdriver: this.mtracForm.value.smokingdriver,
                        loaddriver: this.mtracForm.value.loaddriver,
                        seatbelttroopsdriver: this.mtracForm.value.seatbelttroopsdriver,
                        accidentdriver: this.mtracForm.value.accidentdriver,
                        mtraccompletedriver: this.mtracForm.value.mtraccompletedriver,
                        drivermtrac: this.mtracForm.value.drivermtrac,
                        commandermtrac: false,
                    };
                    let subAutoID = this.database.collection('mtrac').doc().id;
                    new_mtrac.id = subAutoID;
                    console.log('new_mtrac=${JSON.stringify(new_mtrac)}');
                    yield this.database.write('mtrac', new_mtrac.id, new_mtrac);
                    this.errorMessage = '';
                    this.successMessage = 'Your MT-RAC form has been submitted to your vehicle commander for approval.';
                    this.showToast(this.successMessage);
                }
                catch (err) {
                    this.errorMessage = `Add MT-RAC error: ${err}`;
                    this.successMessage = '';
                    this.showToast(this.errorMessage);
                    console.log(this.errorMessage);
                    this.navCtrl.pop();
                }
            }
            else if (this.database.current.user.is_commander) {
                // commander has verified/rejected drive, update drive status.
                this.mtrac.status = "verified";
                this.mtrac.cmdlicense = this.mtracForm.get('cmdlicense').value;
                this.mtrac.cmdspeedlimit = this.mtracForm.get('cmdspeedlimit').value;
                this.mtrac.cmddanger = this.mtracForm.get('cmddanger').value;
                this.mtrac.cmdreverse = this.mtracForm.get('cmdreverse').value;
                this.mtrac.seatbeltcommander = this.mtracForm.get('seatbeltcommander').value;
                this.mtrac.seatingcommander = this.mtracForm.get('seatingcommander').value;
                this.mtrac.safetystrapcommander = this.mtracForm.get('safetystrapcommander').value;
                this.mtrac.smokingcommander = this.mtracForm.get('smokingcommander').value;
                this.mtrac.loadcommander = this.mtracForm.get('loadcommander').value;
                this.mtrac.seatbelttroopscommander = this.mtracForm.get('seatbelttroopscommander').value;
                this.mtrac.accidentcommander = this.mtracForm.get('accidentcommander').value;
                this.mtrac.mtraccompletecommander = this.mtracForm.get('mtraccompletecommander').value;
                this.mtrac.cmdchecklistcomplete = this.mtracForm.get('cmdchecklistcomplete').value;
                this.mtrac.commandermtrac = this.mtracForm.get('commandermtrac').value;
                // update status in database
                yield this.database.write('mtrac', this.mtrac.id, this.mtrac);
                this.errorMessage = '';
                this.successMessage = 'The MT-RAC Form is completed successfully.';
                this.showToast(this.successMessage);
            }
        });
    }
};
mtracPage.ctorParameters = () => [
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_3__["NavController"] },
    { type: _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormBuilder"] },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_3__["ToastController"] },
    { type: _services_database_service__WEBPACK_IMPORTED_MODULE_4__["DatabaseService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_5__["ActivatedRoute"] }
];
mtracPage = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-mtrac',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./mtrac.page.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/mtrac/mtrac.page.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./mtrac.page.scss */ "./src/app/mtrac/mtrac.page.scss")).default]
    }),
    tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_ionic_angular__WEBPACK_IMPORTED_MODULE_3__["NavController"],
        _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormBuilder"],
        _ionic_angular__WEBPACK_IMPORTED_MODULE_3__["ToastController"],
        _services_database_service__WEBPACK_IMPORTED_MODULE_4__["DatabaseService"],
        _angular_router__WEBPACK_IMPORTED_MODULE_5__["ActivatedRoute"]])
], mtracPage);



/***/ })

}]);
//# sourceMappingURL=mtrac-mtrac-module-es2015.js.map